<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>R-toolbox: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav library"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="lc-logo" alt="Library Carpentry" src="../assets/images/library-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav library" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Library Carpentry" src="../assets/images/library-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      R-toolbox
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            R-toolbox
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="CLT.html">CLT</a></li>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  R-toolbox
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress library">
    <div class="progress-bar library" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introduction</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="reproducible-analysis.html">2. Reproducible Data Analysis</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="reading-files.html">3. Reading data from file</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="descript-stat.html">4. Descriptive Statistics</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="table1.html">5. Table One</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="tidy-data.html">6. Tidy Data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="datamanipulation.html">7. Elementary Datamanipulation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="datamanipulation-advanced.html">8. Advanced dplyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="datatidying.html">9. tidyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="normal-distribution.html">10. The normal distribution</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="is-it-normal.html">11. Testing for normality</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="which-distribution.html">12. which-distribution</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="notes.html">13. notes</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="notes2.html">14. notes2</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="regression.html">15. Linear regression</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush17">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading17">
        <a href="regression2.html">16. Non-linear regression</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush18">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading18">
        <a href="regression3.html">17. Logistisk regression</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush19">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading19">
        <a href="regression4.html">18. multinomiel</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush20">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading20">
        <a href="diagramtest.html">19. diagramtest</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush21">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading21">
        <a href="clt.html">20. Central Limit Theorem</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush22">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading22">
        <a href="multiple-regression.html">21. Multiple linear regression</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush23">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading23">
        <a href="opgaver.html">22. opgaver</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush24">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading24">
        <a href="powerberegninger.html">23. powerberegninger</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush25">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading25">
        <a href="rstudio.html">24. Tips &amp; Tricks 4 RStudio</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush26">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading26">
        <a href="packages.html">25. packages</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush27">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading27">
        <a href="best-noter.html">26. best_noter</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush28">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading28">
        <a href="hvad-vi-glemte.html">27. hvad-vi-glemte</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush29">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading29">
        <a href="barcharts.html">28. barcharts</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="CLT.html">CLT</a></li>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-introduction"><p>Content from <a href="introduction.html">Introduction</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/introduction.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Dette kursus skal sådan set ikke som udgangspunkt køres som et
kursus. Det skal danne grundlag for andre kurser.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-reproducible-analysis"><p>Content from <a href="reproducible-analysis.html">Reproducible Data Analysis</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/reproducible-analysis.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I ensure that my results can be reproduced?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>A key concept in the scientific process is reproducibility. We should
be able to run the same experiment again, and get, more or less, the
same result.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>We will not always get the same result, applying the same functions
on the same data - some statistical techniques relies on randomness.</p>
<p>An example is k-means, that clusters data based on randomly selected
initial centroids.</p>
</div>
</div>
</div>
</div>
<p>This also applies to the analysis of data. If we have a collection of
measurements of blood pressure from patients before and after they have
taken an antihypertensive drug, we might arrive at the result that this
specific drug is not working. Doing the same analysis tomorrow, we
should reach the same result.</p>
<p>And that can be surprisingly difficult!</p>
<p>There are a lot of pitfalls, ranging from accessibility to incentive
structures in academia. But the two areas where R can help us are:</p>
<ul>
<li>Software Environment</li>
<li>Documentation and Metadata</li>
<li>Complex Workflows</li>
</ul></section><section><h2 class="section-heading" id="software-environment">Software Environment<a class="anchor" aria-label="anchor" href="#software-environment"></a>
<a class="anchor" aria-label="anchor" href="#software-environment"></a>
</h2>
<hr class="half-width">
<p>Data analysis is done using specific software, libraries or packages,
in a variety of versions. And it happens in an environment on the
computer that might not be identical from day to day.</p>
<p>One example of these problems is shown every time we load tidyverse:
<img src="../fig/tidyverse_conflicts.png" alt="Tidyverse conflicts" class="figure"></p>
<p>This message informs us that there is a <code>filter()</code>
function in the <code>stats</code> packages which is part of the core
R-installation. That function is masked by the <code>filter()</code>
function from the <code>tidyverse´ package</code>dplyr`.</p>
<p>If our analysis relies on the way the <code>filter()</code> function
works in the <code>tidyverse</code>, we will get errors if
<code>tidyverse</code> is not loaded.</p>
<p>We might also have data stored in memory. Every time we close
RStudio, we are asked if we want to save the environment:</p>
<figure><img src="../fig/save_environment.png" alt="Should we save the environment? No!" class="figure mx-auto d-block"><div class="figcaption">Should we save the environment? No!</div>
</figure><p>This will save all the objects we have in our environment, in order
for RStudio to be able to load them into memory when we open RStudio
again.</p>
<p>That can be nice and useful. On the other hand we run the risk of
having the wrong version of the
<code>my_data_that_is_ready_for_analysis</code> dataframe lying around
in memory.</p>
<p>In addition we can experience performance problems. Storing a lot of
large objects before closing RStudio can take a lot of time. And loading
them into memory when opening RStudio will also take a lot of time.</p>
<p>On modern computers we normally have plenty of storage - but it is
entirely possible to fill your harddrive with R-environments to the
point where your computer crashes.</p>
</section><section><h2 class="section-heading" id="documentation-and-metadata">Documentation and Metadata:<a class="anchor" aria-label="anchor" href="#documentation-and-metadata"></a>
<a class="anchor" aria-label="anchor" href="#documentation-and-metadata"></a>
</h2>
<hr class="half-width">
<p>What did we actually do in the analysis? Why did we do it? Why are we
coming to the conclusion we have got to?</p>
<p>Three very good questions. Having good metadata, data that describes
your data, often makes understanding your data easier. Documenting the
individual steps of your analysis, may not seem necessary right now -
you know why you are doing what you are doing. But future you - you in
three months, or some one else, might not remember or be able to guess
(correctly).</p>
</section><section><h2 class="section-heading" id="complex-workflows">Complex Workflows<a class="anchor" aria-label="anchor" href="#complex-workflows"></a>
<a class="anchor" aria-label="anchor" href="#complex-workflows"></a>
</h2>
<hr class="half-width">
<p>Doing data analysis in eg Excel, can involve a lot of pointing and
clicking.</p>
<p>And in any piece of software, the analysis will normally always
involve more than one step. Those steps will have to be done in the
correct order. Calculating a mean of some values, depends heavily on
whether it happens before or after deleting irrelevant observations.</p>
</section><section><h2 class="section-heading" id="the-solution-to-all-of-this">The solution to all of this!<a class="anchor" aria-label="anchor" href="#the-solution-to-all-of-this"></a>
<a class="anchor" aria-label="anchor" href="#the-solution-to-all-of-this"></a>
</h2>
<hr class="half-width">
<p><img src="../fig/horstmarkdown.png" alt="The Rmarkdown family" class="figure">{“Artwork by <a href="https://twitter.com/allison_horst" class="external-link"><span class="citation">@allison_horst</span></a>, CC-BY”}</p>
<p>Working in RMarkdown allows us to collect the text describing our
data, what and why we are doing what we do, the code actually doing it,
and the results of that code - all in one document.</p>
<p>Open a new file, choose RMarkdown, and give your document a name:</p>
<figure><img src="../fig/rmarkdown.png" alt="An RMarkdown document" class="figure mx-auto d-block"><div class="figcaption">An RMarkdown document</div>
</figure><p>In the code chunks, marked here with a light grey background,
contains code, in this case not very advanced code. You can run the
entire code chunk by clicking the green arrow on the right. Or by
placing your cursor in the line of code you want to run, and pressing
ctrl+enter (or command+enter on a Mac).</p>
<p>Outside the code chunks we can add our reasons for actually running
<code>summary</code> on the <code>cars</code> dataframe, and describe
what it contains.</p>
<p>You will see a new button in RStudio: <img src="../fig/knitr_button.png" alt="The Knit button" class="figure"></p>
<p>Clicking this, will “knit” your document; run each chunck of code,
add the output to your document, and combine your code, the results and
all your explanatory text to one html-document.</p>
<p>If you do not want an HTMl-document, you can knit to a MicroSoft Word
document. Depending on your computer, you can knit directly to a
pdf.</p>
<p>Having the entirety of your analysis in an RMarkdown document, and
then running it, ensures that the individual steps in the analysis are
run in the correct order.</p>
<p>It does not ensure that your documentation of what you do is written
- it makes it easy to add it, but you still have to do it.</p>
<div class="section level3">
<h3 id="but-what-about-the-environment">But what about the environment?<a class="anchor" aria-label="anchor" href="#but-what-about-the-environment"></a>
</h3>
<p>So we force ourself to have the steps in our analysis in the correct
order, and we make it easy to add documentation. What about the
environment?</p>
<p>Working with RMarkdown also adresses this problem. Every time we
<code>knit</code> our document, RStudio opens a new session of R,
without libraries or objects in memory. This ensures that the analysis
is done in the exact same way each and every time.</p>
<p>This, on the other hand, requires us to add code chunks loading
libraries and data to our document.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use RMarkdown to enforce reproducible analysis</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-reading-files"><p>Content from <a href="reading-files.html">Reading data from file</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/reading-files.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you read in data from files??</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to read in data from a selection of different data
files.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>The first step of doing dataanalysis, is normally to read in the
data.</p>
<p>Data can come from many different sources, and it is practically
impossible to cover every possible format. Here we cover some of the
more common.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>The most important point is that there is a very high probability
that at least one package exists that is designed to read a specific
weird data format.</p>
</div>
</div>
</div>
</div>
<figure><img src="../fig/manyfiles.webp" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="use-code">Use code!<a class="anchor" aria-label="anchor" href="#use-code"></a>
<a class="anchor" aria-label="anchor" href="#use-code"></a>
</h2>
<hr class="half-width">
<p>RStudio makes it simple to load most common data formats. Right-click
on the file in RStudio, and choose import. RStudio will then provide an
interface for loading the data.</p>
<figure><img src="../fig/data_import.png" class="figure mx-auto d-block"></figure><p>However in general we prefer to have a script or a document, that can
be run without us pointing and clicking. So - instead of importing the
data in this way, copy the code that RStudio uses to import the data,
and paste it into your script or document.</p>
</section><section><h2 class="section-heading" id="csv-files">CSV-files<a class="anchor" aria-label="anchor" href="#csv-files"></a>
<a class="anchor" aria-label="anchor" href="#csv-files"></a>
</h2>
<hr class="half-width">
<p>The most basic file type for storing and transferring data. A
“simple” textfile, containing tabular data. One line of text for each
row of data, each cell in that row, corresponding to a column, separated
with a separator, typically a comma.</p>
<p>Many languages use commas as decimal separators. That neccesitates an
option for using something else than a comma. Typically a semicolon.</p>
<div class="section level3">
<h3 id="truly-commaseparated-files">Truly commaseparated files<a class="anchor" aria-label="anchor" href="#truly-commaseparated-files"></a>
</h3>
<p>Use <code>read.csv()</code> (from base-R) or <code>read_csv()</code>
(from <code>readr</code>, included in <code>tidyverse</code>)</p>
<p>We recommend using <code>read_csv()</code>.</p>
</div>
<div class="section level3">
<h3 id="semicolon-separated-files">Semicolon separated files<a class="anchor" aria-label="anchor" href="#semicolon-separated-files"></a>
</h3>
<p>Use <code>read.csv2()</code> (from base-R) or
<code>read_csv2()</code> (from <code>readr</code>, included in
<code>tidyverse</code>)</p>
<p>We recommend <code>read_csv2()</code></p>
</div>
<div class="section level3">
<h3 id="what-they-have-in-common">What they have in common<a class="anchor" aria-label="anchor" href="#what-they-have-in-common"></a>
</h3>
<p><code>read_csv</code> and <code>read_csv2</code> take a lot of
arguments that can control datatypes, handling of headers etc. For most
use, the default options are enough, but if you need to adjust
something, there are plenty of options for that.</p>
<p>An especially useful argument is <code>guess_max</code></p>
<p><code>read_csv</code> and <code>read_csv2</code> tries to guess the
datatypes in the file, and will convert the data accordingly. That will
return a dataframe where date-time data is stored as such. The functions
by default reads the first 1000 rows, and makes a guess on the datatype
based on that.</p>
<p>That can lead to problems if the first 1000 rows of a column contain
numbers, and row 1001 contains text. In that case the entire row will be
coerced to <code>numeric</code>, and the following rows will contain
<code>NA</code> values. Adjust the argument <code>guess_max</code> to
something larger to catch this problem.</p>
<p>To include every row in the guess, add <code>guess_max = Inf</code> -
but be carefull if you have a very large dataset.</p>
</div>
</section><section><h2 class="section-heading" id="excel-files">Excel-files<a class="anchor" aria-label="anchor" href="#excel-files"></a>
<a class="anchor" aria-label="anchor" href="#excel-files"></a>
</h2>
<hr class="half-width">
<p>Use the <code>readxl</code> package. Excel comes in two variants,
<code>xls</code> and <code>xlsx</code>. <code>read_excel()</code> makes
a qualified quess of the actual type your excel-file is. Should we need
to specify, we can use <code>read_xls()</code> or
<code>read_xlsx()</code>.</p>
<p>Workbooks often contains more than one sheet. We can specify which we
want to read in:</p>
<p><code>read_excel(path = "filename", sheet = 2)</code></p>
<p>Which will read in sheet number 2 from the workbook “filename”.</p>
<p>Read the documentation for details on how to read in specific cells
or ranges.</p>
</section><section><h2 class="section-heading" id="spss">SPSS<a class="anchor" aria-label="anchor" href="#spss"></a>
<a class="anchor" aria-label="anchor" href="#spss"></a>
</h2>
<hr class="half-width">
<p>SPSS, originally “Statistical Package for the Social Sciences”, later
renamed “Statistical Product and Service Solutions” is a proprietary
statistical software suite developed by IBM.</p>
<p>Not surprisingly it is widely used in social science.</p>
<p>The package <code>haven</code> supports reading SPSS (Stata and SAS)
files</p>
<p>Use the package to read in spss files:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">haven</span><span class="op">)</span></span>
<span><span class="fu">read_spss</span><span class="op">(</span><span class="st">"filename"</span><span class="op">)</span></span></code></pre>
</div>
<p>The function returns at tibble.</p>
<p>Note that SPSS uses a variety of different formats.
<code>read_spss()</code> will make a guess of the correct format, but if
problems arise, try using one of the other functions provided in
<code>haven</code></p>
</section><section><h2 class="section-heading" id="stata">Stata<a class="anchor" aria-label="anchor" href="#stata"></a>
<a class="anchor" aria-label="anchor" href="#stata"></a>
</h2>
<hr class="half-width">
<p>Stata is a proprietary statistical software package, used in a
multitude of different fields, primarily biomedicine, epidemiololy,
sociology and economics.</p>
<p>As mentioned above, hte <code>haven</code> package provides functions
for reading Stata files:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">haven</span><span class="op">)</span></span>
<span><span class="fu">read_stata</span><span class="op">(</span><span class="st">"filename"</span><span class="op">)</span></span></code></pre>
</div>
<p>The function returns at tibble.</p>
<p>As with SPSS Stata uses a couple of different fileformats, and
<code>read_stata</code> makes a guess as to which format is used. If
problems arise, <code>haven</code> has more specific functions for
reading specific file formats.</p>
</section><section><h2 class="section-heading" id="sas">SAS<a class="anchor" aria-label="anchor" href="#sas"></a>
<a class="anchor" aria-label="anchor" href="#sas"></a>
</h2>
<hr class="half-width">
<p>SAS is a proprietary statistical software suite developed by SAS
Institute.</p>
<p>As mentioned above the package <code>haven</code> can read
SAS-files:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">haven</span><span class="op">)</span></span>
<span><span class="fu">read_sas</span><span class="op">(</span><span class="st">"filename"</span><span class="op">)</span></span></code></pre>
</div>
<p>The function returns at tibble.</p>
<p>As with SPSS and Stata, SAS uses a couple of different fileformats,
and <code>read_sas</code> tries to guess the correct format.</p>
<p>If problems arise, <code>haven</code> has more specific functions for
reading specific file formats.</p>
</section><section><h2 class="section-heading" id="json">JSON<a class="anchor" aria-label="anchor" href="#json"></a>
<a class="anchor" aria-label="anchor" href="#json"></a>
</h2>
<hr class="half-width">
<p>Not all data come in a nice rectangular format:</p>
<table style="width:97%;" class="table">
<colgroup>
<col width="50%">
<col width="20%">
<col width="22%">
<col width="4%">
</colgroup>
<tbody>
<tr class="odd">
<td rowspan="2">
<h1 id="country">Country</h1>
<p>USA</p>
</td>
<td rowspan="2">
<h1 id="name">Name</h1>
<p>NASA</p>
</td>
<td rowspan="2">
<h1 id="phonenumber">Phonenumber</h1>
<ol start="713" style="list-style-type: decimal">
<li>483-3111</li>
</ol>
</td>
<td></td>
</tr>
<tr class="even">
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>White House</td>
<td>
<ol start="202" style="list-style-type: decimal">
<li>456-1414</li>
</ol>
<p>(202)-456-1111</p>
</td>
<td></td>
</tr>
<tr class="even">
<td>Russia</td>
<td>Kremlin</td>
<td colspan="2">0107-095-295-9051</td>
</tr>
<tr class="odd">
<td>Vatican</td>
<td>The Pope</td>
<td>011-39-6-6982</td>
<td></td>
</tr>
</tbody>
</table>
<p>There are two locations in the US, and one of them have two
phonenumbers. These kinds of structure, where one row contains data with
more than one row (etc), are called nested, and are typically stored or
distributed in the JSON-format.</p>
<p>JSON can be read using <code>fromJSON()</code> from the
<code>jsonlite</code> library.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">jsonlite</span><span class="op">)</span></span>
<span><span class="fu">fromJSON</span><span class="op">(</span><span class="st">"filename"</span><span class="op">)</span></span></code></pre>
</div>
<p>Note that you will end up with nested columns - containing lists -
which you probably will have to handle afterwards.</p>
</section><section><h2 class="section-heading" id="other-formats">Other formats<a class="anchor" aria-label="anchor" href="#other-formats"></a>
<a class="anchor" aria-label="anchor" href="#other-formats"></a>
</h2>
<hr class="half-width">
<p>In general if a piece of software is in widespread enough use that
you encounter the weird file-format it uses, someone will have written a
package for reading it. Google is your friend here!</p>
<p>Also, if you encounter a really weird dataformat, please send us an
example so we can expand our knowledge.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The <code>readr</code> version of <code>read_csv()</code> is
preferred</li>
<li>Remember that csv is not always actually separated with commas.</li>
<li>The <code>haven</code> package contains functions for reading common
proprietary file formats.</li>
<li>In general a package will exist for reading strange datatypes.
Google is your friend!</li>
<li>Use code to read in your data</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-descript-stat"><p>Content from <a href="descript-stat.html">Descriptive Statistics</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/descript-stat.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we describe a set of data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about the most common ways of describing a variable</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Det kan være en udfordring hvis deltagene ikke ved hvad et gennemsnit
er.</p>
<p>En af de overordnede pointer vi gerne vil frem til her, er
percentilerne og det kumulative densitetsplot - der danner grundlag for
forståelsen af normalfordelingens sammenhæng med statistiske tests.</p>
</div>
</div>
</div>
</div>
<p>Descriptive statistic involves summarising or describing a set of
data. It usually presents quantitative descriptions in a short form, and
helps to simplify large datasaets.</p>
<p>Most descriptive statistical parameters applies to just one variable
in our data, and includes:</p>
<table class="table">
<thead><tr class="header">
<th>Central tendency</th>
<th>Measure of variation</th>
<th>Measure of shape</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Mean</td>
<td>Range</td>
<td>Skewness</td>
</tr>
<tr class="even">
<td>Median</td>
<td>Quartiles</td>
<td>Kurtosis</td>
</tr>
<tr class="odd">
<td>mode</td>
<td>Inter Quartile Range</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>Variance</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>Standard deviation</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>Percentiles</td>
<td></td>
</tr>
</tbody>
</table></section><div class="section level1">
<h1 id="central-tendency">Central tendency<a class="anchor" aria-label="anchor" href="#central-tendency"></a>
</h1>
<p>The easiest way to get summary statistics on data is to use the
<code>summarise</code> function from the <code>tidyverse</code>
package.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<p>In the following we are working with the <code>palmerpenguins</code>
dataset:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">palmerpenguins</span><span class="op">)</span></span></code></pre>
</div>
<p>Specifically the weight of the penguins, stored in the variable
<code>body_mass_g</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  [1] 3750 3800 3250   NA 3450 3650 3625 4675 3475 4250 3300 3700 3200 3800 4400
 [16] 3700 3450 4500 3325 4200 3400 3600 3800 3950 3800 3800 3550 3200 3150 3950
 [31] 3250 3900 3300 3900 3325 4150 3950 3550 3300 4650 3150 3900 3100 4400 3000
 [46] 4600 3425 2975 3450 4150 3500 4300 3450 4050 2900 3700 3550 3800 2850 3750
 [61] 3150 4400 3600 4050 2850 3950 3350 4100 3050 4450 3600 3900 3550 4150 3700
 [76] 4250 3700 3900 3550 4000 3200 4700 3800 4200 3350 3550 3800 3500 3950 3600
 [91] 3550 4300 3400 4450 3300 4300 3700 4350 2900 4100 3725 4725 3075 4250 2925
[106] 3550 3750 3900 3175 4775 3825 4600 3200 4275 3900 4075 2900 3775 3350 3325
[121] 3150 3500 3450 3875 3050 4000 3275 4300 3050 4000 3325 3500 3500 4475 3425
[136] 3900 3175 3975 3400 4250 3400 3475 3050 3725 3000 3650 4250 3475 3450 3750
[151] 3700 4000 4500 5700 4450 5700 5400 4550 4800 5200 4400 5150 4650 5550 4650
[166] 5850 4200 5850 4150 6300 4800 5350 5700 5000 4400 5050 5000 5100 4100 5650
[181] 4600 5550 5250 4700 5050 6050 5150 5400 4950 5250 4350 5350 3950 5700 4300
[196] 4750 5550 4900 4200 5400 5100 5300 4850 5300 4400 5000 4900 5050 4300 5000
[211] 4450 5550 4200 5300 4400 5650 4700 5700 4650 5800 4700 5550 4750 5000 5100
[226] 5200 4700 5800 4600 6000 4750 5950 4625 5450 4725 5350 4750 5600 4600 5300
[241] 4875 5550 4950 5400 4750 5650 4850 5200 4925 4875 4625 5250 4850 5600 4975
[256] 5500 4725 5500 4700 5500 4575 5500 5000 5950 4650 5500 4375 5850 4875 6000
[271] 4925   NA 4850 5750 5200 5400 3500 3900 3650 3525 3725 3950 3250 3750 4150
[286] 3700 3800 3775 3700 4050 3575 4050 3300 3700 3450 4400 3600 3400 2900 3800
[301] 3300 4150 3400 3800 3700 4550 3200 4300 3350 4100 3600 3900 3850 4800 2700
[316] 4500 3950 3650 3550 3500 3675 4450 3400 4300 3250 3675 3325 3950 3600 4050
[331] 3350 3450 3250 4050 3800 3525 3950 3650 3650 4000 3400 3775 4100 3775</code></pre>
</div>
<p>How can we describe these values?</p>
<div class="section level2">
<h2 id="mean">Mean<a class="anchor" aria-label="anchor" href="#mean"></a>
</h2>
<p>The mean is the average of all datapoints. We add all values
(excluding the missing values encoded with <code>NA</code>), and divide
with the number of observations:</p>
<p><span class="math display">\[\overline{x} = \frac{1}{N}\sum_1^N
x_i\]</span> Where N is the number of observations, and <span class="math inline">\(x_i\)</span> is the individual observations in the
sample <span class="math inline">\(x\)</span>.</p>
<p>The easiest way of getting the mean is using the <code>mean()</code>
function:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4201.754</code></pre>
</div>
<p>A slightly more cumbersome way is using the summarise function from
<code>tidyverse</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>avg_mass <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
  avg_mass
     &lt;dbl&gt;
1    4202.</code></pre>
</div>
<p>The advantage will be clear below.</p>
<p>Barring significant outliers, <code>mean</code> is an expression of
position of the data. This is the weight we would expect a random
penguin in our dataset to have.</p>
<p>However, we have three different species of penguins in the dataset,
and they have quite different average weights. There is also a
significant difference in the average weight for the two sexes.</p>
<p>We will get to that at the end of this segment.</p>
</div>
<div class="section level2">
<h2 id="median">Median<a class="anchor" aria-label="anchor" href="#median"></a>
</h2>
<p>Similarly to the average/mean, the <code>median</code> is an
expression of the location of the data. If we order our data by size,
from the smallest to the largest value, and locate the middle
observation, we get the median. This is the value that half of the
observations is smaller than. And half the observations is larger.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>median <span class="op">=</span> <span class="fu">median</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
  median
   &lt;dbl&gt;
1   4050</code></pre>
</div>
<p>We can note that the mean is larger that the median. This indicates
that the data is skewed, in this case toward the larger penguins.</p>
<p>We can get both <code>median</code> and <code>mean</code> in one
go:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>median <span class="op">=</span> <span class="fu">median</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            mean   <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  median  mean
   &lt;dbl&gt; &lt;dbl&gt;
1   4050 4202.</code></pre>
</div>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor2" aria-labelledby="headingInstructor2">
<div class="accordion-body">
<p>This illustrates for the learners that we can calculate more than one
summary statistics in one summarise function.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="mode">Mode<a class="anchor" aria-label="anchor" href="#mode"></a>
</h2>
<p>Mode is the most common, or frequently occurring, observation. R does
not have a build-in function for this, but we can easily find the mode
by counting the different observations,and locating the most common
one.</p>
<p>We typically do not use this for continous variables. The mode of the
<code>sex</code> variable in this dataset can be found like this:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 2
  sex        n
  &lt;fct&gt;  &lt;int&gt;
1 male     168
2 female   165
3 &lt;NA&gt;      11</code></pre>
</div>
<p>We count the different values in the <code>sex</code> variable, and
arrange the counts in descending order (<code>desc</code>). The mode of
the <code>sex</code> variable is male.</p>
<p>In this specific case, we note that the dataset is pretty evenly
balanced regarding the two sexes.</p>
</div>
</div>
<div class="section level1">
<h1 id="measures-of-variance">Measures of variance<a class="anchor" aria-label="anchor" href="#measures-of-variance"></a>
</h1>
<p>Knowing where the observations are located is interesting. But how do
they vary? How can we describe the variation in the data?</p>
<div class="section level2">
<h2 id="range">Range<a class="anchor" aria-label="anchor" href="#range"></a>
</h2>
<p>The simplest information about the variation is the range. What is
the smallest and what is the largest value? The <code>range()</code>
function can find it.</p>
<p>Since this returns more than one value, we use the function reframe
instead of summarise:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">reframe</span><span class="op">(</span>range <span class="op">=</span> <span class="fu">range</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 2 × 1
  range
  &lt;int&gt;
1  2700
2  6300</code></pre>
</div>
<p>However it is typically more usefull to extract the two values to
separate columns in the output:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>min <span class="op">=</span> <span class="fu">min</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            max <span class="op">=</span> <span class="fu">max</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
    min   max
  &lt;int&gt; &lt;int&gt;
1  2700  6300</code></pre>
</div>
<p>The range informs us of the spread of the observations.</p>
</div>
<div class="section level2">
<h2 id="variance">Variance<a class="anchor" aria-label="anchor" href="#variance"></a>
</h2>
<p>The observations varies. They are no all located at the mean (or
median), but are spread out on both sides of the mean. Can we get a
numerical value describing that?</p>
<p>An obvious way would be to calculate the difference between each of
the observations and the mean, and then take the average of those
differences.</p>
<p>That will give us the average deviation. But we have a problem. The
average weight of penguins was 4202 (rounded). Look at two penguins, one
weighing 5000, and another weighing 3425. The differences are:</p>
<ul>
<li>5000 - 4202 = 798</li>
<li>3425 - 4202 = -777</li>
</ul>
<p>The sum of those two differences is: -777 + 798 = 21 g. And the
average is then 10.5 gram. That is <em>not</em> a good estimate of a
variation from the mean of more than 700 gram.</p>
<p>The problem is, that the differences can be both positive and
negative, and might cancel each other out.</p>
<p>We solve that problem by squaring the differences, and calculate the
mean of those.</p>
<div id="accordionInstructor3" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor3" aria-expanded="false" aria-controls="collapseInstructor3">
  <h3 class="accordion-header" id="headingInstructor3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor3" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor3" aria-labelledby="headingInstructor3">
<div class="accordion-body">
<p>Why not just averaging the absolute values? Using the square rather
than the absolute difference, weighs the deviations so larger deviations
have relatively larger influence on the variance. Squaring results in a
continous and differentiable function, which helps in situations where
we have to do an optimisation. Also the normal distribution is defined
by the variance as defined here, and we would really like to get a
connection between what we observe here, and the normal
distribution.</p>
</div>
</div>
</div>
</div>
<p>The mathematical notation would be:</p>
<p><span class="math display">\[
\sigma^2 = \frac{\sum_{i=1}^N(x_i - \mu)^2}{N}
\]</span></p>
<p>Why are we suddenly using <span class="math inline">\(\mu\)</span>
instead of <span class="math inline">\(\overline{x}\)</span>? Because
this definition uses the population mean. The mean, or average, in the
entire population of all penguins everywhere in the universe. But we
have not weighed all those penguins.</p>
<p>Instead we will normally look at the sample variance:</p>
<p><span class="math display">\[
s^2 = \frac{\sum_{i=1}^N(x_i - \overline{x})^2}{N-1}
\]</span></p>
<p>Note that we also change the <span class="math inline">\(\sigma\)</span> to an <span class="math inline">\(s\)</span>.</p>
<p>And again we are not going to do that by hand, but will ask R to do
it for us:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>            variance <span class="op">=</span> <span class="fu">var</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
  variance
     &lt;dbl&gt;
1  643131.</code></pre>
</div>
<div id="accordionInstructor4" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor4" aria-expanded="false" aria-controls="collapseInstructor4">
  <h3 class="accordion-header" id="headingInstructor4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor4" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor4" aria-labelledby="headingInstructor4">
<div class="accordion-body">
<p>Et godt spørgsmål vil være - hvorfor dividerer vi med N-1 i stedet
for N?</p>
<p>Det kaldes for en “Bessel korrektion”. Den ene årsag til at vi gør
det er, at godt nok er gennemsnittet i stikprøven et godt estimat for
gennemsnittet i populationen. Men det er ikke præcis det samme. Når vi
dividerer med et mindre tal, får vi en større værdi for variancen - og
dermed et mere konservativt, eller forsigtigt, estimat på variansen.</p>
<p>Den anden årsag handler om frihedsgrader. Hvis vi har tre værdier og
et gennemsnit, kan vi vælge hvad de to af værdierne er, og hvad
gennemsnittet er. Helt frit. Men den tredie værdi er givet. Den kan vi
ikke vælge frit.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="standard-deviation">Standard deviation<a class="anchor" aria-label="anchor" href="#standard-deviation"></a>
</h2>
<p>There is a problem with the variance. It is 643131, completely off
scale from the actual values. There is also a problem with the unit
which is in <span class="math inline">\(g^2\)</span>.</p>
<p>A measurement of the variation of the data would be the standard
deviation, simply defined as the square root of the variance:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>            s <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
      s
  &lt;dbl&gt;
1  802.</code></pre>
</div>
<p>Since the standard deviation occurs in several statistical tests, it
is more frequently used that the variance. It is also more intuitively
relateable to the mean.</p>
</div>
<div class="section level2">
<h2 id="a-histogram">A histogram<a class="anchor" aria-label="anchor" href="#a-histogram"></a>
</h2>
<p>A visual illustration of the data can be nice. Often one of the first
we make, is a histogram.</p>
<p>A histogram is a plot or graph where we split the range of
observations in a number of “buckets”, and count the number of
observations in each bucket:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>buckets <span class="op">=</span> <span class="fu">cut</span><span class="op">(</span><span class="va">body_mass_g</span>, breaks<span class="op">=</span><span class="fu">seq</span><span class="op">(</span><span class="fl">2500</span>,<span class="fl">6500</span>,<span class="fl">500</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">group_by</span><span class="op">(</span><span class="va">buckets</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">summarise</span><span class="op">(</span>antal <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 8 × 2
  buckets         antal
  &lt;fct&gt;           &lt;int&gt;
1 (2.5e+03,3e+03]    11
2 (3e+03,3.5e+03]    67
3 (3.5e+03,4e+03]    92
4 (4e+03,4.5e+03]    57
5 (4.5e+03,5e+03]    54
6 (5e+03,5.5e+03]    33
7 (5.5e+03,6e+03]    26
8 (6e+03,6.5e+03]     2</code></pre>
</div>
<p>Typically, rather that counting ourself, we leave the work to R, and
make a histogram directly:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<figure><img src="../fig/descript-stat-rendered-unnamed-chunk-14-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>By default ggplot chooses 30 bins, typically we should chose a
different number:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_histogram</span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<figure><img src="../fig/descript-stat-rendered-unnamed-chunk-15-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Or, ideally, set the widths of them, manually:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">250</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Histogram with binwidth = 250 g"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<p><img src="../fig/descript-stat-rendered-unnamed-chunk-16-1.png" style="display: block; margin: auto;" class="figure">
Or even specify the exact intervals we want, here intervals from 0 to
6500 gram in intervals of 250 gram:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_histogram</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">6500</span>,<span class="fl">250</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Histogram with bins in 250 g steps from 0 to 6500 g"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<p><img src="../fig/descript-stat-rendered-unnamed-chunk-17-1.png" style="display: block; margin: auto;" class="figure">
The histogram provides us with a visual indication of both range, the
variation of the values, and an idea about where the data is
located.</p>
</div>
<div class="section level2">
<h2 id="quartiles">Quartiles<a class="anchor" aria-label="anchor" href="#quartiles"></a>
</h2>
<p>The median can be understood as splitting the data in two equally
sized parts, where one is characterized by having values smaller than
the median and the other as having values larger than the median. It is
the value where 50% of the observations are smaller.</p>
<p>Similary we can calculate the value where 25% of the observations are
smaller.</p>
<p>That is often called the first quartile, where the median is the 50%,
or second quartile. Quartile implies four parts, and the existence of a
third or 75% quartile.</p>
<p>We can calcultate those using the quantile function:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">quantile</span><span class="op">(</span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span>, probs <span class="op">=</span> <span class="fl">.25</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> 25%
3550 </code></pre>
</div>
<p>and</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">quantile</span><span class="op">(</span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span>, probs <span class="op">=</span> <span class="fl">.75</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> 75%
4750 </code></pre>
</div>
<div id="accordionInstructor5" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor5" aria-expanded="false" aria-controls="collapseInstructor5">
  <h3 class="accordion-header" id="headingInstructor5">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor5" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor5" aria-labelledby="headingInstructor5">
<div class="accordion-body">
<p>probs because if we select a random penguin, we have a 25% chance of
selecting a penguin that weighs less than 3550 gram. This ties in to
percentiles and qq-plots.</p>
</div>
</div>
</div>
</div>
<p>We are often interested in knowing the range in which 50% of the
observations fall.</p>
<p>That is used often enough that we have a dedicated function for
it:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>iqr <span class="op">=</span> <span class="fu">IQR</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
    iqr
  &lt;dbl&gt;
1  1200</code></pre>
</div>
<p>The name of the quantile function implies that we might have other
quantiles than quartiles. Actually we can calculate any quantile, eg the
2.5% quantile:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">quantile</span><span class="op">(</span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span>, probs <span class="op">=</span> <span class="fl">.025</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    2.5%
2988.125 </code></pre>
</div>
<p>The individual quantiles can be interesting in themselves. If we want
a visual representation of <em>all</em> quantiles, we can calculate all
of them, and plot them.</p>
<p>Instead of doing that by hand, we can use a concept called
<em>CDF</em> or cumulative density function:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CDF</span> <span class="op">&lt;-</span> <span class="fu">ecdf</span><span class="op">(</span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span><span class="op">)</span></span>
<span><span class="va">CDF</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Empirical CDF
Call: ecdf(penguins$body_mass_g)
 x[1:94] =   2700,   2850,   2900,  ...,   6050,   6300</code></pre>
</div>
<p>That was not very informative. Lets plot it:</p>
<p>[NOT QUITE DONE!]</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quantiler</span> <span class="op">&lt;-</span> <span class="fu">quantile</span><span class="op">(</span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span>, probs <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">penguins</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">stat_ecdf</span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"step"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_hline</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_vline</span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">quantiler</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/descript-stat-rendered-unnamed-chunk-23-1.png" style="display: block; margin: auto;" class="figure">
den skal vi nok have beskrevet lidt mere.</p>
<p>Men pointen er, at vi for enhver værdi kan aflæse ting. Hvor stor en
andel af pingvinerne vejer mindre end 3000 g? Vi kan finde 3000 på
x-aksen, og aflæse den matchende værdi på y-aksen.</p>
<p>Det svarer også til - hvis vi tager en tilfældig pingvin, hvad er så
sandsynligheden for at den vejer mindre end 3000 gram? Eller for at den
vejer mere end 5000 gram?</p>
</div>
<div class="section level2">
<h2 id="measures-of-shape">Measures of shape<a class="anchor" aria-label="anchor" href="#measures-of-shape"></a>
</h2>
</div>
<div class="section level2">
<h2 id="skewness">Skewness<a class="anchor" aria-label="anchor" href="#skewness"></a>
</h2>
<p>Vi bliver nok nødt til at lave et histogram…</p>
<p>We previously saw a histogram of the data, and noted that the
observations were skewed to the left, and that the “tail” on the right
was longer than on the left. That skewness can be quantised.</p>
<p>There is no function for skewness build into R, but we can get it
from the library <code>e1071</code></p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">e1071</span><span class="op">)</span></span>
<span><span class="fu">skewness</span><span class="op">(</span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.4662117</code></pre>
</div>
<p>The skewness is positive, indicating that the data are skewed to the
left, just as we saw. A negative skewness would indicate that the data
skew to the right.</p>
</div>
<div class="section level2">
<h2 id="kurtosis">Kurtosis<a class="anchor" aria-label="anchor" href="#kurtosis"></a>
</h2>
<p>Og her skal vi nok lige have styr på den intuitive forståelse af
det.</p>
</div>
<div class="section level2">
<h2 id="everything-everywhere-all-at-once">Everything Everywhere All at Once<a class="anchor" aria-label="anchor" href="#everything-everywhere-all-at-once"></a>
</h2>
<p>A lot of these descriptive values can be gotten for every variable in
the dataset using the <code>summary</code> function:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      species          island    bill_length_mm  bill_depth_mm
 Adelie   :152   Biscoe   :168   Min.   :32.10   Min.   :13.10
 Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60
 Gentoo   :124   Torgersen: 52   Median :44.45   Median :17.30
                                 Mean   :43.92   Mean   :17.15
                                 3rd Qu.:48.50   3rd Qu.:18.70
                                 Max.   :59.60   Max.   :21.50
                                 NA's   :2       NA's   :2
 flipper_length_mm  body_mass_g       sex           year
 Min.   :172.0     Min.   :2700   female:165   Min.   :2007
 1st Qu.:190.0     1st Qu.:3550   male  :168   1st Qu.:2007
 Median :197.0     Median :4050   NA's  : 11   Median :2008
 Mean   :200.9     Mean   :4202                Mean   :2008
 3rd Qu.:213.0     3rd Qu.:4750                3rd Qu.:2009
 Max.   :231.0     Max.   :6300                Max.   :2009
 NA's   :2         NA's   :2                                 </code></pre>
</div>
<p>Here we get the range, the 1st and 3rd quantiles (and from those the
IQR), the median and the mean and, rather useful, the number of missing
values in each variable.</p>
<p>We can also get all the descriptive values in one table, by adding
more than one summarizing function to the summarise function:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>min <span class="op">=</span> <span class="fu">min</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            max <span class="op">=</span> <span class="fu">max</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            mean <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            median <span class="op">=</span> <span class="fu">median</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            stddev <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            var <span class="op">=</span> <span class="fu">var</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            Q1 <span class="op">=</span> <span class="fu">quantile</span><span class="op">(</span><span class="va">body_mass_g</span>, probs <span class="op">=</span> <span class="fl">.25</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            Q3 <span class="op">=</span> <span class="fu">quantile</span><span class="op">(</span><span class="va">body_mass_g</span>, probs <span class="op">=</span> <span class="fl">.75</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            iqr <span class="op">=</span> <span class="fu">IQR</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            skew <span class="op">=</span> <span class="fu">skewness</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            kurtosis <span class="op">=</span> <span class="fu">kurtosis</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 11
    min   max  mean median stddev     var    Q1    Q3   iqr  skew kurtosis
  &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1  2700  6300 4202.   4050   802. 643131.  3550  4750  1200 0.466   -0.740</code></pre>
</div>
<p>As noted, we have three different species of penguins in the dataset.
Their weight varies a lot. If we want to do the summarising on each for
the species, we can group the data by species, before summarising:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>min <span class="op">=</span> <span class="fu">min</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            max <span class="op">=</span> <span class="fu">max</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            mean <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            median <span class="op">=</span> <span class="fu">median</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>            stddev <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 6
  species     min   max  mean median stddev
  &lt;fct&gt;     &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 Adelie     2850  4775 3701.   3700   459.
2 Chinstrap  2700  4800 3733.   3700   384.
3 Gentoo     3950  6300 5076.   5000   504.</code></pre>
</div>
<p>We have removed some summary statistics in order to get a smaller
table.</p>
</div>
<div class="section level2">
<h2 id="boxplots">Boxplots<a class="anchor" aria-label="anchor" href="#boxplots"></a>
</h2>
<p>Finally boxplots offers a way of visualising some of the summary
statistics:</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">body_mass_g</span>, y <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<figure><img src="../fig/descript-stat-rendered-unnamed-chunk-28-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The boxplot shows us the median (the fat line in the middel of each
box), the 1st and 3rd quartiles (the ends of the boxes), and the range,
with the whiskers at each end of the boxes, illustrating the minimum and
maximum. Any observations, more than 1.5 times the IQR from either the
1st or 3rd quartiles, are deemed as outliers and would be plotted as
individual points in the plot.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Nogen statisktiske pointer om det her</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div></section><section id="aio-table1"><p>Content from <a href="table1.html">Table One</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/table1.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you make a Table One?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what a Table One is</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-a-table-one">What is a “Table One”?<a class="anchor" aria-label="anchor" href="#what-is-a-table-one"></a>
<a class="anchor" aria-label="anchor" href="#what-is-a-table-one"></a>
</h2>
<hr class="half-width">
<p>Primarily used in medical and epidemiological research, a Table One
is typically the first table in any publication using data.</p>
<p>It presents the baseline characteristics of the participants in a
study, and provides a concise overview of the relevant demographic and
clinical variables.</p>
<p>It typically compares different groups (male~female,
treatment~control), to highlight similarities and differences.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Attaching package: 'table1'</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The following objects are masked from 'package:base':

    units, units&lt;-</code></pre>
</div>
It can look like this: <!--html_preserve-->
<div class="Rtable1">
<table class="table Rtable1">
<thead><tr>
<th class="rowlabel firstrow lastrow">
</th>
<th class="firstrow lastrow">
<span class="stratlabel">Treated<br><span class="stratn">(N=20)</span></span>
</th>
<th class="firstrow lastrow">
<span class="stratlabel">Placebo<br><span class="stratn">(N=20)</span></span>
</th>
<th class="firstrow lastrow">
<span class="stratlabel">Overall<br><span class="stratn">(N=40)</span></span>
</th>
</tr></thead>
<tbody>
<tr>
<td class="rowlabel firstrow">
Sex
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
</tr>
<tr>
<td class="rowlabel">
Male
</td>
<td>
10 (50.0%)
</td>
<td>
10 (50.0%)
</td>
<td>
20 (50.0%)
</td>
</tr>
<tr>
<td class="rowlabel lastrow">
Female
</td>
<td class="lastrow">
10 (50.0%)
</td>
<td class="lastrow">
10 (50.0%)
</td>
<td class="lastrow">
20 (50.0%)
</td>
</tr>
<tr>
<td class="rowlabel firstrow">
Age (years)
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
</tr>
<tr>
<td class="rowlabel">
Mean (SD)
</td>
<td>
31.1 (11.2)
</td>
<td>
31.5 (10.6)
</td>
<td>
31.3 (10.7)
</td>
</tr>
<tr>
<td class="rowlabel">
Median [Min, Max]
</td>
<td>
31.5 [12.7, 49.0]
</td>
<td>
31.8 [12.5, 46.7]
</td>
<td>
31.5 [12.5, 49.0]
</td>
</tr>
<tr>
<td class="rowlabel lastrow">
Missing
</td>
<td class="lastrow">
1 (5.0%)
</td>
<td class="lastrow">
0 (0%)
</td>
<td class="lastrow">
1 (2.5%)
</td>
</tr>
<tr>
<td class="rowlabel firstrow">
Weight (kg)
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
</tr>
<tr>
<td class="rowlabel">
Mean (SD)
</td>
<td>
73.8 (14.7)
</td>
<td>
68.9 (16.9)
</td>
<td>
71.3 (15.8)
</td>
</tr>
<tr>
<td class="rowlabel lastrow">
Median [Min, Max]
</td>
<td class="lastrow">
72.8 [54.5, 101]
</td>
<td class="lastrow">
66.5 [45.1, 110]
</td>
<td class="lastrow">
70.3 [45.1, 110]
</td>
</tr>
</tbody>
</table>
</div>
<!--/html_preserve-->
<p>We have 40 participants in a study, split into equal control and
treatment groups, and describe the distribution of Sex, Age and Weight
in both the two groups, and overall.</p>
<p>A number of packages making it easy to make a Table One exists. Here
we look at the package <code>table1</code>.</p>
<p>The specific way of doing it depends on the data available. If we do
not have data on the weight of the participants, we are not able to
describe the distribution of their weight.</p>
<p>But the table above was made in this way:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">table1</span><span class="op">)</span></span>
<span><span class="fu">table1</span><span class="op">(</span><span class="op">~</span><span class="va">sex</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">weight</span><span class="op">|</span><span class="va">treatment</span>, data <span class="op">=</span> <span class="va">dat</span><span class="op">)</span></span></code></pre>
</div>
<p>We specify that we would like a table that is a function of
<code>sex</code>, <code>age</code> and <code>wt</code>, and we would
like it split into groups based on the values in the
<code>treatment</code></p>
<p>It might be instructive to take a look at how the data was prepared.
First the data it self:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">expand.grid</span><span class="op">(</span>id<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, sex<span class="op">=</span><span class="fu">c</span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span>, treatment<span class="op">=</span><span class="fu">c</span><span class="op">(</span><span class="st">"Treated"</span>, <span class="st">"Placebo"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu">runif</span><span class="op">(</span><span class="fu">nrow</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>, <span class="fl">10</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">age</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>  <span class="co"># Add a missing value</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="fu">exp</span><span class="op">(</span><span class="fu">rnorm</span><span class="op">(</span><span class="fu">nrow</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>, <span class="fu">log</span><span class="op">(</span><span class="fl">70</span><span class="op">)</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>The interesting part occurs here, where we add labels to the data.
That allows us to control the headings in the table:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">label</span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Sex"</span></span>
<span><span class="fu">label</span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">age</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Age"</span></span>
<span><span class="fu">label</span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">treatment</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Treatment Group"</span></span>
<span><span class="fu">label</span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Weight"</span></span></code></pre>
</div>
<p>It can be beneficial to add information about units of the data:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">units</span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">age</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"years"</span></span>
<span><span class="fu">units</span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"kg"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="more-advanced-stuff">More advanced stuff<a class="anchor" aria-label="anchor" href="#more-advanced-stuff"></a>
<a class="anchor" aria-label="anchor" href="#more-advanced-stuff"></a>
</h2>
<hr class="half-width">
<p>FLYTTES TIL SEPARAT SIDE?</p>
<p>We might want to be able to precisely control the summary statistics
presented in the table.</p>
<p>We can do that by specifying input to the arguments
<code>render.continuous</code> and <code>render.categorical</code> that
control how continuous and categorical data respecetively, is shown in
the table.</p>
<p>The simple way of doing that is by using abbrevieated function
names:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table1</span><span class="op">(</span><span class="op">~</span><span class="va">sex</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">weight</span><span class="op">|</span><span class="va">treatment</span>, data <span class="op">=</span> <span class="va">dat</span>,</span>
<span>        render.continuous<span class="op">=</span><span class="fu">c</span><span class="op">(</span>.<span class="op">=</span><span class="st">"Mean (SD%)"</span>, .<span class="op">=</span><span class="st">"Median [Min, Max]"</span>,</span>
<span>                           <span class="st">"Geom. mean (Geo. SD%)"</span><span class="op">=</span><span class="st">"GMEAN (GSD%)"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<!--html_preserve-->
<div class="Rtable1">
<table class="table Rtable1">
<thead><tr>
<th class="rowlabel firstrow lastrow">
</th>
<th class="firstrow lastrow">
<span class="stratlabel">Treated<br><span class="stratn">(N=20)</span></span>
</th>
<th class="firstrow lastrow">
<span class="stratlabel">Placebo<br><span class="stratn">(N=20)</span></span>
</th>
<th class="firstrow lastrow">
<span class="stratlabel">Overall<br><span class="stratn">(N=40)</span></span>
</th>
</tr></thead>
<tbody>
<tr>
<td class="rowlabel firstrow">
Sex
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
</tr>
<tr>
<td class="rowlabel">
Male
</td>
<td>
10 (50.0%)
</td>
<td>
10 (50.0%)
</td>
<td>
20 (50.0%)
</td>
</tr>
<tr>
<td class="rowlabel lastrow">
Female
</td>
<td class="lastrow">
10 (50.0%)
</td>
<td class="lastrow">
10 (50.0%)
</td>
<td class="lastrow">
20 (50.0%)
</td>
</tr>
<tr>
<td class="rowlabel firstrow">
Age (years)
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
</tr>
<tr>
<td class="rowlabel">
Mean (SD%)
</td>
<td>
31.1 (11.2%)
</td>
<td>
31.5 (10.6%)
</td>
<td>
31.3 (10.7%)
</td>
</tr>
<tr>
<td class="rowlabel">
Median [Min, Max]
</td>
<td>
31.5 [12.7, 49.0]
</td>
<td>
31.8 [12.5, 46.7]
</td>
<td>
31.5 [12.5, 49.0]
</td>
</tr>
<tr>
<td class="rowlabel">
Geom. mean (Geo. SD%)
</td>
<td>
28.9 (1.50%)
</td>
<td>
29.5 (1.47%)
</td>
<td>
29.3 (1.48%)
</td>
</tr>
<tr>
<td class="rowlabel lastrow">
Missing
</td>
<td class="lastrow">
1 (5.0%)
</td>
<td class="lastrow">
0 (0%)
</td>
<td class="lastrow">
1 (2.5%)
</td>
</tr>
<tr>
<td class="rowlabel firstrow">
Weight (kg)
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
</tr>
<tr>
<td class="rowlabel">
Mean (SD%)
</td>
<td>
73.8 (14.7%)
</td>
<td>
68.9 (16.9%)
</td>
<td>
71.3 (15.8%)
</td>
</tr>
<tr>
<td class="rowlabel">
Median [Min, Max]
</td>
<td>
72.8 [54.5, 101]
</td>
<td>
66.5 [45.1, 110]
</td>
<td>
70.3 [45.1, 110]
</td>
</tr>
<tr>
<td class="rowlabel lastrow">
Geom. mean (Geo. SD%)
</td>
<td class="lastrow">
72.4 (1.22%)
</td>
<td class="lastrow">
67.1 (1.26%)
</td>
<td class="lastrow">
69.7 (1.24%)
</td>
</tr>
</tbody>
</table>
</div>
<!--/html_preserve-->
<p><code>table1</code> recognizes the following summary statisticis: N,
NMISS, MEAN, SD, CV, GMEAN, GCV, MEDIAN, MIN, MAX, IQR, Q1, Q2, Q3, T1,
T2, FREQ, PCT</p>
<p>Details can be found in the help to the function
<code>stats.default()</code></p>
<p>Note that they are case-insensitive, and we can write Median or
mediAn instead of median.</p>
<p>Also note that we write <code>.="Mean (SD%)"</code> which will be
recognized as the functions <code>mean()</code> and <code>sd()</code>,
but also that the label shown should be “Mean (SD%)”.</p>
<p>If we want to specify the label, we can write
<code>"Geom. mean (Geo. SD%)"="GMEAN (GSD%)"</code></p>
<p>ØVELSE - ÆNDRE PÅ LABEL ETC.</p>
</section><section><h2 class="section-heading" id="very-advanced-stuff">Very advanced stuff<a class="anchor" aria-label="anchor" href="#very-advanced-stuff"></a>
<a class="anchor" aria-label="anchor" href="#very-advanced-stuff"></a>
</h2>
<hr class="half-width">
<p>If we want to specify the summary statistics very precisely, we have
to define a function ourself:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_summary</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu">c</span><span class="op">(</span><span class="st">""</span>,<span class="st">"Median"</span> <span class="op">=</span> <span class="fu">sprintf</span><span class="op">(</span><span class="st">"%.3f"</span>, <span class="fu">median</span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span><span class="st">"Variance"</span> <span class="op">=</span> <span class="fu">sprintf</span><span class="op">(</span><span class="st">"%.1f"</span>, <span class="fu">var</span><span class="op">(</span><span class="va">x</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">table1</span><span class="op">(</span><span class="op">~</span><span class="va">sex</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">weight</span><span class="op">|</span><span class="va">treatment</span>, data <span class="op">=</span> <span class="va">dat</span>,</span>
<span>render.continuous <span class="op">=</span> <span class="va">my_summary</span><span class="op">)</span></span></code></pre>
</div>
<!--html_preserve-->
<div class="Rtable1">
<table class="table Rtable1">
<thead><tr>
<th class="rowlabel firstrow lastrow">
</th>
<th class="firstrow lastrow">
<span class="stratlabel">Treated<br><span class="stratn">(N=20)</span></span>
</th>
<th class="firstrow lastrow">
<span class="stratlabel">Placebo<br><span class="stratn">(N=20)</span></span>
</th>
<th class="firstrow lastrow">
<span class="stratlabel">Overall<br><span class="stratn">(N=40)</span></span>
</th>
</tr></thead>
<tbody>
<tr>
<td class="rowlabel firstrow">
Sex
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
</tr>
<tr>
<td class="rowlabel">
Male
</td>
<td>
10 (50.0%)
</td>
<td>
10 (50.0%)
</td>
<td>
20 (50.0%)
</td>
</tr>
<tr>
<td class="rowlabel lastrow">
Female
</td>
<td class="lastrow">
10 (50.0%)
</td>
<td class="lastrow">
10 (50.0%)
</td>
<td class="lastrow">
20 (50.0%)
</td>
</tr>
<tr>
<td class="rowlabel firstrow">
Age (years)
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
</tr>
<tr>
<td class="rowlabel">
Median
</td>
<td>
31.524
</td>
<td>
31.769
</td>
<td>
31.524
</td>
</tr>
<tr>
<td class="rowlabel">
Variance
</td>
<td>
125.2
</td>
<td>
111.7
</td>
<td>
115.2
</td>
</tr>
<tr>
<td class="rowlabel lastrow">
Missing
</td>
<td class="lastrow">
1 (5.0%)
</td>
<td class="lastrow">
0 (0%)
</td>
<td class="lastrow">
1 (2.5%)
</td>
</tr>
<tr>
<td class="rowlabel firstrow">
Weight (kg)
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
<td class="firstrow">
</td>
</tr>
<tr>
<td class="rowlabel">
Median
</td>
<td>
72.847
</td>
<td>
66.455
</td>
<td>
70.337
</td>
</tr>
<tr>
<td class="rowlabel lastrow">
Variance
</td>
<td class="lastrow">
214.8
</td>
<td class="lastrow">
286.3
</td>
<td class="lastrow">
250.2
</td>
</tr>
</tbody>
</table>
</div>
<!--/html_preserve-->
<p>We do not <em>need</em> to use the <code>sprintf()</code> function,
but it is a very neat way of combining text with numeric variables.</p>
<p>ØVELSE - HVAD MON .3f GØR?</p>
<p>What we absolutely need to do is adding the empty string in the
beginning.</p>
<p>ØVELSE - HVAD SKER DER HVIS MAN LADER VÆRE?</p>
<p>Summary statistics for categorical data can be adjusted similarly, by
specifying <code>render.categorical</code>.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Primarily of use if there are medical students on the course</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-tidy-data"><p>Content from <a href="tidy-data.html">Tidy Data</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/tidy-data.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what tidy data is</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Most of what we want to do with our data is relatively simple.
<em>If</em> the data is structured in the right way.</p>
<p>Working within the paradigm of <code>tidyverse</code> it is
preferable if the data is <em>tidy</em>.</p>
<p><img src="../fig/tidy_why.jpg" alt="test" class="figure">{“Illustrations from the
Openscapes blog Tidy Data for reproducibility, efficiency, and
collaboration by Julia Lowndes and Allison Horst”}</p>
<p>Tidy data is not the opposite of messy data. Data can be nice and
well structured, tidy as in non-messy, without being tidy in the way we
understand it in this context.</p>
<p><img src="../fig/tidy_hadley_2.jpg" alt="test2" class="figure">{“Illustrations from
the Openscapes blog Tidy Data for reproducibility, efficiency, and
collaboration by Julia Lowndes and Allison Horst”}</p>
<p>Tidy data in the world of R, especially the dialect of R we call
tidyverse, are characterized by:</p>
<ul>
<li>Each variable is a column; each column is a variable.</li>
<li>Each observation is a row; each row is an observation.</li>
<li>Each value is a cell; each cell is a single value.</li>
</ul>
<p><img src="../fig/tidy_hadley.jpg" alt="ter" class="figure">{“Illustrations from the
Openscapes blog Tidy Data for reproducibility, efficiency, and
collaboration by Julia Lowndes and Allison Horst”}</p>
<p>This way of structuring our data is useful not only in R, but also in
other software packages.</p>
</section><section><h2 class="section-heading" id="dos-and-donts-in-excel">Do’s and dont’s in Excel<a class="anchor" aria-label="anchor" href="#dos-and-donts-in-excel"></a>
<a class="anchor" aria-label="anchor" href="#dos-and-donts-in-excel"></a>
</h2>
<hr class="half-width">
<p>Excel is a very useful tool, especially for collecting data.</p>
<p>But even though we are able to do everything we can do in R, in
Excel, we will normally do the main part of our work with data in R.</p>
<p>It is therefor a very good idea to think about how we collect and
organise the data in Excel, to make our life easier later on.</p>
<p>We have collected some good rules of thumb for structuring data in
Excel, based on time-consuming and traumatic experiences wrangling data
from Excel to R.</p>
<p><strong>Always</strong> * Use one column for one variable * Use one
row for one observation * Use one cell for one value * Begin your data
in the upper left corner (cell A1) * Use one sheet for each type of
data</p>
<p><strong>Never (EVER!)</strong> * Modify your raw data - always make a
copy before making any change * Merge cells * Use colors for
information</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>tidy data provides a consistent way of organizing data</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-datamanipulation"><p>Content from <a href="datamanipulation.html">Elementary Datamanipulation</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/datamanipulation.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I manipulate the data to have a specific shape?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Og det er elementær fordi det er de grundlæggende elementer. Så måske
et andet ord? det er elementary som i “periodic table of the
elements”.</p>
<p>Konceptet er at vi kan manipulere, opsummere og transformere data.
filter(): Filtrerer rækker baseret på betingelser. select(): Vælger
specifikke kolonner. mutate(): Tilføjer nye kolonner eller ændrer
eksisterende. group_by() summarise(): Opsummerer data med aggregerede
funktioner. arrange(): Sorterer rækker. join(): Kombinerer flere
datasæt.</p>
</section><section><h2 class="section-heading" id="pipen">pipen<a class="anchor" aria-label="anchor" href="#pipen"></a>
<a class="anchor" aria-label="anchor" href="#pipen"></a>
</h2>
<hr class="half-width">
<p>Vi taler tidy-dialekten her. Så pipen er vigtig. Vi bruger magrittr
pipen, som kan håndtere mere komplekse operationer, og som stadig er
meget udbredt når vi finder hjælp på nettet.</p>
<p>Der findes også den native pipe |&gt; som undertiden vil være
hurtigere.</p>
</section><section><h2 class="section-heading" id="dplyr">dplyr<a class="anchor" aria-label="anchor" href="#dplyr"></a>
<a class="anchor" aria-label="anchor" href="#dplyr"></a>
</h2>
<hr class="half-width">
<p>A collection of functions used for changing and filtering rows and
columns.</p>
<p>Det er de basale funktioner, som vi tager i brug når vi har en pæn og
tidy dataframe.</p>
</section><section><h2 class="section-heading" id="select">select<a class="anchor" aria-label="anchor" href="#select"></a>
<a class="anchor" aria-label="anchor" href="#select"></a>
</h2>
<hr class="half-width">
<p>Used for selecting individual variables - otherwise known as columns.
Here we are selecting the columns <code>species</code> and
<code>island</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">species</span>, <span class="va">island</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 344 × 2
   species island
   &lt;fct&gt;   &lt;fct&gt;
 1 Adelie  Torgersen
 2 Adelie  Torgersen
 3 Adelie  Torgersen
 4 Adelie  Torgersen
 5 Adelie  Torgersen
 6 Adelie  Torgersen
 7 Adelie  Torgersen
 8 Adelie  Torgersen
 9 Adelie  Torgersen
10 Adelie  Torgersen
# ℹ 334 more rows</code></pre>
</div>
<p>For most purposes select is used for paring down the data to
something that is easier to grasp. Having 50 columns can be confusing,
especially if we are only interested in two.</p>
<p>Rather than specifying which columns we are interested in, we can
specify which columns we are <em>not</em> interested in:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="fu">c</span><span class="op">(</span><span class="va">bill_length_mm</span>, <span class="va">bill_depth_mm</span>, <span class="va">year</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 344 × 5
   species island    flipper_length_mm body_mass_g sex
   &lt;fct&gt;   &lt;fct&gt;                 &lt;int&gt;       &lt;int&gt; &lt;fct&gt;
 1 Adelie  Torgersen               181        3750 male
 2 Adelie  Torgersen               186        3800 female
 3 Adelie  Torgersen               195        3250 female
 4 Adelie  Torgersen                NA          NA &lt;NA&gt;
 5 Adelie  Torgersen               193        3450 female
 6 Adelie  Torgersen               190        3650 male
 7 Adelie  Torgersen               181        3625 female
 8 Adelie  Torgersen               195        4675 male
 9 Adelie  Torgersen               193        3475 &lt;NA&gt;
10 Adelie  Torgersen               190        4250 &lt;NA&gt;
# ℹ 334 more rows</code></pre>
</div>
<p>Collecting the uninteresting columns in a vector, and placing a
<code>-</code> in front, we can de-select the specified columns. In this
case it is easier to specify three columns we are not interested in,
than specifying the six columns that we <em>are</em> interested in.</p>
<p>A range of functions for selecting columns exists:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"bill"</span><span class="op">)</span>, <span class="va">year</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 344 × 6
   species island    flipper_length_mm body_mass_g sex     year
   &lt;fct&gt;   &lt;fct&gt;                 &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;
 1 Adelie  Torgersen               181        3750 male    2007
 2 Adelie  Torgersen               186        3800 female  2007
 3 Adelie  Torgersen               195        3250 female  2007
 4 Adelie  Torgersen                NA          NA &lt;NA&gt;    2007
 5 Adelie  Torgersen               193        3450 female  2007
 6 Adelie  Torgersen               190        3650 male    2007
 7 Adelie  Torgersen               181        3625 female  2007
 8 Adelie  Torgersen               195        4675 male    2007
 9 Adelie  Torgersen               193        3475 &lt;NA&gt;    2007
10 Adelie  Torgersen               190        4250 &lt;NA&gt;    2007
# ℹ 334 more rows</code></pre>
</div>
<p>Most can be found in the help for the package
<code>tidyselect</code>.</p>
<p>A special way of specifying columns is the <code>:</code>
notation:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">species</span><span class="op">:</span><span class="va">bill_depth_mm</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 344 × 4
   species island    bill_length_mm bill_depth_mm
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;
 1 Adelie  Torgersen           39.1          18.7
 2 Adelie  Torgersen           39.5          17.4
 3 Adelie  Torgersen           40.3          18
 4 Adelie  Torgersen           NA            NA
 5 Adelie  Torgersen           36.7          19.3
 6 Adelie  Torgersen           39.3          20.6
 7 Adelie  Torgersen           38.9          17.8
 8 Adelie  Torgersen           39.2          19.6
 9 Adelie  Torgersen           34.1          18.1
10 Adelie  Torgersen           42            20.2
# ℹ 334 more rows</code></pre>
</div>
<p>It selects all columns from <code>species</code> to
<code>bill_depth_mm</code> (inclusive).</p>
</section><section><h2 class="section-heading" id="filter">filter()<a class="anchor" aria-label="anchor" href="#filter"></a>
<a class="anchor" aria-label="anchor" href="#filter"></a>
</h2>
<hr class="half-width">
<p>The filter() function filters data, that is returns only the rows
that conform to one or more criteria:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Adelie"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 152 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 142 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
<p>The arguments given to filter are predicate functions, functions
returning either TRUE or FALSE. The expression
<code>species == "Adelie"</code> compares the values in the column
<code>species</code> with the value <code>"Adelie"</code>, and returns
TRUE for each row where the expression is TRUE. Only the rows
corresponding to a TRUE value, are returned.</p>
<p>We are able to do a multitude of logical comparisons. Is
bill_lenght_mm larger than 40 mm? Simply enter the expression
<code>bill_length &gt; 40</code>. Does <code>species</code> begin with
an “A”? Give filter() the expression str_starts(species, “A”)</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="fu">str_starts</span><span class="op">(</span><span class="va">species</span>, <span class="st">"A"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 152 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 142 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
<p>Any expression that can return a TRUE or FALSE value can be used in a
filter(), and multiple expressions can be added:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="fu">str_starts</span><span class="op">(</span><span class="va">species</span>, <span class="st">"A"</span><span class="op">)</span>,</span>
<span>         <span class="va">bill_length_mm</span> <span class="op">&gt;</span> <span class="fl">40</span> <span class="op">|</span> <span class="va">bill_depth_mm</span> <span class="op">&lt;</span> <span class="fl">20</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 142 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           36.7          19.3               193        3450
 5 Adelie  Torgersen           38.9          17.8               181        3625
 6 Adelie  Torgersen           39.2          19.6               195        4675
 7 Adelie  Torgersen           34.1          18.1               193        3475
 8 Adelie  Torgersen           42            20.2               190        4250
 9 Adelie  Torgersen           37.8          17.1               186        3300
10 Adelie  Torgersen           37.8          17.3               180        3700
# ℹ 132 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
<p>Here we get all the rows, where species starts with an “A”,
bill_length_mm is larger than 40, and bill_depth_mm is smaller than
20.</p>
</section><section><h2 class="section-heading" id="mutate">mutate()<a class="anchor" aria-label="anchor" href="#mutate"></a>
<a class="anchor" aria-label="anchor" href="#mutate"></a>
</h2>
<hr class="half-width">
<p>The mutate() function allows us to make new columns, based on
existing columns:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">species</span>, <span class="va">bill_length_mm</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>bill_length_inch <span class="op">=</span> <span class="va">bill_length_mm</span><span class="op">*</span><span class="fl">0.0393701</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 344 × 3
   species bill_length_mm bill_length_inch
   &lt;fct&gt;            &lt;dbl&gt;            &lt;dbl&gt;
 1 Adelie            39.1             1.54
 2 Adelie            39.5             1.56
 3 Adelie            40.3             1.59
 4 Adelie            NA              NA
 5 Adelie            36.7             1.44
 6 Adelie            39.3             1.55
 7 Adelie            38.9             1.53
 8 Adelie            39.2             1.54
 9 Adelie            34.1             1.34
10 Adelie            42               1.65
# ℹ 334 more rows</code></pre>
</div>
<p>The syntax specifies the name of the new column, and what it should
be equal to. If we specify an name that already exists in the dataframe,
it will be overwritten. In that way we are able to change an existing
column, rather than making a new column.</p>
<p>By default mutate adds new columns to the end of the dataframe. A few
arguments <code>.before</code> and <code>.after</code> allows us to
specify a location of the new column.</p>
</section><section><h2 class="section-heading" id="summarise-and-group_by">summarise() and group_by()<a class="anchor" aria-label="anchor" href="#summarise-and-group_by"></a>
<a class="anchor" aria-label="anchor" href="#summarise-and-group_by"></a>
</h2>
<hr class="half-width">
<p>The summarise function allows us to summarise values in columns to a
single value:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>average_weight <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
  average_weight
           &lt;dbl&gt;
1          4202.</code></pre>
</div>
<p>Note that the result is a dataframe. We get the column with the name
that we specified, and a value calculated, here with mean(body_mass_g,
na.rm = TRUE).</p>
<p>We are able to calculate more than one summary statistic:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>average_weight <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            std_dev_weight <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  average_weight std_dev_weight
           &lt;dbl&gt;          &lt;dbl&gt;
1          4202.           802.</code></pre>
</div>
<p>Any function that can take a vector (remember that a column in a
dataframe is a vector), and return a single value, can be used,
including string-functions:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>a_whole_lot_of_islands <span class="op">=</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">island</span>, collapse  <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
  a_whole_lot_of_islands
  &lt;chr&gt;
1 TorgersenTorgersenTorgersenTorgersenTorgersenTorgersenTorgersenTorgersenTorge…</code></pre>
</div>
<p>But try to use more meaningful functions than this example…</p>
<p><code>summarise</code> combined with <code>filter</code> allows us to
calculate the mean weight of Adelie penguins:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Adelie"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>avg_weight <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
  avg_weight
       &lt;dbl&gt;
1      3701.</code></pre>
</div>
<p>If we want to do that calculation for each species of penguin, we can
group the dataframe:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>avg_weight <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 2
  species   avg_weight
  &lt;fct&gt;          &lt;dbl&gt;
1 Adelie         3701.
2 Chinstrap      3733.
3 Gentoo         5076.</code></pre>
</div>
<p><code>group_by()</code> will group the dataframe based on the values
specified, in this case “species”, and subsequent operations will then
be done on each group.</p>
<p>group_by allows us to group on more than one variable/column.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">species</span>, <span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>avg_weight <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'species'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 8 × 3
# Groups:   species [3]
  species   sex    avg_weight
  &lt;fct&gt;     &lt;fct&gt;       &lt;dbl&gt;
1 Adelie    female      3369.
2 Adelie    male        4043.
3 Adelie    &lt;NA&gt;        3540
4 Chinstrap female      3527.
5 Chinstrap male        3939.
6 Gentoo    female      4680.
7 Gentoo    male        5485.
8 Gentoo    &lt;NA&gt;        4588.</code></pre>
</div>
<p>Note that the tibble (synonymous with dataframe) returned by
summarise, is a grouped dataframe, grouped by “species”. Summarise
always removes the last level of grouping.</p>
<p>If we do further operations on this dataframe, they will be done on a
grouped dataframe. We should therefore <em>always</em> add an “ungroup”
function to our pipe:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">species</span>, <span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>avg_weight <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'species'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 8 × 3
  species   sex    avg_weight
  &lt;fct&gt;     &lt;fct&gt;       &lt;dbl&gt;
1 Adelie    female      3369.
2 Adelie    male        4043.
3 Adelie    &lt;NA&gt;        3540
4 Chinstrap female      3527.
5 Chinstrap male        3939.
6 Gentoo    female      4680.
7 Gentoo    male        5485.
8 Gentoo    &lt;NA&gt;        4588.</code></pre>
</div>
<p>Doing that assures that subsequent operations happens on an ungrouped
dataframe.</p>
</section><section><h2 class="section-heading" id="arrange">arrange()<a class="anchor" aria-label="anchor" href="#arrange"></a>
<a class="anchor" aria-label="anchor" href="#arrange"></a>
</h2>
<hr class="half-width">
<p>Finally - primarily for presentation purposes, we might want to sort
a dataframe.</p>
<p>We do that using the <code>arrange()</code> function:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">species</span>, <span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>avg_weight <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">avg_weight</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'species'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 8 × 3
  species   sex    avg_weight
  &lt;fct&gt;     &lt;fct&gt;       &lt;dbl&gt;
1 Adelie    female      3369.
2 Chinstrap female      3527.
3 Adelie    &lt;NA&gt;        3540
4 Chinstrap male        3939.
5 Adelie    male        4043.
6 Gentoo    &lt;NA&gt;        4588.
7 Gentoo    female      4680.
8 Gentoo    male        5485.</code></pre>
</div>
<p>We can sort on more than one column/variable, and by default
<code>arrange()</code> sort in ascending order. If we want to sort in
descending order, we would write:</p>
<p><code>arrange(desc(avg_weight))</code> using the
<code>desc()</code>-helper function.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-datamanipulation-advanced"><p>Content from <a href="datamanipulation-advanced.html">Advanced dplyr</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/datamanipulation-advanced.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>scoped dplyr-funktioner som jo så er pick og across - fordi vi
faktisk ikke har scoped verbs længere.</p>
<p>Så reelt de to - i kombi med mutate, filter, select etc.</p>
<p>Og hvad vi ellers har af mere komplekse dplyr funktioner.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-datatidying"><p>Content from <a href="datatidying.html">tidyr</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/datatidying.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>pivotering. pivot_longer pivot_wider replace_na Det der skal til for
at gøre ting tidy.</p>
<p>unite separate - der er superseeded. Og bør erstattes med de to nye.
nesting - måske til en Avanceret? Både nest og unnest fill drop_na</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>tidyr<span class="sc">::</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: &lt;text&gt;:2:0: unexpected end of line
1: tidyr::
   ^</code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-normal-distribution"><p>Content from <a href="normal-distribution.html">The normal distribution</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/normal-distribution.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="the-normal-distribution">The Normal Distribution<a class="anchor" aria-label="anchor" href="#the-normal-distribution"></a>
<a class="anchor" aria-label="anchor" href="#the-normal-distribution"></a>
</h2>
<hr class="half-width">
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>Inline instructor notes can help inform instructors of timing
challenges associated with the lessons. They appear in the “Instructor
View”</p>
</div>
</div>
</div>
</div>
<p>The normal distribution follows this formula:</p>
<p><span class="math display">\[
f(x) = \frac{1}{\sqrt{2\pi\sigma^2}} e^{-\frac{(x-\mu)^2}{2\sigma^2}}
\]</span></p>
<p>It returns the probability density for a given x, population mean and
population standard deviation. We can see that it is the “true” mean and
standard deviation for the entire population, basically for the
<em>entire</em> universe, because they are written using greek
letters.</p>
<p>We are often working with the standardized normal distribution, where
mean is 0 and the standard deviation is 1.</p>
<p>If we plot that, it looks like this:</p>
<p><img src="../fig/The_Normal_Distribution.svg" alt="The Normal Distribution." class="figure"> The area under the curve is 1,
equivalent to 100%.</p>
<p>The normal distribution have a lot of nice mathematical properties,
some of which are indicated on the graph.</p>
<p>CDF-plottet - så vi har forbindelsen til den deskriptive
statistik.</p>
<p>Konceptet med - hvad er sandsynligheden for at se en observation der
ligger x standardafvigelser fra middelværdien.</p>
<p>This allows us to calculate the probability of finding a certain
value in the data, if the data is normally distributed, if we know the
mean and the standard deviation.</p>
<p>R provides us with a set of functions:</p>
<p>pnorm the probability of having a smaller value than. qnorm the value
corresponding to a given probability dnorm the probability density of
the norma distribution at a given x.</p>
<p>Og det er for den standardiserede normalfordeling N(0,1)</p>
<p>De har mulighed for at returnere værdier for en hvilken som helst
normalfordeling med arbitrære middelværdi og standardafvigelse.</p>
<p>An example:</p>
<p>If the height of men are normally distributed, with a mean (mu) = 183
cm, and a standarddeviation of 9.7 cm. How probably is it to find a man
that is taller than 2 meters?</p>
<p>Directly:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">-</span> <span class="fu">pnorm</span><span class="op">(</span><span class="fl">200</span>,<span class="fl">183</span>,<span class="fl">9.7</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.03983729</code></pre>
</div>
<p>In this example, pnorm returns the probability of an observation
smaller than 200, if data is normally distributed with mean 183, and
standard deviation 9.7.</p>
<p>The probability of finding any observation is 1. So the probability
of finding an observation larger than 200, is 1 minus the probability of
finding an observation smaller than 200.</p>
<p>Manually we could calculate the distance from 200 to 183 = 17. And
divide that with the standard deviation 9.7: 17/9.7 = 1.752577.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">-</span> <span class="fu">pnorm</span><span class="op">(</span><span class="fl">1.752577</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.03983732</code></pre>
</div>
<p>How many men are between 170 and 190 cm tall? Lidt før dette punkt
skal vi videre til næste lesson.</p>
<p>Og efter clt videre til hypotesetests</p>
</section><section><h2 class="section-heading" id="clt">CLT<a class="anchor" aria-label="anchor" href="#clt"></a>
<a class="anchor" aria-label="anchor" href="#clt"></a>
</h2>
<hr class="half-width">
<p>CLT fører til at vi kan betragte middelværdien for vores data som
normalfordelt. selv når disse data ikke <em>er</em> normalfordelte.</p>
<p>I praksis bruger vi t-fordelingen, der ser lidt anderledes ud - vi
har nemlig ikke kendskab til hele populationens sande middelværdi og
varians. t-fordelingen har tykkere haler, der giver os større sikkerhed
for vores konklusioner.</p>
<p>Hvad gør vi så? Hvis vi tager i princippet uendeligt mange
stikprøver, samples, og beregner middelværdierne, så vil disse
middelværdier følge normalfordelingen.</p>
<p>hvis vi fremstiller linealer, og har en tese om at de er præcist 20
cm lange, som de skal være. det er mu</p>
<p>Nu tager vi en stikprøve på størrelsen “n” fra produktionen. Måler
dem, og beregner gennemsnittet.</p>
<p>Måler vi præcist nok, vil det gennemsnit formentlig adskille sig fra
20 cm. Det gennemsnit er X-bar.</p>
<p>I dette tilfælde antager vi at vi kender standardafvigelsen for vores
produktion.</p>
<p>Hvis vi normerer alle vores målinger, så gennemsnittet er 0. Det gør
vi ved at trække gennemsnittet fra alle målinger. Og så
standardafvigelsen er 1. Det gør vi ved at dividere alle målinger med
standardafvigelsen.</p>
<p>Så vil gennemsnittet af vores stikprøve, fordi CLT, følge en
normalfordeling. Og vi kan se hvor det gennemsnit, denne z-score,
placerer sig på den sande normalfordeling.</p>
<p>og ud fra de matematiske egenskaber fra normalfordelingen, kan vi se
hvor underlig den middelværdi vi måler, er.</p>
<p>og det er stadig ikke en specielt god forklaring…</p>
<div class="section level3">
<h3 id="fordelingsfunktionerne-i-r-">Fordelingsfunktionerne i R.<a class="anchor" aria-label="anchor" href="#fordelingsfunktionerne-i-r-"></a>
</h3>
<p>De hyppigst forekommende fordelinger har hver deres sæt af
funktioner.</p>
<div class="section level4">
<h4 id="rnorm">rnorm<a class="anchor" aria-label="anchor" href="#rnorm"></a>
</h4>
<p>I samme familie finder vi runif, rbeta og en del andre:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rnorm</span><span class="op">(</span><span class="fl">5</span>, mean <span class="op">=</span> <span class="fl">0</span>, sd <span class="op">=</span> <span class="fl">1</span> <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  0.3059585 -0.5514241  0.1571381 -0.5920326  0.3094804</code></pre>
</div>
<p>Den returnerer (her) fem tilfældige værdier fra en normalfordeling
med (her) middelværdi 0 og standardafvigelse 1.</p>
</div>
<div class="section level4">
<h4 id="dnorm">dnorm<a class="anchor" aria-label="anchor" href="#dnorm"></a>
</h4>
<p>densiteten. I plottet er det værdien på y-aksen af kurven.</p>
</div>
<div class="section level4">
<h4 id="pnorm">pnorm<a class="anchor" aria-label="anchor" href="#pnorm"></a>
</h4>
<p>Den kumulative fordeling. Hvis x er 0, er arealet fra minus uendelig
til 0 lig pnorm(0). Og hvis vi bruger defaulet mean og sd, er det så
0.5. Sandsynligheden for en værdi mindre end x.</p>
</div>
<div class="section level4">
<h4 id="qnorm">qnorm<a class="anchor" aria-label="anchor" href="#qnorm"></a>
</h4>
<p>det er så den omvendte funktion af pnorm. Husk det på at et q er det
omvendte af et p.</p>
<p>i pnorm finder vi sandsynligheden for at værdien er mindre end x. I
qnorm finder vi x for en given sandsynlighed.</p>
</div>
</div>
</section><section><h2 class="section-heading" id="er-ting-normalfordelte">Er ting normalfordelte?<a class="anchor" aria-label="anchor" href="#er-ting-normalfordelte"></a>
<a class="anchor" aria-label="anchor" href="#er-ting-normalfordelte"></a>
</h2>
<hr class="half-width">
<p>Normalfordelingen kaldes normal fordi Karl Pearson og Francis Galton
i det 19. århundrede observerede at det var en statistisk fordeling der
forklarede rigtig mange fænomener i befolkningsdata. Højde, vægt,
blodtryk, intelligenskvotienter mv. Faktisk var det den der forklarede
flest (af de ting de nu undersøgte).</p>
<p>Og så er det i øvrigt den fordeling som middelværdier af stikprøver
vil tilnærme sig jf. den centrale grænseværdisætning.</p>
<p>Så den er normal fordi det er normen, den hyppigst forekommende. Ikke
at forveksle med en mere løs, dagligsprogs, normativ (pun intended)
anvendelse af ordet norm. Normalen i en statistisk sammenhæng er ganske
enkelt den hyppigst forekommende observation.</p>
<p>Det i statistisk forstand normale, normen, er at have brune øjne
(&gt;50% af klodens befolkning har brune øjne). Det betyder ikke at der
er noget galt med at have blå øjne.</p>
<p>Og rigtig mange ting er ret tæt på at være normalfordelte. Men i
virkeligheden er der ikke mange fænomener der følger normalfordelingen
fuldstændig. Et eksempel:</p>
<p>Serum (en del af blod) Molybdæn (der er et essentielt sporstof i
human fysiologi), har en middelværdi på 1.55 og en standardafvigelse på
0.74 hos normale, raske mennesker.</p>
<p>Rifai, N. (2017). Tietz textbook of clinical chemistry and molecular
diagnostics : Tietz textbook of clinical chemistry and molecular
diagnostics - e-book. Elsevier - Health Sciences Division.</p>
<p>Hvis vi antager at serum-Molybdæn er normalfordelt i populationen,
kan vi beregne hvor stor en andel af den normale raske befolkning i
danmark, der har en Molybdæn-koncentration under 0:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pnorm</span><span class="op">(</span><span class="fl">0</span>, mean <span class="op">=</span> <span class="fl">1.55</span>, sd <span class="op">=</span> <span class="fl">0.74</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.01810352</code></pre>
</div>
<p>Hvilket vil sige at vi forventer at lidt over 100.000 danskere har et
negativt indhold af Molybdæn i blodet. Hvilket er fysisk umuligt.
Hvorfor går det så godt alligevel? Fordi serum molybdæn er normalfordelt
<em>nok</em>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-is-it-normal"><p>Content from <a href="is-it-normal.html">Testing for normality</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/is-it-normal.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">palmerpenguins</span><span class="op">)</span></span></code></pre>
</div>
<section><h2 class="section-heading" id="how-to-test-if-our-data-is-normally-distributed">How to test if our data is normally distributed?<a class="anchor" aria-label="anchor" href="#how-to-test-if-our-data-is-normally-distributed"></a>
<a class="anchor" aria-label="anchor" href="#how-to-test-if-our-data-is-normally-distributed"></a>
</h2>
<hr class="half-width">
<p>Common question - is my data normally distributed?</p>
<p>What does it mean that it is normally distributed? It means that the
distribution of our data has the same properties as the normal
distribution.</p>
<p>Let us get some data that we can test:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">normal_test_data</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Chinstrap"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">bill_depth_mm</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="mean-and-median">Mean and median<a class="anchor" aria-label="anchor" href="#mean-and-median"></a>
</h3>
<p>One of the properties of the normal distribution is that the mean and
median of the data is equal. Let us look at the penguins:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">normal_test_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> bill_depth_mm
 Min.   :16.40
 1st Qu.:17.50
 Median :18.45
 Mean   :18.42
 3rd Qu.:19.40
 Max.   :20.80  </code></pre>
</div>
<p>This is actually pretty close! But equality between median and mean
is a neccesary, not a sufficient condition.</p>
<p>What next. A histogram of the data should look normal. Let us take a
closer look at bill_depth_mm where mean and median are closest:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">normal_test_data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">bill_depth_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<figure><img src="../fig/is-it-normal-rendered-unnamed-chunk-3-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>This does not really look like a normal distribution. The fact that
mean and median are almost identical was not a sufficient criterium for
normalcy.</p>
<p>The shape of a histogram is heavily dependent on the bins we choose.
A better way of visualizing often density-plots:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">normal_test_data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">bill_depth_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_density</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/is-it-normal-rendered-unnamed-chunk-4-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We can think of this as a histogram with infinitely small bins.</p>
<p>This does look more normal - but it would be nice to be able to
quantize the degree of normalcy.</p>
</div>
</section><section><h2 class="section-heading" id="percentiels-and-qq-plots-as-a-test">Percentiels and QQ-plots as a test<a class="anchor" aria-label="anchor" href="#percentiels-and-qq-plots-as-a-test"></a>
<a class="anchor" aria-label="anchor" href="#percentiels-and-qq-plots-as-a-test"></a>
</h2>
<hr class="half-width">
<p>The properties of the normal distribution informs us that 50% of the
observations in the data are smaller than the mean (and conversely 50%
are larger). We alson know that 50% of the observations should be in the
interquartile range. And what we also know is that 2.5% of the
observations (the 2.5 percentile) are smaller than the mean minus 1.96
times the standard deviation.</p>
<p>Actually we can calculate exactly which percentile a given
observation is in. And we we can calculate which value a given
percentile should have.</p>
<p>Comparing those gives us an indication of how well the data conforms
to a normal distribution.</p>
<p>Rather than doing that by hand, we can get R to do it for us in a
nice graphical way:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">normal_test_data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>sample <span class="op">=</span> <span class="va">bill_depth_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_qq</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_qq_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/is-it-normal-rendered-unnamed-chunk-5-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The <code>geom_qq</code> function calculate and plots which
percentile an observation is in.</p>
<p>Rather than being given percentiles, we are given the value that the
percentile corresponds to if we calculate it as number of standard
deviations from the mean.</p>
<p>This results in plots that are more comparable.</p>
<p><code>geom_qq_line</code> plots the line corresponding til the values
the percentiles should have, if the data was normally distributed.</p>
<p>A common theme is that the midle of the data falls relatively close
to the line, and that there are deviations from the line at both ends.
In this case the deviations are largish, indicating that the data is not
normally distributed.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout<a class="anchor" aria-label="anchor" href="#callout1"></a>
</h3>
<div class="callout-content">
<p>We have two tails in the qq-plot, a left and a right. And they can be
either above or below the qq-line.</p>
<p>That results in four different cases, that informs us about what is
wrong with the data - in regards to how it deviates from normalcy.</p>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="15%">
<col width="54%">
</colgroup>
<thead><tr class="header">
<th>Left tail</th>
<th>Right tail</th>
<th>Name</th>
<th>What</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Above</td>
<td>Below</td>
<td>Leptokurtic</td>
<td>Heavier tails - ie. more extreme values. Higher kurtosis</td>
</tr>
<tr class="even">
<td>Below</td>
<td>Above</td>
<td>Platykurtic</td>
<td>Lighter tails - ie. fewer extreme values. Lower kurtosis</td>
</tr>
<tr class="odd">
<td>Above</td>
<td>Above</td>
<td>Right skewed</td>
<td>A tail that stretches to the higher values - the extreme values are
larger.</td>
</tr>
<tr class="even">
<td>Below</td>
<td>Below</td>
<td>Left skewed</td>
<td>A tail that stretches to the lower values - the extreme values are
smaller.</td>
</tr>
</tbody>
</table>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Attaching package: 'gridExtra'</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The following object is masked from 'package:dplyr':

    combine</code></pre>
</div>
<figure><img src="../fig/is-it-normal-rendered-unnamed-chunk-6-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<p>Ja. kurtosis og skewness. Jo tættere skewness kommer på 0, og
kurtosis minus 3 på 0, jo tættere på normalfordelt er data.</p>
<p>R i sig selv kan ikke beregne det. Men det kan pakken e1071</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">e1071</span><span class="op">)</span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu">rnorm</span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span></span></code></pre>
</div>
<p>Skewness:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">skewness</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.02857772</code></pre>
</div>
<p>kurtosis</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">kurtosis</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] -0.02368209</code></pre>
</div>
<p>Bemærk at vores test-vektor er ret normal fordelt. Men ingen af
parametrene er lig 0.</p>
<p>Andre tests: Shapiro-Wilk</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">shapiro.test</span><span class="op">(</span><span class="va">test</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
	Shapiro-Wilk normality test

data:  test
W = 0.99773, p-value = 0.1877</code></pre>
</div>
<p>nul-hypotesen er her at data er normalfordelte. Hvis vi afviser
null-hypotesen,vil det i dette tilfælde, være forkert i ca. 94% af
tilfældene.</p>
<p>Testen er særligt godt til små stikprøver (&lt;50, nogen siger den er
ok op op til &lt;2000)</p>
<p>Det er, vist nok, principielt et mål for den lineære korrelation
mellem data og normalfordelte kvantiler - altså det vi ser i
qq-plottet.</p>
<div class="section level3">
<h3 id="kolmogorov-smirnov">Kolmogorov-Smirnov<a class="anchor" aria-label="anchor" href="#kolmogorov-smirnov"></a>
</h3>
<p>vi skal specificere at det er normalfordelingen vi tester imod
(“pnorm”) - den kan nemlig teste for andre fordelinger også.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ks.test</span><span class="op">(</span><span class="va">test</span>, <span class="st">"pnorm"</span>, mean <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">test</span><span class="op">)</span>, sd <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">test</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
	Asymptotic one-sample Kolmogorov-Smirnov test

data:  test
D = 0.026656, p-value = 0.4761
alternative hypothesis: two-sided</code></pre>
</div>
<p>Vær forsigtig. Den forudsætter at vi kender “den sande” middelværdi
og standardafvigelse, i stedet for som i dette eksempel at estimere dem
fra vores stikprøve.</p>
<p>NULL-hypotesen er også her at data er normalfordelte, p-værdien er
her 0.99, og vi kan derfor ikke afvise null-hypotesen.</p>
</div>
<div class="section level3">
<h3 id="liliefors-test">Liliefors test<a class="anchor" aria-label="anchor" href="#liliefors-test"></a>
</h3>
<p>Den er en variation af ks-testen, der er designet specifikt til at
teste normalitet. Og forudsætter <em>ikke</em> at vi på forhånd kender
middelværdi og standardafvigelse.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">nortest</span><span class="op">)</span></span>
<span><span class="fu">lillie.test</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
	Lilliefors (Kolmogorov-Smirnov) normality test

data:  test
D = 0.026656, p-value = 0.09102</code></pre>
</div>
<p>Samme null-hypotese som før. Men læg igen mærke til at selvom data er
designet til at være normalfordelte, så er p-værdien ikke 1.</p>
</div>
<div class="section level3">
<h3 id="anderson-darling-test">Anderson-darling test<a class="anchor" aria-label="anchor" href="#anderson-darling-test"></a>
</h3>
<p>Ikke tilgængelig i R direkte:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">nortest</span><span class="op">)</span></span>
<span><span class="fu">ad.test</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
	Anderson-Darling normality test

data:  test
A = 0.64487, p-value = 0.09228</code></pre>
</div>
<p>Også her er null-hypotesen at data er normaltfordelte.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-which-distribution"><p>Content from <a href="which-distribution.html">which-distribution</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/which-distribution.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Certain statistical tests and procedures requires that our data is
normally distributed. And we have to use other tests if it is not
normally distributed. In that case we need to figure out which
statistical distribution best fit our data.</p>
<p>We could find that out by guessing at a distribution, fit our data to
it, and evaluate how good the fit is.</p>
<p>Or we can figure out a way to test at lot of different distributions
in one go.</p>
<p>The package <code>gamlss</code> and its plugin packages
<code>gamlss.dist</code> and <code>gamlss.add</code> can do just
that:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">gamlss</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">gamlss.dist</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">gamlss.add</span><span class="op">)</span></span></code></pre>
</div>
<p><code>gamlss</code> has the advantage of implementing a <em>lot</em>
of different statistical distributions.</p>
<p>Let us look at some data. The <code>faithful</code> data set contains
272 observations of the Old Faithful geyser in Yellowstone National Park
in USA. We only look at eruptions that lasts longer than 3 seconds:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">faithful</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">eruptions</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">eruptions</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span>bins<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/which-distribution-rendered-unnamed-chunk-1-1.png" style="display: block; margin: auto;" class="figure">
This does not look very normally distributed, and the fact that
eruptions can not have negative lengths in it self, indicates that the
data is probably not normally distributed. This is because the normal
distribution would give us non-zero probabilities for negative
eruption-lengths.</p>
<p>So - which statistical distribution best matches our data?</p>
<p>We begin by preparing the data.:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eruption_example</span> <span class="op">&lt;-</span> <span class="va">faithful</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">eruptions</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">eruptions</span><span class="op">)</span></span></code></pre>
</div>
<p>The function <code>fitDist()</code> from <code>gamlss</code> will fit
the data to a selection of different statistical distributions,
calculate a measure of the goodness of fit, and return the best fit (and
information on all the others). Rather than testing against all 97
different distributions supported by <code>gamlss</code>, we can specify
only a selection, in this case <code>realplus</code>, that only includes
the 23 distributions that are defined for positive, real numbers:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">fitDist</span><span class="op">(</span><span class="va">eruptions</span>, type <span class="op">=</span> <span class="st">"realplus"</span>, data <span class="op">=</span> <span class="va">eruption_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   4%  |                                                                              |======                                                                |   9%  |                                                                              |=========                                                             |  13%  |                                                                              |============                                                          |  17%  |                                                                              |===============                                                       |  22%  |                                                                              |==================                                                    |  26%  |                                                                              |=====================                                                 |  30%  |                                                                              |========================                                              |  35%  |                                                                              |===========================                                           |  39%  |                                                                              |==============================                                        |  43%  |                                                                              |=================================                                     |  48%  |                                                                              |=====================================                                 |  52%  |                                                                              |========================================                              |  57%  |                                                                              |===========================================                           |  61%  |                                                                              |==============================================                        |  65%  |                                                                              |=================================================                     |  70%  |                                                                              |====================================================                  |  74%  |                                                                              |=======================================================               |  78%  |                                                                              |==========================================================            |  83%Error in solve.default(oout$hessian) :
  Lapack routine dgesv: system is exactly singular: U[4,4] = 0
  |                                                                              |=============================================================         |  87%Error in solve.default(oout$hessian) :
  Lapack routine dgesv: system is exactly singular: U[4,4] = 0
  |                                                                              |================================================================      |  91%  |                                                                              |===================================================================   |  96%  |                                                                              |======================================================================| 100%</code></pre>
</div>
<p>If you do this yourself, you will notice a lot of error-messages. It
is not possible to fit this particular data to <em>all</em> the
distributions, and the ones where the fit fails (enough), we will get an
error message.</p>
<p>The output from <code>fitDist()</code> will return the best fit:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Family:  c("WEI2", "Weibull type 2")
Fitting method: "nlminb"

Call:  gamlssML(formula = y, family = DIST[i])

Mu Coefficients:
[1]  -18.69
Sigma Coefficients:
[1]  2.524

 Degrees of Freedom for the fit: 2 Residual Deg. of Freedom   173
Global Deviance:     175.245
            AIC:     179.245
            SBC:     185.574 </code></pre>
</div>
<p>We are told that the statistical distribution that best fits the data
is <code>Weibull type 2</code> and that the AIC-measurement of goodness
of fit is 170.245.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout<a class="anchor" aria-label="anchor" href="#callout1"></a>
</h3>
<div class="callout-content">
<p>Is that a good fit? That is a good question. It strongly depends on
the values in the dataset. In this dataset, the length of the eruptions
are measured in seconds. If we choose to measure that length in another
unit, eg <code>wiblies</code> defined as two seconds - equivalent to
dividing the values with 2, the distribution should not change. But the
AIC will change.</p>
<p>We can use the AIC to decide that one distribution fits the data
better than another, but not to conclude that that distribution is the
correct one.</p>
</div>
</div>
</div>
<p>The <code>fit</code> object containing the output of the
<code>fitDist()</code> function contains quite a bit more.</p>
<p>If we start by getting the errors out of the way,
<code>fit$failed</code> returns the two distributions that failed enough
to cause errors:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span><span class="op">$</span><span class="va">failed</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[[1]]
[1] "GIG"

[[2]]
[1] "LNO"</code></pre>
</div>
<p>As mentioned <code>fitDist()</code> fitted the data to 23 different
distributions. We can inspect the rest, and their associated AIC-values
like this:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span><span class="op">$</span><span class="va">fits</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    WEI2     WEI3      WEI       GG    BCPEo     BCPE    BCCGo     BCCG
179.2449 179.2449 179.2449 181.1349 181.4953 181.4953 183.1245 183.1245
     GB2      BCT     BCTo   exGAUS       GA   LOGNO2    LOGNO       IG
183.1354 185.1245 185.1245 190.2994 194.4665 198.3047 198.3047 198.3558
  IGAMMA      EXP       GP PARETO2o  PARETO2
202.6759 861.8066 863.8067 863.8079 863.8081 </code></pre>
</div>
<p>Here we get <code>WEI2</code> first, with an AIC of 179.2449, but we
can see that <code>WEI3</code> and <code>WEI1</code> have almost exactly
the same AIC. Not that surprising if we guess that
<code>Weibull type 3</code> is probably rather similar to
<code>Weibull type 2</code>.</p>
<p>The difference in AIC for the first two distributions tested is very
small. Is it large enough for us to think that <code>WEI2</code> is
significantly better than <code>WEI3</code>?</p>
<p>No. As a general rule of thumb, the difference between the AIC of two
distributions have to be larger than 2 for us to see a significant
difference.</p>
<p>We can get more details using the <code>summary()</code>
function:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>*******************************************************************
Family:  c("WEI2", "Weibull type 2")

Call:  gamlssML(formula = y, family = DIST[i])

Fitting method: "nlminb"


Coefficient(s):
             Estimate  Std. Error  t value   Pr(&gt;|t|)
eta.mu    -18.6934274   1.1306427 -16.5334 &lt; 2.22e-16 ***
eta.sigma   2.5242093   0.0589965  42.7858 &lt; 2.22e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

 Degrees of Freedom for the fit: 2 Residual Deg. of Freedom   173
Global Deviance:     175.245
            AIC:     179.245
            SBC:     185.574 </code></pre>
</div>
<p>And we can get at graphical description as well:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/which-distribution-rendered-unnamed-chunk-8-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>******************************************************************
	      Summary of the Quantile Residuals
                           mean   =  -0.001205749
                       variance   =  0.9953007
               coef. of skewness  =  0.09022876
               coef. of kurtosis  =  2.529951
Filliben correlation coefficient  =  0.9976953
******************************************************************</code></pre>
</div>
</section><section><h2 class="section-heading" id="hvordan-med-de-andre-muligheder">Hvordan med de andre muligheder?<a class="anchor" aria-label="anchor" href="#hvordan-med-de-andre-muligheder"></a>
<a class="anchor" aria-label="anchor" href="#hvordan-med-de-andre-muligheder"></a>
</h2>
<hr class="half-width">
<p>Dem kan vi også få:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fitte</span> <span class="op">&lt;-</span> <span class="fu">gamlss</span><span class="op">(</span><span class="va">eruptions</span> <span class="op">~</span> <span class="fl">1</span>, family <span class="op">=</span> <span class="va">LOGNO</span>, data <span class="op">=</span> <span class="va">test</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'test' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">fitte</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'fitte' not found</code></pre>
</div>
<p>Og det var så de fordelinger der er definerede for reelle, positive
tal. Vi går efter den mindste “deviance” - afvigelsen fra idealet.
Bemærk at jo flere datapunkter vi har, jo større bliver tallene. Det
bedste fit er dog stadig det med den laveste værdi.</p>
<p>“realline” dækker kontinuerte fordelingsfunktioner på hele den reelle
tallinie</p>
<p>“realplus” dækker kontinuerte fordelingsfunktioner på den positive,
reelle tallinie</p>
<p>“realAll” har alle kontinuerte fordelingsfunktioner på hele den relle
tallinie, det vil sige alt der er omfattet af “realline” og
“realplus”</p>
<p>“real0to1” de kontinuerte fordelingsfunktioner der er defineret for
værdier mellem 0 og 1.</p>
<p>“counts” fordelingsfunktioner for tælletal</p>
<p>“binom” fordelingsfunktioner for binomiale data.</p>
<p>Der er mange. Læs mere om dem i <a href="https://www.gamlss.com/wp-content/uploads/2013/01/gamlss-manual.pdf" class="external-link">dokumentationen</a>,
særligt appendix A.</p>
</section><section><h2 class="section-heading" id="hvordan-med-de-andre-fordelinger">Hvordan med de andre fordelinger?<a class="anchor" aria-label="anchor" href="#hvordan-med-de-andre-fordelinger"></a>
<a class="anchor" aria-label="anchor" href="#hvordan-med-de-andre-fordelinger"></a>
</h2>
<hr class="half-width">
<p>Inde bagved er <code>fitDist</code> i virkeligheden gentagne kald til
den samme funktion. Det afsløres i outputtet:
<code>Call:  gamlssML(formula = y, family = DIST[i])</code></p>
<p>Så vil vi gerne have estimaterne fra de andre funktioner, kan vi få
dem ved at lave samme kald - men med en anden <code>family</code>:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nyt_fit</span> <span class="op">&lt;-</span> <span class="fu">gamlssML</span><span class="op">(</span>formula <span class="op">=</span> <span class="va">y</span>, family <span class="op">=</span> <span class="st">"GG"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(predvars, data, env): object 'y' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">LOGNO2</span>    </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>function (mu.link ="log", sigma.link="log")
{
    mstats &lt;- checklink("mu.link", "LOGNO2", substitute(mu.link), c("inverse", "log", "identity"))
    dstats &lt;- checklink("sigma.link", "LOGNO2", substitute(sigma.link), c("inverse", "log", "identity"))
    structure(
          list(family = c("LOGNO2", "Log Normal 2"),
           parameters = list(mu=TRUE,sigma=TRUE),
                nopar = 2,
                 type = "Continuous",
              mu.link = as.character(substitute(mu.link)),
           sigma.link = as.character(substitute(sigma.link)),
           mu.linkfun = mstats$linkfun,
        sigma.linkfun = dstats$linkfun,
           mu.linkinv = mstats$linkinv,
        sigma.linkinv = dstats$linkinv,
                mu.dr = mstats$mu.eta,
             sigma.dr = dstats$mu.eta,
                 dldm = function(y, mu, sigma){
                 	      dldm &lt;- (1/sigma^2)*(log(y)-log(mu))/mu #(log(y)-log(mu))/((sigma^2)*mu)
                          dldm
                           },
               d2ldm2 = function(mu, sigma) -1/((sigma^2)*(mu^2)),
                 dldd = function(y,mu,sigma) {
                 	           dldd &lt;- (1/(sigma^3))*((log(y)-log(mu))^2-sigma^2)
                              dldd},
               d2ldd2 = function(sigma) -(2/(sigma^2)),
              d2ldmdd = function(y) rep(0,length(y)),
          G.dev.incr  = function(y,mu,sigma,...)  -2*dLOGNO2(y,mu,sigma,log=TRUE),
                rqres = expression(rqres(pfun="pLOGNO2", type="Continuous", y=y, mu=mu, sigma=sigma)),
           mu.initial = expression({   mu &lt;- exp((log(y)+mean(log(y)))/2 ) }),
        sigma.initial = expression({sigma &lt;- rep(sd(log(y)),length(y))}),
             mu.valid = function(mu) all (mu &gt; 0) ,
          sigma.valid = function(sigma) all(sigma &gt; 0),
              y.valid = function(y)  all(y&gt;0)
          ),
            class = c("gamlss.family","family")
          )
}
&lt;bytecode: 0x559880eb1e90&gt;
&lt;environment: namespace:gamlss.dist&gt;</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nyt_fit</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'nyt_fit' not found</code></pre>
</div>
<p>Resultatet kan behandles ganske som tidligere.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu">as_tibble</span><span class="op">(</span><span class="va">faithful</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">select</span><span class="op">(</span><span class="va">eruptions</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">eruptions</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">faithful</span><span class="op">$</span><span class="va">eruptions</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  [1] 3.600 1.800 3.333 2.283 4.533 2.883 4.700 3.600 1.950 4.350 1.833 3.917
 [13] 4.200 1.750 4.700 2.167 1.750 4.800 1.600 4.250 1.800 1.750 3.450 3.067
 [25] 4.533 3.600 1.967 4.083 3.850 4.433 4.300 4.467 3.367 4.033 3.833 2.017
 [37] 1.867 4.833 1.833 4.783 4.350 1.883 4.567 1.750 4.533 3.317 3.833 2.100
 [49] 4.633 2.000 4.800 4.716 1.833 4.833 1.733 4.883 3.717 1.667 4.567 4.317
 [61] 2.233 4.500 1.750 4.800 1.817 4.400 4.167 4.700 2.067 4.700 4.033 1.967
 [73] 4.500 4.000 1.983 5.067 2.017 4.567 3.883 3.600 4.133 4.333 4.100 2.633
 [85] 4.067 4.933 3.950 4.517 2.167 4.000 2.200 4.333 1.867 4.817 1.833 4.300
 [97] 4.667 3.750 1.867 4.900 2.483 4.367 2.100 4.500 4.050 1.867 4.700 1.783
[109] 4.850 3.683 4.733 2.300 4.900 4.417 1.700 4.633 2.317 4.600 1.817 4.417
[121] 2.617 4.067 4.250 1.967 4.600 3.767 1.917 4.500 2.267 4.650 1.867 4.167
[133] 2.800 4.333 1.833 4.383 1.883 4.933 2.033 3.733 4.233 2.233 4.533 4.817
[145] 4.333 1.983 4.633 2.017 5.100 1.800 5.033 4.000 2.400 4.600 3.567 4.000
[157] 4.500 4.083 1.800 3.967 2.200 4.150 2.000 3.833 3.500 4.583 2.367 5.000
[169] 1.933 4.617 1.917 2.083 4.583 3.333 4.167 4.333 4.500 2.417 4.000 4.167
[181] 1.883 4.583 4.250 3.767 2.033 4.433 4.083 1.833 4.417 2.183 4.800 1.833
[193] 4.800 4.100 3.966 4.233 3.500 4.366 2.250 4.667 2.100 4.350 4.133 1.867
[205] 4.600 1.783 4.367 3.850 1.933 4.500 2.383 4.700 1.867 3.833 3.417 4.233
[217] 2.400 4.800 2.000 4.150 1.867 4.267 1.750 4.483 4.000 4.117 4.083 4.267
[229] 3.917 4.550 4.083 2.417 4.183 2.217 4.450 1.883 1.850 4.283 3.950 2.333
[241] 4.150 2.350 4.933 2.900 4.583 3.833 2.083 4.367 2.133 4.350 2.200 4.450
[253] 3.567 4.500 4.150 3.817 3.917 4.450 2.000 4.283 4.767 4.533 1.850 4.250
[265] 1.983 2.250 4.750 4.117 2.150 4.417 1.817 4.467</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">gamlss</span><span class="op">(</span><span class="va">eruptions</span> <span class="op">~</span> <span class="fl">1</span>, family <span class="op">=</span> <span class="va">LOGNO2</span>, data <span class="op">=</span> <span class="va">eruption_example</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">plot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>GAMLSS-RS iteration 1: Global Deviance = 194.3047
GAMLSS-RS iteration 2: Global Deviance = 194.3047 </code></pre>
</div>
<figure><img src="../fig/which-distribution-rendered-unnamed-chunk-11-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>******************************************************************
	      Summary of the Quantile Residuals
                           mean   =  -2.44886e-16
                       variance   =  1.005747
               coef. of skewness  =  -0.7063289
               coef. of kurtosis  =  3.179548
Filliben correlation coefficient  =  0.9814924
******************************************************************</code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The data generating function is not neccesarily the same as the
distribution that best fit the data.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-notes"><p>Content from <a href="notes.html">notes</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/notes.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>Inline instructor notes can help inform instructors of timing
challenges associated with the lessons. They appear in the “Instructor
View”</p>
</div>
</div>
</div>
</div>
<div id="challenge-1-can-you-do-it" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1-can-you-do-it" class="callout-inner">
<h3 class="callout-title">Challenge 1: Can you do it?<a class="anchor" aria-label="anchor" href="#challenge-1-can-you-do-it"></a>
</h3>
<div class="callout-content">
<p>What is the output of this command?</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="st">"This"</span>, <span class="st">"new"</span>, <span class="st">"lesson"</span>, <span class="st">"looks"</span>, <span class="st">"good"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Output </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "This new lesson looks good"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># download.file("https://raw.githubusercontent.com/KUBDatalab/R-PUFF/main/data/FEV.csv", "data/fev.csv", mode = "wb")</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<hr class="half-width">
<p>Ingen har givet os data. Så her er noget data på lungevolumen hos
børn/unge i alderen 3-19, både rygere og ikke rygere, og af begge køn.
Højden har vi også. Højde er i tommer. Volumen tror vi nok er i
liter.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fev</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/fev.csv"</span><span class="op">)</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">fev</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="scatterplot-analysis">scatterplot analysis<a class="anchor" aria-label="anchor" href="#scatterplot-analysis"></a>
<a class="anchor" aria-label="anchor" href="#scatterplot-analysis"></a>
</h2>
<hr class="half-width">
<p>Vi ved ikke helt hvad en “scatterplot analysis” er. Men her er et
scatterplot:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fev</span> <span class="op">%&gt;%</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">Hgt</span>, y <span class="op">=</span> <span class="va">FEV</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> </span></code></pre>
</div>
<p>Det får os til at tro at der måske er en lineær sammenhæng mellem
højde og lungevolumen.</p>
</section><section><h2 class="section-heading" id="en-ret-linie">En ret linie<a class="anchor" aria-label="anchor" href="#en-ret-linie"></a>
<a class="anchor" aria-label="anchor" href="#en-ret-linie"></a>
</h2>
<hr class="half-width">
<p>ggplot kan lave det direkte. Men husk at sætte “method” i
geom_smooth:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fev</span> <span class="op">%&gt;%</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">Hgt</span>, y <span class="op">=</span> <span class="va">FEV</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="sådan-en-linie-har-en-ligning">Sådan en linie har en ligning<a class="anchor" aria-label="anchor" href="#s%C3%A5dan-en-linie-har-en-ligning"></a>
<a class="anchor" aria-label="anchor" href="#s%C3%A5dan-en-linie-har-en-ligning"></a>
</h2>
<hr class="half-width">
<p><span class="math display">\[y = ax + b\]</span></p>
<p>Or:</p>
<p><span class="math display">\[FEV = aHgt + b\]</span> a er hældningen
(slope). b is the intercept between the line and the y-axis.</p>
<p>R can find slope and intercept for us:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">FEV</span> <span class="op">~</span> <span class="va">Hgt</span>, data <span class="op">=</span> <span class="va">fev</span><span class="op">)</span></span>
<span><span class="va">model</span></span></code></pre>
</div>
<p>Read the formula as: FEV is a function of Hgt. Hgt is the independent
variabel. FEV the dependent. But this is not a statistics course, you
can read about that in your textbook. Intercept is -5.433. Try to guess
what value the slope has.</p>
<p>What else:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre>
</div>
<p>Here we get the p-values of the estimates of intercept and slope,
handily coded with *** to indicate different levels of significance
<span class="math inline">\(\alpha\)</span>.</p>
<p>We also get a <span class="math inline">\(R^2\)</span> value
describing the propotion of the variability of the data described by the
model.</p>
<p>In general it is a good idea to take a look at the residuals:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">hist</span><span class="op">(</span><span class="va">model</span><span class="op">$</span><span class="va">residuals</span><span class="op">)</span></span></code></pre>
</div>
<p>The residuals should be normal distributed (one of the assumptions of
the linear regression, but we assume that has been covered in the
textbook).</p>
<p>Also take a look at the actual residuals, comparing the predicted
values with the residuals:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="fu">fitted</span><span class="op">(</span><span class="va">model</span><span class="op">)</span>, <span class="va">model</span><span class="op">$</span><span class="va">residuals</span><span class="op">)</span></span></code></pre>
</div>
<p>If there is a pattern in the residuals it is an indication that there
is more signal in the data than we found with the model. Here it looks
like there is something happening in the higher end of FEV - the
dispersion of the values is qualitatively different in the two ends of
the fit.</p>
<p>Maybe that dispersion at the end is due to Sex?</p>
<p>We can make the previous plot, just colored by Sex (Sex is recorded
as 0’s and 1’s). We need to coeerce Sex to a categorical variable using
<code>factor()</code>:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fev</span> <span class="op">%&gt;%</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">Hgt</span>, y <span class="op">=</span> <span class="va">FEV</span>, color <span class="op">=</span> <span class="fu">factor</span><span class="op">(</span><span class="va">Sex</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span></code></pre>
</div>
<p>The dispersion is probably not related to Sex. We almost only have
boys/men with a height above ~70 inches. And we see a large variability
amongst them, i overensstemmelse med den større variabilitet vi ser
blandt mænd i snart sagt alle sammenhænge.</p>
</section><section><h2 class="section-heading" id="might-it-be-age---multiple-regression">might it be age - multiple regression!<a class="anchor" aria-label="anchor" href="#might-it-be-age---multiple-regression"></a>
<a class="anchor" aria-label="anchor" href="#might-it-be-age---multiple-regression"></a>
</h2>
<hr class="half-width">
<p>Maybe FEV is dependent on both Height <strong>and</strong> Age?</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model2</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">FEV</span> <span class="op">~</span><span class="va">Age</span> <span class="op">+</span> <span class="va">Hgt</span> , data <span class="op">=</span> <span class="va">fev</span><span class="op">)</span></span>
<span><span class="va">model2</span> <span class="op">%&gt;%</span> <span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>In the simpler model Adjusted R-squared was 0.7533. This larger model
represents a slight improvement.</p>
<p><span class="math display">\[FEV = \beta_2Age + \beta_1Hgt +
\beta_0\]</span></p>
<p>What if we only look at the girls/women?</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lm</span><span class="op">(</span><span class="va">FEV</span> <span class="op">~</span><span class="va">Age</span> <span class="op">+</span> <span class="va">Hgt</span> , data <span class="op">=</span> <span class="va">fev</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">Sex</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Adjusted <span class="math inline">\(R^2\)</span> is worse!</p>
<p>and for the men/boys?</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lm</span><span class="op">(</span><span class="va">FEV</span> <span class="op">~</span><span class="va">Age</span> <span class="op">+</span> <span class="va">Hgt</span> , data <span class="op">=</span> <span class="va">fev</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">Sex</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>It actually gets better.</p>
</section><section><h2 class="section-heading" id="can-we-make-a-model-where-we-bake-in-sex">Can we make a model where we bake in Sex?<a class="anchor" aria-label="anchor" href="#can-we-make-a-model-where-we-bake-in-sex"></a>
<a class="anchor" aria-label="anchor" href="#can-we-make-a-model-where-we-bake-in-sex"></a>
</h2>
<hr class="half-width">
<p>Now it get complicated enough that we really need to think about how
to explain it…</p>
<p>It might be easier after looking at the result</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lm</span><span class="op">(</span><span class="va">FEV</span> <span class="op">~</span> <span class="va">Age</span><span class="op">:</span><span class="fu">factor</span><span class="op">(</span><span class="va">Sex</span><span class="op">)</span> <span class="op">+</span> <span class="va">Hgt</span><span class="op">:</span><span class="fu">factor</span><span class="op">(</span><span class="va">Sex</span><span class="op">)</span> <span class="op">+</span> <span class="va">Age</span><span class="op">*</span><span class="va">Hgt</span>, data <span class="op">=</span> <span class="va">fev</span><span class="op">)</span>  </span></code></pre>
</div>
<p>The intercept is what it is.</p>
<p>For each unit increase in Age, FEV decreases by 0.334. For each unit
increase in Hgt FEV increases by 0.0534. factor(Sex)1:Hgt tells us, that
boys/men “experience” a decrease in FEV of 0.00292 for each unit
increase of Height. Or: Girls <em>and</em> boys get an increase of FEV
of 0.0534 for each inch of height. But FEV for boys is corrected
downwards by 0.00292.</p>
<p>Similar with Age. Girls <em>and</em> boys decrease their FEV with
0.334 for each year. But boys get an “compensatory” increase of
0.0303.</p>
<p>Age:Hgt is a bit more complicated. We <em>multiply</em> the age and
height of both sexes - a unit increase in <em>that</em> value increses
FEV with 0.00605.</p>
<p>Does the final bit make sense? Physiologically? No idea.</p>
<p>Looking closer at the model result:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lm</span><span class="op">(</span><span class="va">FEV</span> <span class="op">~</span> <span class="va">Age</span><span class="op">:</span><span class="fu">factor</span><span class="op">(</span><span class="va">Sex</span><span class="op">)</span> <span class="op">+</span> <span class="va">Hgt</span><span class="op">:</span><span class="fu">factor</span><span class="op">(</span><span class="va">Sex</span><span class="op">)</span> <span class="op">+</span> <span class="va">Age</span><span class="op">*</span><span class="va">Hgt</span>, data <span class="op">=</span> <span class="va">fev</span><span class="op">)</span>  <span class="op">%&gt;%</span> <span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>The model is now so complicated that we see elements that are not
significant. Maybe the model is too complicated.</p>
</section><section><h2 class="section-heading" id="correlation-matrix">correlation matrix<a class="anchor" aria-label="anchor" href="#correlation-matrix"></a>
<a class="anchor" aria-label="anchor" href="#correlation-matrix"></a>
</h2>
<hr class="half-width">
<p>Pairwise correlations between the variables:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cor</span><span class="op">(</span><span class="va">fev</span><span class="op">)</span></span></code></pre>
</div>
<p>The diagonal is very uninteresting.</p>
<p>We can get the pairwise <span class="math inline">\(R^2\)</span>
directly:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cor</span><span class="op">(</span><span class="va">fev</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span></span></code></pre>
</div>
<p>We can visualise it:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">corrplot</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">corrplot</span><span class="op">(</span><span class="fu">cor</span><span class="op">(</span><span class="va">fev</span><span class="op">)</span>, bg <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre>
</div>
<p>We may need to play around with background color to even be able to
see the small values.</p>
<p>We think this function gives a nicer plot:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">GGally</span><span class="op">)</span></span>
<span><span class="fu">ggpairs</span><span class="op">(</span><span class="va">fev</span>, progress <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="non-linear-model">non-linear model<a class="anchor" aria-label="anchor" href="#non-linear-model"></a>
<a class="anchor" aria-label="anchor" href="#non-linear-model"></a>
</h2>
<hr class="half-width">
<p>We have already seen a non-linear model!</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lm</span><span class="op">(</span><span class="va">FEV</span> <span class="op">~</span> <span class="va">Age</span><span class="op">:</span><span class="fu">factor</span><span class="op">(</span><span class="va">Sex</span><span class="op">)</span> <span class="op">+</span> <span class="va">Hgt</span><span class="op">:</span><span class="fu">factor</span><span class="op">(</span><span class="va">Sex</span><span class="op">)</span> <span class="op">+</span> <span class="va">Age</span><span class="op">*</span><span class="va">Hgt</span>, data <span class="op">=</span> <span class="va">fev</span><span class="op">)</span></span></code></pre>
</div>
<p>We multiply Age and Hgt. That is not linear!</p>
<p>lm can still be used. A non-linear model is simply a linear model
with non-linear dependent variables.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lm</span><span class="op">(</span><span class="va">FEV</span> <span class="op">~</span> <span class="va">Age</span> <span class="op">+</span> <span class="va">Hgt</span> <span class="op">+</span> <span class="va">Sex</span>, data <span class="op">=</span> <span class="va">fev</span><span class="op">)</span></span></code></pre>
</div>
<p>If we want the polynomial expansion for fx Hgt (automagically):</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lm</span><span class="op">(</span><span class="va">FEV</span> <span class="op">~</span> <span class="fu">poly</span><span class="op">(</span><span class="va">Hgt</span>, <span class="fl">2</span>, raw<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, data<span class="op">=</span><span class="va">fev</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Or, if we want to control it more directly:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lm</span><span class="op">(</span><span class="va">FEV</span> <span class="op">~</span> <span class="va">Hgt</span> <span class="op">+</span> <span class="fu">I</span><span class="op">(</span><span class="va">Hgt</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">fev</span><span class="op">)</span></span></code></pre>
</div>
<p>We need to encapsulate the quadratic expression in <code>I()</code> -
otherwise R will try to interpret stuff before lm can do its math.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"https://stats.idre.ucla.edu/stat/data/binary.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata</span><span class="op">$</span><span class="va">rank</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">rank</span><span class="op">)</span></span>
<span><span class="fu">view</span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myprobit</span> <span class="op">&lt;-</span> <span class="fu">glm</span><span class="op">(</span><span class="va">admit</span> <span class="op">~</span> <span class="va">gre</span> <span class="op">+</span> <span class="va">gpa</span> <span class="op">+</span> <span class="va">rank</span>, family <span class="op">=</span> <span class="fu">binomial</span><span class="op">(</span>link <span class="op">=</span> <span class="st">"probit"</span><span class="op">)</span>, </span>
<span>    data <span class="op">=</span> <span class="va">mydata</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mylogit</span> <span class="op">&lt;-</span> <span class="fu">glm</span><span class="op">(</span><span class="va">admit</span> <span class="op">~</span> <span class="va">gre</span> <span class="op">+</span> <span class="va">gpa</span> <span class="op">+</span> <span class="va">rank</span>, family <span class="op">=</span> <span class="fu">binomial</span><span class="op">(</span>link <span class="op">=</span> <span class="st">"logit"</span><span class="op">)</span>, </span>
<span>    data <span class="op">=</span> <span class="va">mydata</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myprobit</span> <span class="op">%&gt;%</span> <span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mylogit</span></span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-notes2"><p>Content from <a href="notes2.html">notes2</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/notes2.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>This is a lesson created via The Carpentries Workbench. It is written
in <a href="https://pandoc.org/MANUAL.html" class="external-link">Pandoc-flavored Markdown</a>
for static files (with extension <code>.md</code>) and <a href="https://rmarkdown.rstudio.com/" class="external-link">R Markdown</a> for dynamic files
that can render code into output (with extension <code>.Rmd</code>).
Please refer to the <a href="https://carpentries.github.io/sandpaper-docs/" class="external-link">Introduction to The
Carpentries Workbench</a> for full documentation.</p>
<p>What you need to know is that there are three sections required for a
valid Carpentries lesson template:</p>
<ol style="list-style-type: decimal">
<li>
<code>questions</code> are displayed at the beginning of the episode
to prime the learner for the content.</li>
<li>
<code>objectives</code> are the learning objectives for an episode
displayed with the questions.</li>
<li>
<code>keypoints</code> are displayed at the end of the episode to
reinforce the objectives.</li>
</ol>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Inline instructor notes can help inform instructors of timing
challenges associated with the lessons. They appear in the “Instructor
View”</p>
</div>
</div>
</div>
</div>
<div id="challenge-1-can-you-do-it" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1-can-you-do-it" class="callout-inner">
<h3 class="callout-title">Challenge 1: Can you do it?<a class="anchor" aria-label="anchor" href="#challenge-1-can-you-do-it"></a>
</h3>
<div class="callout-content">
<p>What is the output of this command?</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="st">"This"</span>, <span class="st">"new"</span>, <span class="st">"lesson"</span>, <span class="st">"looks"</span>, <span class="st">"good"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Output </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "This new lesson looks good"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-2-how-do-you-nest-solutions-within-challenge-blocks" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2-how-do-you-nest-solutions-within-challenge-blocks" class="callout-inner">
<h3 class="callout-title">Challenge 2: how do you nest solutions within challenge blocks?<a class="anchor" aria-label="anchor" href="#challenge-2-how-do-you-nest-solutions-within-challenge-blocks"></a>
</h3>
<div class="callout-content">

</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>You can add a line with at least three colons and a
<code>solution</code> tag.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="figures">Figures<a class="anchor" aria-label="anchor" href="#figures"></a>
<a class="anchor" aria-label="anchor" href="#figures"></a>
</h2>
<hr class="half-width">
<p>You can include figures generated from R Markdown:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pie</span><span class="op">(</span></span>
<span>  <span class="fu">c</span><span class="op">(</span>Sky <span class="op">=</span> <span class="fl">78</span>, <span class="st">"Sunny side of pyramid"</span> <span class="op">=</span> <span class="fl">17</span>, <span class="st">"Shady side of pyramid"</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, </span>
<span>  init.angle <span class="op">=</span> <span class="fl">315</span>, </span>
<span>  col <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"deepskyblue"</span>, <span class="st">"yellow"</span>, <span class="st">"yellow3"</span><span class="op">)</span>, </span>
<span>  border <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="../fig/notes2-rendered-pyramid-1.png" alt="pie chart illusion of a pyramid" class="figure mx-auto d-block"><figcaption>
Sun arise each and every morning
</figcaption></figure><p>Or you can use pandoc markdown for static figures with the following
syntax:</p>
<p><code>![optional caption that appears below the figure](figure url){alt='alt text for accessibility purposes'}</code></p>
<figure><img src="https://raw.githubusercontent.com/carpentries/logo/master/Badge_Carpentries.svg" alt="Blue Carpentries hex person logo with no text." class="figure mx-auto d-block"><div class="figcaption">You belong in The Carpentries!</div>
</figure></section><section><h2 class="section-heading" id="math">Math<a class="anchor" aria-label="anchor" href="#math"></a>
<a class="anchor" aria-label="anchor" href="#math"></a>
</h2>
<hr class="half-width">
<p>One of our episodes contains <span class="math inline">\(\LaTeX\)</span> equations when describing how to
create dynamic reports with {knitr}, so we now use mathjax to describe
this:</p>
<p><code>$\alpha = \dfrac{1}{(1 - \beta)^2}$</code> becomes: <span class="math inline">\(\alpha = \dfrac{1}{(1 - \beta)^2}\)</span></p>
<p>Cool, right?</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-regression"><p>Content from <a href="regression.html">Linear regression</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/regression.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Here is some data, observations of the distance (in ft) it takes to
stop a car driving at different speeds (in mph):</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cars</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">speed</span>,<span class="va">dist</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/regression-rendered-unnamed-chunk-1-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Not surprisingly the faster the car travels, the longer distance it
takes to stop it.</p>
<p>If we want to predict how long a car traveling at 10 mph takes to
stop, we could look at the observations at 10 mph and note that there is
some variation. We might take the average of those observations, and use
that as an estimate of how many feet it takes to stop a car traveling at
10 mph.</p>
<p>But what if we want to predict how long it takes to stop the car if
we are driving it at 12.5 mph instead? That would be nice to know, in
order to avoid hitting stuff. There are no observations in the data at
12.5 mph! We could estimate it as the average of the stopping distance
at 12 mph and at 13 mph (21.5 and 35 ft respectively) and give an
estimate of 28.25 ft.</p>
<p>But what if we want the distance at 12.4 mph? 12.5 is exactly at the
middle of the interval of 12 to 13 mph.</p>
<p>Instead of this, we note that it appears possible to draw a straight
line through the points, describing the connection between the two
variables.</p>
<p>Let’s do that:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cars</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">speed</span>,<span class="va">dist</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, se <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="../fig/regression-rendered-unnamed-chunk-2-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The points do not fall precisely on the line, but it’s not very
bad.</p>
<p>When we want to figure out how long it takes to stop a car driving at
12.5 mph, we can locate 12.5 on the x-axis, move vertically up to the
line, and read the corresponding value on the y-axis, about 30 mph.</p>
<p>But we can do better. Such a line can be described mathematically.
Straight lines in two dimensions can in general be described using the
formula:</p>
<p><span class="math display">\[
y = ax + b
\]</span> or, in this specific case:</p>
<p><span class="math display">\[
dist = a*speed + b
\]</span></p>
<p><code>a</code> and <code>b</code> are the coefficients of this
“model”. <code>a</code> is the slope, or how much the distance changes,
if we change speed by one. <code>b</code> is the intercept, the value
where the linie crosses the y-axis. Or the distance it takes to stop a
car, traveling at a speed of 0 miles per hour - a value that does not
necessarily make sense, but is still a part of the model.</p>
<p>If we want to be very strict about it, that <code>=</code> is not
really equal. The expression describes the straight line, but the actual
observations do not actually fall on the line. If, for a given dist and
speed, we want the expression to actually be equal, there is some
variation that we need to include. We do that by adding a
<code>residual</code>:</p>
<p><span class="math display">\[
dist = a*speed + b + \epsilon
\]</span></p>
<p>And, if we want to be very mathematical concise, instead of using
<code>a</code>and <code>b</code> for the coefficients in the expression,
we would instead write it like this:</p>
<p><span class="math display">\[
dist = \beta_0 + \beta_1 speed + \epsilon
\]</span></p>
<p>That is all very nice. But how do we find the actual <code>a</code>
and <code>b</code> (or <span class="math inline">\(\beta_i\)</span>)?
What is the “best” line or model for this?</p>
<p>We do that by fitting <code>a</code> and <code>b</code> to values
that minimizes <span class="math inline">\(\epsilon\)</span>, that is,
we need to find the difference between the actual observed values, and
the prediction from the expression or model. Instead of looking at the
individual differences one by one, we look at the sum of the
differences, and minimized that. However, the observed values can be
larger than the prediction, or smaller. The differences can therefore be
both negative and positive, and the sum might be zero because the
difference might cancel each other out.</p>
<p>To avoid that problem, we square the differences, and the minimize
the sum of the squares. That is the reason for calling the method for
minimizing <span class="math inline">\(\epsilon\)</span>, and by that
findin the optimal <code>a</code> and <code>b</code>, “least
squares”.</p>
<p>In a simple linear model like this, we can calculate the coefficients
directly:</p>
<p><span class="math display">\[\beta_1 = \frac{\sum_{i=1}^{n} (x_i -
\overline{x})(y_i - \overline{y})}{\sum_{i=1}^{n} (x_i -
\overline{x})^2}\]</span></p>
<p><span class="math display">\[\beta_0 = \overline{y} -
\beta_1\overline{x}\]</span></p>
<p>We do not want to do that - R can do it for us, with the function
<code>lm()</code> Det gider vi ikke selv, det får vi R. Og det gør vi
med funktionen lm():</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lm</span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">x</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span></code></pre>
</div>
<p>y~x is the “formula notation” in R, and describes that y is a
function of x.</p>
<p>Using the example from above:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linear_model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">dist</span><span class="op">~</span><span class="va">speed</span>, data <span class="op">=</span> <span class="va">cars</span><span class="op">)</span></span></code></pre>
</div>
<p>We saved the result of the function in an object, in order to be able
to work with it. If we just want the coefficients we can output the
result directly:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linear_model</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = dist ~ speed, data = cars)

Coefficients:
(Intercept)        speed
    -17.579        3.932  </code></pre>
</div>
<p>This gives us the coefficients in the model. The intercept,
<code>b</code> or <span class="math inline">\(\beta_0\)</span> is
-17.579. And the slope, <code>a</code> or <span class="math inline">\(\beta_1\)</span> is 3.932.</p>
<p>Having a negative intercept, or in this case any intercept different
from 0 does not make physical sense - a car travelling at 0 miles pr
hour should have a stopping distance of 0 ft.</p>
<p>The slope tells us, that if we increase the speed of the car by 1
mph, the stopping distance will increase by 3.932 ft.</p>
<p>Øvelse - hvilken dist forudsiger modellen at vi får hvis speed er
12.5</p>
<p>We can get more details using the <code>summary()</code>
function:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">linear_model</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = dist ~ speed, data = cars)

Residuals:
    Min      1Q  Median      3Q     Max
-29.069  -9.525  -2.272   9.215  43.201

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept) -17.5791     6.7584  -2.601   0.0123 *
speed         3.9324     0.4155   9.464 1.49e-12 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 15.38 on 48 degrees of freedom
Multiple R-squared:  0.6511,	Adjusted R-squared:  0.6438
F-statistic: 89.57 on 1 and 48 DF,  p-value: 1.49e-12</code></pre>
</div>
<p>Let us look at that output in detail.</p>
<p><code>Call</code> simply repeats the model that we build, just in
case we have forgotten it - but also to have the actual model included
in the output, in order for other functions to access it and use it. We
will get to that.</p>
<p>The residuals are included. It is often important to take a look at
those, and we will do that shortly.</p>
<p>Now, the coefficients.</p>
<p>The estimates for intercept and speed, that is the intercept and the
slope of the line, are given. Those are the same we saw previously. We
also get a standard error. That is similar, but not quite, the standard
deviation of the</p>
<p>Det må forklares bedre end jeg kan lige nu…</p>
<p>The t-value tests the coefficients. We are trying to describe all
cars in the population, but have only a small sample. How likely are we
to see a specific value for the slope, that is as large as the one we
find in our model, if the true value, had we looked at all cars, not
just this sample, was in fact 0?</p>
<p>If we had taken many different samples, we would have found many
different estimates of the slope. The central limit theorem tells us,
that all these different estimates would be normally distributed. If the
true value for the population, all cars ever, was zero, what is the
probability of getting an estimate that is as extreme, or large, as the
one we get here?</p>
<p>Since we can assume that the estimates are normally distributed, we
can see that, <em>if</em> the true value of the slope was zero, the
value we get here, is 3.9324/0.4155 = 9.46426, standard errors away from
zero.</p>
<p>Calculating the probability of finding a value of the slope as large
as that, is:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">-</span><span class="fu">pnorm</span><span class="op">(</span><span class="fl">3.9324</span><span class="op">/</span><span class="fl">0.4155</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0</code></pre>
</div>
<p>That is the p-value, and it is essentially identical to 1.49e-12. We
are very confident that the true value of the slope is not 0.</p>
<p>The intercept has similarly a p-value of 0.0123.</p>
<p>Typically we use a cut-off for significance at 0.05. If the p-value
is smaller than that, we deem the estimate significant.</p>
<p>RSE is the squareroot of the sum of the squared residuals, divided by
the number of observations, <span class="math inline">\(n\)</span> minus
the number of parameters in the model, in this case 2. It is an estimate
of the average difference between the observed values, and the values
the model predicts. We want RSE to be as small as possible. What is
small? That depends on the size of the values. If we predict values in
the range of 0 to 2, an RSE of 15 is very large. If we predict values in
the range 0 to 1000, it is small.</p>
<p>Multiple R-squared, is a measure of how much of the variation in
<code>dist</code> that our model explains. In this case the model
explains ~65% of the variation. Not that impressive, but acceptable.</p>
<p>The adjusted R-squared adjusts the multiple R-square by the number of
independent variables in the model. It becomes an important measure of
how good the model is, when we get to multiple linear regression,
because we will get a better R-squared by adding independent variables,
even if these variables do not actually have any connection to the
dependent variables.</p>
<p>The F-statistic is 89.57 and has a p-value of 1.49e-12.</p>
<p>This tests our model against a model where all the slopes (we only
have one in this case) are 0; that is, is the overall model significant.
In this case it is, and there is overall strong evidence for the claim
that the speed of the car influences the stopping distance.</p>
<p>Øvelse - byg en model hvor du forudsiger længden på flipperen på en
pingvin, som funktion af dens vægt.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">palmerpenguins</span><span class="op">)</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/regression-rendered-unnamed-chunk-8-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">flipper_length_mm</span><span class="op">~</span><span class="va">body_mass_g</span>, data <span class="op">=</span> <span class="va">penguins</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="testing-the-assumptions">Testing the assumptions<a class="anchor" aria-label="anchor" href="#testing-the-assumptions"></a>
<a class="anchor" aria-label="anchor" href="#testing-the-assumptions"></a>
</h2>
<hr class="half-width">
<p>There are certain assumptions that needs to be met in order to use a
linear model.</p>
<ol style="list-style-type: decimal">
<li><p>There should be a linear connection between the dependent and
independent variable. We test that by comparing the observed values with
the predicted values (the straight line).</p></li>
<li><p>Independence. The observations needs to be independent. If one
measurement influences another measurement, we are not allowed to use a
linear model.</p></li>
<li><p>Normality of residuals. The residuals must be normally
distributed.</p></li>
</ol>
<p>There exist specific tests for the first two assumptions, but in
general we know our data well enough to determine if they are fulfilled.
The third assumptions can be tested using a <code>qqplot</code>. We
begin by extracting the residuals from our model:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">residuals</span> <span class="op">&lt;-</span> <span class="fu">residuals</span><span class="op">(</span><span class="va">linear_model</span><span class="op">)</span></span></code></pre>
</div>
<p>And then plotting them:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">qqnorm</span><span class="op">(</span><span class="va">residuals</span><span class="op">)</span></span>
<span><span class="fu">qqline</span><span class="op">(</span><span class="va">residuals</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/regression-rendered-unnamed-chunk-10-1.png" style="display: block; margin: auto;" class="figure">
The points should be (close to be) on the straight line in the plot. In
this case they are close enough.</p>
<p>This is also a handy way to test if our data is normally
distributed.</p>
<p>Øvelse - test om resdiualerne i pingvinmodellen er normalfordelte</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_residuals</span> <span class="op">&lt;-</span> <span class="fu">residuals</span><span class="op">(</span><span class="va">penguin_model</span><span class="op">)</span></span>
<span><span class="fu">qqnorm</span><span class="op">(</span><span class="va">penguin_residuals</span><span class="op">)</span></span>
<span><span class="fu">qqline</span><span class="op">(</span><span class="va">penguin_residuals</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/regression-rendered-unnamed-chunk-11-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-regression2"><p>Content from <a href="regression2.html">Non-linear regression</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/regression2.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Vi taler stadig om at det er et kontinuerligt y.</p>
<p>lm(y~x:z + x*z)</p>
<p>summary, fortolkning af parametre og koefficienter.</p>
</section><section><h2 class="section-heading" id="predict">predict()<a class="anchor" aria-label="anchor" href="#predict"></a>
<a class="anchor" aria-label="anchor" href="#predict"></a>
</h2>
<hr class="half-width">
<p>som hjælp til at forstå parametrene.</p>
</section><section><h2 class="section-heading" id="polynomisk">polynomisk<a class="anchor" aria-label="anchor" href="#polynomisk"></a>
<a class="anchor" aria-label="anchor" href="#polynomisk"></a>
</h2>
<hr class="half-width">
<p>Og hvorfor vi en gang imellem skal bruge I()</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>De her ikke lineære ting er i virkeligheden lineære modeller.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-regression3"><p>Content from <a href="regression3.html">Logistisk regression</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/regression3.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="logistisk-regression">Logistisk Regression<a class="anchor" aria-label="anchor" href="#logistisk-regression"></a>
<a class="anchor" aria-label="anchor" href="#logistisk-regression"></a>
</h2>
<hr class="half-width">
<p>Hvad nu hvis den afhængige variabel ikke er kontinuært, men
kategorisk? Altså at vi forsøger at forudsige eksempelvis “syg/rask”,
baseret på en række kontinuærte uafhængige variable.</p>
<p>Først binær, vi har en række variable, baseret på dem forsøger vi at
forudsige om udfaldet er det ene eller det andet af to mulige
udfald.</p>
<div class="section level3">
<h3 id="formel-for-logistisk-regression">Formel for Logistisk Regression<a class="anchor" aria-label="anchor" href="#formel-for-logistisk-regression"></a>
</h3>
<p>Logistisk regressionsmodel kan matematisk beskrives ved:</p>
<p><span class="math display">\[\text{logit}(p) = \log\left(\frac{p}{1 -
p}\right) = \beta_0 + \beta_1X_1 + \beta_2X_2 + \ldots +
\beta_kX_k\]</span></p>
<p>hvor:</p>
<p><span class="math inline">\(p\)</span> er sandsynligheden for, at den
afhængige variabel <span class="math inline">\(Y\)</span> tager værdien
1.</p>
<p><span class="math inline">\(\beta_0, \beta_1, \ldots,
\beta_k\)</span> er koefficienter, som modellen estimerer.</p>
<p>*<span class="math inline">\(X_1, X_2, \ldots, X_k\)</span> er de
uafhængige variabler.</p>
<p>Funktionen ser således ud:
<img src="../fig/regression3-rendered-logit_func_plot-1.png" style="display: block; margin: auto;" class="figure"></p>
<p>Og pointen er altså at vi hælder noget input ind, og så får vi langt
henadvejen enten 0 eller 1 ud. Der vil stort set altid være en gråzone,
hvor sandsynligheden for et bestemt udfald er en del større end 0, men
også en del mindre end 1. Vi vil ofte vælge at sætte grænsen ved 50%,
men vær opmærksom på, at det betyder at vi får et udfald der er 0,
selvom sandsynligheden for at svaret er 1 i virkeligheden er 49%</p>
</div>
</section><div class="section level1">
<h1 id="fit-modellen">fit modellen<a class="anchor" aria-label="anchor" href="#fit-modellen"></a>
</h1>
<p>Alt det er udemærket. Måden vi i praksis gør det på er ved:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">glm</span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">x1</span><span class="op">+</span><span class="va">x2</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level1">
<h1 id="koefficienter-og-p-værdier">koefficienter og p-værdier<a class="anchor" aria-label="anchor" href="#koefficienter-og-p-v%C3%A6rdier"></a>
</h1>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level1">
<h1 id="predict">predict<a class="anchor" aria-label="anchor" href="#predict"></a>
</h1>
<p>new_data &lt;- data.frame(x1 = c(1, 2, 3), x2 = c(4, 5, 6))
predict(model, newdata = new_data, type = “response”)</p>
<div class="section level2">
<h2 id="andre">andre<a class="anchor" aria-label="anchor" href="#andre"></a>
</h2>
<p>glm kan andet. Det kommer vi ikke ind på.</p>
<div class="section level3">
<h3 id="probit">Probit?<a class="anchor" aria-label="anchor" href="#probit"></a>
</h3>
<p>det er link funktionen der styrer det. Vi har jo en sandsynlighed -
og den går ffra 0 til 1. Hvis vi skal fitte det til en model, skal
skalaen være uendelig. Den tranformation foretages af
linkfunktionen.</p>
<p>Normalt bruger vi logitfunktionen.</p>
<p>Probit er når vi bruger den kumulative fordelingsfunktion for
normalfordelingen. Den er populær når man antager at der ligger en
underliggende normalitet i respons. Eksempelvis i reaktion på dosis i
toxikologi.</p>
<p>Der er andre.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div>
</div></section><section id="aio-regression4"><p>Content from <a href="regression4.html">multinomiel</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/regression4.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Og hvis vi har mere end to mulige kategoriske udfald vi vil
forudsige?</p>
<p>library(nnet)</p>
<p>multinom(y ~ x1 + x2 + … + xp, data = data)</p>
<p>Her skal vi nok også have fat på predict for at få hjælp til at
fortolke outputtet.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-diagramtest"><p>Content from <a href="diagramtest.html">diagramtest</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/diagramtest.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><a href="https://github.com/mermaid-js/mermaid#readme" class="external-link uri">https://github.com/mermaid-js/mermaid#readme</a> ##
Introduction</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">DiagrammeR</span><span class="op">)</span></span>
<span><span class="fu">mermaid</span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">graph LR</span></span>
<span><span class="st">    A--&gt;B</span></span>
<span><span class="st">"</span><span class="op">)</span></span></code></pre>
</div>
<div id="htmlwidget-0ce0c998f36123fc0144" class="DiagrammeR html-widget html-fill-item" style="width:504px;height:504px;">

</div>
<script type="application/json" data-for="htmlwidget-0ce0c998f36123fc0144">{"x":{"diagram":"\ngraph LR\n    A-->B\n"},"evals":[],"jsHooks":[]}</script><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div></section><section id="aio-clt"><p>Content from <a href="clt.html">Central Limit Theorem</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/clt.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>An important phenomenon working with data is the “Central Limit
Theorem”.</p>
<p>It states that, if we take a lot of samples from a distribution, the
mean of those samples will approximate the normal distribution, even
though the distribution in it self is not normally distributed.</p>
<p>The uniform distribution is not normally distributed. Without any
additional arguments, it will produce x random values between 0 and 1,
with equal probability for all possible values. Here we get 100 random
values, and plot a histogram of them:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">random_numbers</span> <span class="op">&lt;-</span> <span class="fu">runif</span><span class="op">(</span><span class="fl">100</span><span class="op">)</span> </span>
<span><span class="fu">hist</span><span class="op">(</span><span class="va">random_numbers</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/clt-rendered-unnamed-chunk-1-1.png" style="display: block; margin: auto;" class="figure">
This is definitely not normally distributed.</p>
<p>The mean of these random numbers is:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">random_numbers</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.4826714</code></pre>
</div>
<p>The important point of the Central Limit Theorem is, that if we take
a large number of random samples, and calculate the mean of each of
these samples, the means will be normally distributed.</p>
<p>We could also have found the mean of the 100 random numbers like
this:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="fu">runif</span><span class="op">(</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.502151</code></pre>
</div>
<p>And we can use the <code>replicate()</code> function to repeat that
calculation several times, in this case 1000 times:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repeated_means</span> <span class="op">&lt;-</span> <span class="fu">replicate</span><span class="op">(</span><span class="fl">1000</span>, <span class="fu">mean</span><span class="op">(</span><span class="fu">runif</span><span class="op">(</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>When we plot the histogram of these 1000 means of 100 random numbers,
we get this result:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">hist</span><span class="op">(</span><span class="va">repeated_means</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/clt-rendered-unnamed-chunk-5-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The histogram looks quite normally distributed, even though the
distribution from which we drew the random samples were not.</p>
<p>This is the essense of the Central Limit Theorem. The distrubution of
the means of our samples will approximate the normal distribution,
regardless of the underlying distribution.</p>
<p>Because of this, we are able to treat the mean (and a number of other
statistical descriptors), as normally distributed - <em>and</em> use the
properties we know the normal distribution to have to work with
them.</p>
<p>The math required for proving this theorem is relatively complicated,
but can be found in the (extra material)[<a href="https://kubdatalab.github.io/R-toolbox/CLT.html" class="external-link uri">https://kubdatalab.github.io/R-toolbox/CLT.html</a>] on this
page. Note that the proof is in Danish.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The mean of a sample can be treated as if it is normally
distributed</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-multiple-regression"><p>Content from <a href="multiple-regression.html">Multiple linear regression</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/multiple-regression.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-opgaver"><p>Content from <a href="opgaver.html">opgaver</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/opgaver.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">gt</span><span class="op">)</span></span></code></pre>
</div>
<section><h2 class="section-heading" id="opgave-ang--mean-og-spredning">Opgave ang. mean og spredning<a class="anchor" aria-label="anchor" href="#opgave-ang.-mean-og-spredning"></a>
<a class="anchor" aria-label="anchor" href="#opgave-ang--mean-og-spredning"></a>
</h2>
<hr class="half-width">
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge1"></a>
</h3>
<div class="callout-content">
Haemoglobin levels, g/100 ml for 70 women, raw data with highest and
lowest values set as bold: <!--html_preserve-->
<div id="hmlbwudibc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hmlbwudibc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hmlbwudibc thead, #hmlbwudibc tbody, #hmlbwudibc tfoot, #hmlbwudibc tr, #hmlbwudibc td, #hmlbwudibc th {
  border-style: none;
}

#hmlbwudibc p {
  margin: 0;
  padding: 0;
}

#hmlbwudibc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hmlbwudibc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hmlbwudibc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hmlbwudibc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hmlbwudibc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hmlbwudibc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hmlbwudibc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hmlbwudibc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hmlbwudibc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hmlbwudibc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hmlbwudibc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hmlbwudibc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hmlbwudibc .gt_spanner_row {
  border-bottom-style: hidden;
}

#hmlbwudibc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hmlbwudibc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hmlbwudibc .gt_from_md > :first-child {
  margin-top: 0;
}

#hmlbwudibc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hmlbwudibc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hmlbwudibc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hmlbwudibc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hmlbwudibc .gt_row_group_first td {
  border-top-width: 2px;
}

#hmlbwudibc .gt_row_group_first th {
  border-top-width: 2px;
}

#hmlbwudibc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hmlbwudibc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hmlbwudibc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hmlbwudibc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hmlbwudibc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hmlbwudibc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hmlbwudibc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hmlbwudibc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hmlbwudibc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hmlbwudibc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hmlbwudibc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hmlbwudibc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hmlbwudibc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hmlbwudibc .gt_left {
  text-align: left;
}

#hmlbwudibc .gt_center {
  text-align: center;
}

#hmlbwudibc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hmlbwudibc .gt_font_normal {
  font-weight: normal;
}

#hmlbwudibc .gt_font_bold {
  font-weight: bold;
}

#hmlbwudibc .gt_font_italic {
  font-style: italic;
}

#hmlbwudibc .gt_super {
  font-size: 65%;
}

#hmlbwudibc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hmlbwudibc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hmlbwudibc .gt_indent_1 {
  text-indent: 5px;
}

#hmlbwudibc .gt_indent_2 {
  text-indent: 10px;
}

#hmlbwudibc .gt_indent_3 {
  text-indent: 15px;
}

#hmlbwudibc .gt_indent_4 {
  text-indent: 20px;
}

#hmlbwudibc .gt_indent_5 {
  text-indent: 25px;
}

#hmlbwudibc .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#hmlbwudibc div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id>
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id>
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id>
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id>
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id>
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id>
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id>
</th>
</tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="V1" class="gt_row gt_right">
14.8
</td>
<td headers="V2" class="gt_row gt_right">
13.0
</td>
<td headers="V3" class="gt_row gt_right">
12.2
</td>
<td headers="V4" class="gt_row gt_right">
11.6
</td>
<td headers="V5" class="gt_row gt_right">
12.1
</td>
<td headers="V6" class="gt_row gt_right">
10.4
</td>
<td headers="V7" class="gt_row gt_right">
10.6
</td>
</tr>
<tr>
<td headers="V1" class="gt_row gt_right">
12.0
</td>
<td headers="V2" class="gt_row gt_right">
11.6
</td>
<td headers="V3" class="gt_row gt_right">
9.9
</td>
<td headers="V4" class="gt_row gt_right">
10.7
</td>
<td headers="V5" class="gt_row gt_right">
12.0
</td>
<td headers="V6" class="gt_row gt_right">
12.7
</td>
<td headers="V7" class="gt_row gt_right">
9.4
</td>
</tr>
<tr>
<td headers="V1" class="gt_row gt_right">
12.1
</td>
<td headers="V2" class="gt_row gt_right">
12.9
</td>
<td headers="V3" class="gt_row gt_right">
11.9
</td>
<td headers="V4" class="gt_row gt_right">
13.8
</td>
<td headers="V5" class="gt_row gt_right">
11.0
</td>
<td headers="V6" class="gt_row gt_right">
11.9
</td>
<td headers="V7" class="gt_row gt_right">
9.8
</td>
</tr>
<tr>
<td headers="V1" class="gt_row gt_right">
12.3
</td>
<td headers="V2" class="gt_row gt_right">
11.5
</td>
<td headers="V3" class="gt_row gt_right">
12.6
</td>
<td headers="V4" class="gt_row gt_right">
11.5
</td>
<td headers="V5" class="gt_row gt_right">
10.7
</td>
<td headers="V6" class="gt_row gt_right">
9.7
</td>
<td headers="V7" class="gt_row gt_right" style="font-weight: bold;">
8.7
</td>
</tr>
<tr>
<td headers="V1" class="gt_row gt_right">
9.2
</td>
<td headers="V2" class="gt_row gt_right">
12.0
</td>
<td headers="V3" class="gt_row gt_right">
12.7
</td>
<td headers="V4" class="gt_row gt_right">
12.2
</td>
<td headers="V5" class="gt_row gt_right">
10.3
</td>
<td headers="V6" class="gt_row gt_right">
13.2
</td>
<td headers="V7" class="gt_row gt_right">
13.2
</td>
</tr>
<tr>
<td headers="V1" class="gt_row gt_right">
12.0
</td>
<td headers="V2" class="gt_row gt_right">
11.0
</td>
<td headers="V3" class="gt_row gt_right">
12.4
</td>
<td headers="V4" class="gt_row gt_right">
12.7
</td>
<td headers="V5" class="gt_row gt_right">
12.8
</td>
<td headers="V6" class="gt_row gt_right">
12.1
</td>
<td headers="V7" class="gt_row gt_right">
11.8
</td>
</tr>
<tr>
<td headers="V1" class="gt_row gt_right">
11.8
</td>
<td headers="V2" class="gt_row gt_right">
13.3
</td>
<td headers="V3" class="gt_row gt_right">
11.3
</td>
<td headers="V4" class="gt_row gt_right">
10.7
</td>
<td headers="V5" class="gt_row gt_right">
13.3
</td>
<td headers="V6" class="gt_row gt_right">
11.5
</td>
<td headers="V7" class="gt_row gt_right">
13.4
</td>
</tr>
<tr>
<td headers="V1" class="gt_row gt_right">
12.9
</td>
<td headers="V2" class="gt_row gt_right">
13.4
</td>
<td headers="V3" class="gt_row gt_right">
14.4
</td>
<td headers="V4" class="gt_row gt_right">
14.8
</td>
<td headers="V5" class="gt_row gt_right">
10.6
</td>
<td headers="V6" class="gt_row gt_right">
9.4
</td>
<td headers="V7" class="gt_row gt_right">
13.4
</td>
</tr>
<tr>
<td headers="V1" class="gt_row gt_right">
10.8
</td>
<td headers="V2" class="gt_row gt_right">
11.3
</td>
<td headers="V3" class="gt_row gt_right">
11.3
</td>
<td headers="V4" class="gt_row gt_right">
11.6
</td>
<td headers="V5" class="gt_row gt_right">
12.0
</td>
<td headers="V6" class="gt_row gt_right">
12.1
</td>
<td headers="V7" class="gt_row gt_right">
14.4
</td>
</tr>
<tr>
<td headers="V1" class="gt_row gt_right">
13.8
</td>
<td headers="V2" class="gt_row gt_right">
11.8
</td>
<td headers="V3" class="gt_row gt_right">
14.2
</td>
<td headers="V4" class="gt_row gt_right">
13.7
</td>
<td headers="V5" class="gt_row gt_right">
14.1
</td>
<td headers="V6" class="gt_row gt_right">
10.6
</td>
<td headers="V7" class="gt_row gt_right">
13.3
</td>
</tr>
</tbody>
</table>
</div>
<!--/html_preserve-->
<p>How would we describe this dataset?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>A reasonable place to start would be reporting the minimum: 8.7 and
maximum: 14.8, and, by implication, the range: 8.7, 14.8</p>
<p>Those are easy to find in this table, using the <code>min()</code>,
<code>max()´, and</code>range()` functions respectively.</p>
<p>The mean, or average would also be relevant. In this case it is
12.</p>
<p>Similarly the median: 12</p>
<p>It would also be relevant to calculate a measure of how spread out
the data is. Do the observations cluster close to the mean, or are they
more equally distributed between the minimum and the maximum?</p>
<p>The standard deviataion: 1.3965767 and variance: 1.9504265 describes
this, and can be found using the functions <code>sd()</code> and
<code>var()</code> respectively.</p>
</div>
</div>
</div>
</div>
<div id="referenceintervaller" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="referenceintervaller" class="callout-inner">
<h3 class="callout-title">referenceintervaller<a class="anchor" aria-label="anchor" href="#referenceintervaller"></a>
</h3>
<div class="callout-content">
<p>You are given the following values, originating from the measured
speed of bikes in a bikelane, measured in km/h. Assuming the speed is
normally distributed, calculate an interval that contains 95% of the
observed values.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     mean       sd
1 24.7839 8.509639</code></pre>
</div>
<p>Mean +/- 1.96 gange sd.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="fl">24.7839</span> <span class="op">-</span> <span class="fl">1.96</span><span class="op">*</span><span class="fl">8.509639</span>, <span class="fl">24.7839</span> <span class="op">+</span> <span class="fl">1.96</span><span class="op">*</span><span class="fl">8.509639</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  8.105008 41.462792</code></pre>
</div>
<p>eller mere elegant:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">24.7839</span> <span class="op">+</span> <span class="fu">c</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">1.96</span><span class="op">*</span><span class="fl">8.509639</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  8.105008 41.462792</code></pre>
</div>
<p>95% af hastighederne målt på cykelstien ligger mellem 8.1 og 41.5
km/t. Og - vi kan antage, at denne fordeling også gælder i
baggrundspopulationen, dvs alle cykler på cykelstien, ikke kun dem vi
har målt.</p>
<div class="section level2">
<h2 id="interval-på-haem">interval på haem<a class="anchor" aria-label="anchor" href="#interval-p%C3%A5-haem"></a>
</h2>
<p>Vi fandt tidligere at middelværdien af hæmoglobin var 12.0028571 og
standardafvigelsen var 1.3965767. Antallet af observationer i stikprøven
var 70. Beregn “standard error of the mean, SEM”, for og 95%
konfidensintervallet for det sande gennemsnit i
baggrundspopulationen.</p>
<p>NB erstat de beregnede tal her, med selve tallene.</p>
<p>Løsning:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SEM</span> <span class="op">&lt;-</span> <span class="fu">sd</span><span class="op">(</span><span class="fu">unlist</span><span class="op">(</span><span class="va">haem</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fu">sqrt</span><span class="op">(</span><span class="fu">length</span><span class="op">(</span><span class="fu">unlist</span><span class="op">(</span><span class="va">haem</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="fu">unlist</span><span class="op">(</span><span class="va">haem</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">c</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">1.96</span><span class="op">*</span><span class="va">SEM</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 11.67569 12.33003</code></pre>
</div>
<p>Dette interval indeholder med 95% sandsynlighed gennemsnittet <span class="math inline">\(\mu\)</span> i baggrundspopulationen. Eller, lidt
mere upræcist, der er 95% sandsynlighed for at baggrundspopulationens
gennemsnit <span class="math inline">\(\mu\)</span> er indehold i
intervallet.</p>
</div>
<div class="section level2">
<h2 id="sem-og-hypotesetest">SEM og hypotesetest<a class="anchor" aria-label="anchor" href="#sem-og-hypotesetest"></a>
</h2>
<p>Vi fortsætter med haem dataene. :::::::::::::::::::::::: challenge
Kan vi med rimelighed antage at baggrundsværdien, den “sande”
middelværdi for alle kvinder, er 12. Eller, Hvad er sandsynligheden for
at et gennemsnit på 12.0028571 er trukket fra en population med et
gennemsnit på 12, og en stikprøvespredning på SEM = [hvad den nu
er]?</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>1 sample t-test: t = (xbar - mu)/sem. Vi forestiller os at vi trækker
fra en fordeling med mu = 12, og at spredningen af vores
stikprøvegennemsnit xbar er SEM. så beregner vi hvor mange SEM vi skal
gå ud af x-aksen, for tilfældigt at få vores stikprøve gennemsnit. Skal
man for langt ud er t/Z stor, og derfor er det usandsynligt.</p>
<p>-&gt; normalfordelingsemnet - hvis middelværdien er det her, og
standardafvigelsen er det her, hvad er så sandsynligheden for at se
denne værdi?</p>
</div>
</div>
</div>
</div>
<div id="endnu-en-hypotesetest-øvelse" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="endnu-en-hypotesetest-øvelse" class="callout-inner">
<h3 class="callout-title">endnu en hypotesetest øvelse<a class="anchor" aria-label="anchor" href="#endnu-en-hypotesetest-%C3%B8velse"></a>
</h3>
<div class="callout-content">
<p>i [] kan vi med fordel ændre ting. :::::::::::::::::::::::: challenge
For en given population ved vi, at fordelingen af [hæmoglobinniveauet]
er normalfordelt med middelværdi <span class="math inline">\(\mu\)</span> = [13.3] g/100ml og en spredning på
<span class="math inline">\(\sigma\)</span> = 1.12 g/100 ml.</p>
<p>Nu udtages der stikprøver af størrelse n fra populationen, og for
hver af dem beregnes stikprøvegennemsnittet. Fordelingen af disse
gennemsnit - hvis der udtages uendeligt mange stikprøver - er
normalfordelt med middelværdien <span class="math inline">\(\mu\)</span>.</p>
<p>a- hvad er spredningen i fordelingen af stikprøvegennemsnittene b -
Hvis vi sætter n til [15] - beregn da proportionen af stikprøver hvis
gennemsnit vil ligge mellem [13.0] og [13.6] g/100 ml c - hvor stor skal
n være, hvis 95% af de udtagne stikprøver skal have et gennemsnit der
ligger mellem <span class="math inline">\(\mu\)</span> - 0.2 og <span class="math inline">\(\mu\)</span>+0.2</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>a - det er også kendt som “standard error of the mean, SEM” eller
standardfejlen. Den finder vi ved at dividere <span class="math inline">\(\sigma\)</span> med kvadratroden af stikprøve
størrelsen, n. b - nu sætter vi n = 15, og kan beregne SEM. så beregner
vi z-værdien for 13.0 - det er 13.0 - 13.3 divideret med SEM = ca -1.04
Og for 13.6 det er 13.6 - 13.3 divideret med SEM = cirka 1.04 (bemærk
symmetrien). Nu skal vi så finde sandsynligheden for at se en Z der
ligger mellem disse to værdier. P(Z≤1.04)≈0.8508 P(Z≤−1.04)≈0.1492
0.8508−0.1492=0.7016 Så proportionen af stikprøver hvis gennemsnit
ligger mellem 13.0 og 13.6 er ca 70.16%</p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Hvis stikprøve gennemsnittet med 95% sandsynlighed ligger mellem +/-
0.2, er grænserne 13.1 og 13.5. 95% z-værdien er 1.96. Derfor skal
standardfejlen have en størrelse hvor intervallet +/- 0.2 svarer til +/-
1.96*SEM. dvs 0.2 = 1.96 = sigma/sqrt(n). Løs for n. </li>
</ol>
</div>
</div>
</div>
</div>
<div id="en-eksamensopgave" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="en-eksamensopgave" class="callout-inner">
<h3 class="callout-title">en eksamensopgave<a class="anchor" aria-label="anchor" href="#en-eksamensopgave"></a>
</h3>
<div class="callout-content">
<p>Reformuleret så vi må bruge den. :::::::::::::::::::::::: challenge
Vi antaer at fødselsvægten for børn født indenfor termine, med
gestationsalder 40 uger, er approximativt <em>normalfordelt</em> med
middelværdi 3400 gram og spredning 420 gram. Vi kan antage at disse
værdier er populationsværdier. Der ønskes udført et studie for at afgøre
om fødselsvægten for børn født indenfor termin af mødre,´ der røg gennem
hele graviditete, har samme middelværdi (<span class="math inline">\(\mu\)</span>).</p>
<ol style="list-style-type: lower-alpha">
<li>Antag at der indsamles n observationer af fødselsvægten som
beskrevet ovenfor. Hvilken test ville du anvende, hvis det ønskes
undersøgt om <span class="math inline">\(\mu\)</span> = 3400? Angiv
envidere den konkrete teststørrelse som du ville beregne baseret på de n
observationer, hvor du kan bruge passende notation.
:::::::::::::::::::::::: solution svar. Vi kan udføre en one-sample
t-test. Test-størrelsen er (Xbar - 3500)/SEM.</li>
</ol>
<p>Vi tester hyootesen at fødselsvægten er trukket fra en fordeling med
<span class="math inline">\(\mu\)</span> = 3400, dvs hvor sandsynligt er
det at trække gennemsnittet , når vi kender fordelingen af stikprøve
gennemsnittet.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="parret-t-test---eksamensopgave">Parret t-test - eksamensopgave<a class="anchor" aria-label="anchor" href="#parret-t-test---eksamensopgave"></a>
<a class="anchor" aria-label="anchor" href="#parret-t-test---eksamensopgave"></a>
</h2>
<hr class="half-width">
<p>Lettere omformuleret</p>
<p>patienter med diverticulitis kan have glæde af fiberrig kost. Vi ser
her på et studie af transittiden gennem fordøjelseskanalen ved to mulige
diæter (behandlinger). En stikprøve af [60] patienter med diverticulitis
i alderen [20-44] år blev tilfældigt udvalgt, og fik begge behandlinger
A og B, over to perioder, med en behandling i en given periode. For hver
patient under hver behandling, blev transittiden gennem
fordøjelseskanalen målt. Disse tider er angivet nednefor for de første 6
patienter for hver af de to behandlinger. Kolonnen Diff indeholder
differencerne. Der er yderligere angivet nogle summariske
størrelser.</p>
<p>Undersøg om der er signifikant forskel på behandling A og B hvad
angår transittiden?</p>
<p>A B Diff 92.0 63.90 92.4 8.81 57.3 87.8 58.5 92.40 69.9 98.7 63.8
109.00</p>
<p>mean(A) 68.59 mean(B) 81.18 mean(diff) -12.59 sd(A) 13.81 sd(B) 15.39
sd(diff) 14.16</p>
<p>Her er der tale om en parret situation - stikprøverne er ikke
uafhængige. Så vi laver en parret t-test - vi brug diff kolonnen til
det.</p>
<p>t = 12.59/(14.16/sqrt(60)) = 6.9</p>
<p>Og det er klart signifikant på et 5% niveau. Så signifikant lavere
transittid under behandling A sammenlignet med behandling B.</p>
</section><section><h2 class="section-heading" id="spørgsmål-til-responsvariabel-og-forklarende-variabel-">spørgsmål til responsvariabel og forklarende variabel.<a class="anchor" aria-label="anchor" href="#sp%C3%B8rgsm%C3%A5l-til-responsvariabel-og-forklarende-variabel."></a>
<a class="anchor" aria-label="anchor" href="#sp%C3%B8rgsm%C3%A5l-til-responsvariabel-og-forklarende-variabel-"></a>
</h2>
<hr class="half-width">
<p>Et scattetplot mellem højde (x) og vægt (y). Hvad er forklarende
variabel? hvad er responsvariablen? Er den forklarende variabel
kategorisk eller kontinuert?</p>
</section><section><h2 class="section-heading" id="eksamensopgave-om-lin-reg">eksamensopgave om lin reg<a class="anchor" aria-label="anchor" href="#eksamensopgave-om-lin-reg"></a>
<a class="anchor" aria-label="anchor" href="#eksamensopgave-om-lin-reg"></a>
</h2>
<hr class="half-width">
<p>i forbindelse med en undersgøesle af vitamin D i Europa har man i
fire europæiske lande (Danmark, Polen, Finland og irland) foretaget
må¨linger på en række personer, både mænd og kvinder, som unge piger. Vi
skal her beskæftige os med et udpluk af data vedrørende kvinderne fra
Danmark og Polen, og undersøge hvor stor forskel der er mellem de to
lande, samt om en evt forskel helt eller delvsi kan forklares udfra
forskelligheder i andre variable, såsom body mass index. Der indgrå 65
danske kvinder og 53 polske kvinder i studiet. Der er følgedne
variable:</p>
<p>dk - indikator for at kvinden er dansk (1 dansk, 0 ikke dansk. )
vitd: vitamin D i en blodprøve nmol/l bmi: body mass index</p>
<p>her følger de første 6 dataalinier i datasættet samt nogle
seskriptive størrelser:</p>
<p>dk vitd mbi 1 28.5 26.177 1 32.9 25.155 1 60.3 23.081 1 50.5 25.200 1
15.0 25.310 1 47.8 23.904</p>
<p>sd(bmi[dk==0]) 4.20162 sd(bmi[dk==1]) 4.308396</p>
<p>mean(bmi[dk==0]) 26.53475 mean(bmi[dk==1]) 28.94008</p>
<p>model0 = lm(vitd~bmi, data=sol_data) summary(model0) Coefficients
estimate std. error t value Pr(&gt;|t|) (intercept) 67.5714 11.1160
6.079 1.59e-08 **<em> bmi -1.0212 0.3942 -2.591 0.0108 </em></p>
<p>Fortolk parameterestimaterne fra model0 og konkluder på baggrund af
analysen (husk også angivelse af statistisk model samt responsvariabel
og forklarende variable)?</p>
<p>svar - simpel lineær regression. Responsvariabel er vitamin d og BMI
som forklarende kontinuært variabel. vitd = + BMI + </p>
<p>med estimeret hældningskoefficient -1.02, se = 0.39, p = 0.01, dvs
signifikant. vitamin d falder i gennemsnit med 1 pr BMI.</p>
</section><section><h2 class="section-heading" id="endnu-en-eksamensopgave">Endnu en eksamensopgave<a class="anchor" aria-label="anchor" href="#endnu-en-eksamensopgave"></a>
<a class="anchor" aria-label="anchor" href="#endnu-en-eksamensopgave"></a>
</h2>
<hr class="half-width">
<p>Den R-kode er spørges til i (d) giver nedenstående resultat, hvor
dele af udskriften er redigeret bort.</p>
<p>Coefficients: Estimate Std. Erro t value Pr(&gt;|t|) (Intercept)
50.3309 11.4228 4.406 2.37e-05 *** factor(dk)1 13.1276 3.4108 bmi
-0.6140 0.3873</p>
<p>Konkluder på baggrund af den sidst udførte analyse ssamt eventuelle
supplerende beregninger. Herunder ønskes betydningen af de to
forklarende variable belyst og en sammenligning med de tidligere udførte
analyser ønskes også foretaget.</p>
<p>Svar: Dette er en multipel lineær regression, da vi har flere
variable. OBS factor() betyder at variablen er kategorisk, dvs enten 0
eller 1. -&gt; ikke vigtigt i denne kontekst.</p>
<p>Vi skal kunne udregne de mangledne tal.</p>
<p>factor(dk): 13.1276/3.4 = 3.86, p = 0.0001 factor(BMI):
-0.6140/0.3873 = -1.56, p =0.11</p>
</section><section><h2 class="section-heading" id="og-endnu-en-eksamensopgave">Og endnu en eksamensopgave<a class="anchor" aria-label="anchor" href="#og-endnu-en-eksamensopgave"></a>
<a class="anchor" aria-label="anchor" href="#og-endnu-en-eksamensopgave"></a>
</h2>
<hr class="half-width">
<p>Du får nedenståenede model. Modellen er multipel lineær regression,
derfor introduceres 2 nye regler til prædiktion. 1. hvis variable er
factor() indikerer dette ekse om patienten har fået halothane eller ej,
dvs den er kategorisk og iondgår i prædiktion som enten 1 eller 0 gange
estimatet 2. I multipel lineær regression adderes hvert led og dens
værdi på i regnestykket, dvs. intercept + leg<em>0.79 +
factor(drug)</em>7.41 = prædikteret værdi.</p>
<p>model2 = lm(arm~leg+ factor(drug)) summary(model2) coefficients:
estimate std. error t value Pr(&gt;|t|) (intercept) -0,02109 9,83373
-0,002 0,9983 leg 0,79064 0,09010 8,775 3,84e-10 ***
factor(drug)halothane 7,40890 3,78385 1,958 0,0587 .</p>
<p>Prædikter bloddtrykket i armen for en patient der har et blodtryk i
benet på 110, og som har fået anæstesitypen Halothane. Lav en
tilsvarende beregning, men nu hvor blodtrykket i benet er stat til 100.
Beregn forskellen på disse to prædiktioner, og angiv et dertil hørende
95% konfidensinterval.</p>
<p>Prediktioner: -0.021 + 0.791<em>110 + 7.41 = 94.4 og -0.021 +
0.791</em>100 + 7.41 = 86.49</p>
<p>Forskel = 0.791*10 = 7.91</p>
<p>95% KI = 10.(0.791 +/- 1.96*0.08) = 6.1 9.7</p>
<p>Hvorfor skal usikkerheden også med? Det må vi godt have en pædagogisk
forklaring på.</p>
</section><section><h2 class="section-heading" id="nu-er-vi-nået-til-modul-3">Nu er vi nået til modul 3<a class="anchor" aria-label="anchor" href="#nu-er-vi-n%C3%A5et-til-modul-3"></a>
<a class="anchor" aria-label="anchor" href="#nu-er-vi-n%C3%A5et-til-modul-3"></a>
</h2>
<hr class="half-width"></section><section><h2 class="section-heading" id="eksamensopgave">Eksamensopgave<a class="anchor" aria-label="anchor" href="#eksamensopgave"></a>
<a class="anchor" aria-label="anchor" href="#eksamensopgave"></a>
</h2>
<hr class="half-width">
<p>Vi skal se på data vedrørende lungefunktion og eksponering for
rygning. I data er der information for 654 børn vedørende: idnr:
løbenummer for barnet gender: Barnets køn (D: dreng, P: pige) Alder:
Barnets alder (år) Hoejde: Barnets højde (cm) expo: Barnets eksponering
for rygning i hjemmet (0 nej, 1 ja) lungefkt. Lungefunktionsmål
(liter)</p>
<p>[expo==0] vælger de børn ud, hvor expo er lig med nul og tilsvarende
med [expo==1].</p>
<ol style="list-style-type: lower-alpha">
<li>Undersøg om der er en sammenhæng mellem lungefunktion og eksponering
for rygning, når der ikke usteres for øvrige forhold. Udfør relevant
analyse og konkluder på baggrund af denne. Overrasker resultaterne af
analysen dig?</li>
</ol>
<p>Her følger de første 6 datalinier i datasætet, samt nogle summariske
regnestørrelser</p>
<p>mean(lungefkt[expo==0]) 2.566143 mean(lungefkt[expo==1]) 3.276862
sd(lungefkt[expo==0]) 0.8505215 sd(lungefkt[expo==1]) 0.7499863
table(expo) 0 1 589 65</p>
<p>svar: 2-sample t-test, for vi sammenligner mellem to samples a) lvar
den approximative t-test: SEM_1 = 0.741/sqrt(65) og sem_0 =
0.850/sqrt(589 og: semdiff = sqrt(sem_^2 + sem_0^2) = 0.0984</p>
<p>dermed: t_app = (3.28-2.57)/0.0984 = 7.23. Som er klart signifikatnt.
p&lt; 0.001. Overraskende at der er højest lungefunktion i den
eksponerede gruppe.</p>
</section><section><h2 class="section-heading" id="eksamensopgave-fortsat">eksamensopgave fortsat<a class="anchor" aria-label="anchor" href="#eksamensopgave-fortsat"></a>
<a class="anchor" aria-label="anchor" href="#eksamensopgave-fortsat"></a>
</h2>
<hr class="half-width">
<p>Vi skal se på data vedrørende lungefunktion og eksponering for
rygning. I data er der information for 654 børn vedørende: idnr:
løbenummer for barnet gender: Barnets køn (D: dreng, P: pige) Alder:
Barnets alder (år) Hoejde: Barnets højde (cm) expo: Barnets eksponering
for rygning i hjemmet (0 nej, 1 ja) lungefkt. Lungefunktionsmål
(liter)</p>
<p>Her følger de første 6 datalinier samt nogle summariske
størrelser:</p>
<p>og mean(lungefkt[expo==0]) 2.566143 mean(lungefkt[expo==1]) 3.276862
sd(lungefkt[expo==0]) 0.8505215 sd(lungefkt[expo==1]) 0.7499863
table(expo) 0 1 589 65</p>
<p>Følgende analysei R udførtes</p>
<p>model1 &lt;- lm(lungefkt~factor(expo)+alder+factor(gender))
summary(model2) coefficients: Estimate std error t value Pr(&gt;|t|)
(Intercept) 0,553044 0,082225 6,726 3,83e-11 <strong><em> factor(expo)1
-0,153974 0,077977 -1,975 0,0487 </em> alder 0,226794 0,007844 28,765
&lt; 2e-16 </strong><em> facotr(gender)P -0,315273 0,042710 -7,384
4.80e-13 </em>**</p>
<p>Hvilken analyse er blevet udført i model2 (husk angivelse af
responsvariabel og forklarende variable). fortolk parameterestimaterne
fra model2 og konkluder på baggrund af analysen (herunder ønskes også
angivesle af 95% konfidensintervaller)</p>
<p>svar: Multipel lineær regressions analyse med lungefunktion som
respons og med expo (kategorisk), alder (kontinuært) og gender
(kategorisk) som forklarende variable. Når alder og gender fastholdes
ser vi, at expo er lige akkurat signifikant og nu med lavere estimeret
lungefunktion i den eksponerede gruppe end i den ueksponerede gruppe.
0.15 l med 95% KI på -0.15 +/- 1.96<em>+0.078 = (-0.30, 0.002). Piger
har lavere estimeret lungefunktion end drengene, -0.32 liter med 95% KI
= -0.32 +/- 1.96</em>0.043 = (-0,40, -0.24) når alder og eksponering
fastholdes. Lungefunktionen stiger i gennemsnit: 0.23 l pr år (for børn
det alderssegment vi har her9, med 95% KI på 0.22 +/- 1.96 *0.0079 =
(0.205,0.235) når gender og expio er fastholdt.</p>
</section><section><h2 class="section-heading" id="eksamensopgave-relativ-risiko">Eksamensopgave Relativ risiko<a class="anchor" aria-label="anchor" href="#eksamensopgave-relativ-risiko"></a>
<a class="anchor" aria-label="anchor" href="#eksamensopgave-relativ-risiko"></a>
</h2>
<hr class="half-width">
<p>nedenstående tabel viser tal fra et studie, der havde til formål at
undersøge effekten af to behandlinger (calcium vs calcitriol) i
behandlingen af postmenopausal osteoporosis. I studiet indgik lidt over
400 patienter og disse blev randomiseret til en af de to behandlinger.
En del patienter fik bivirkninger (tørst, hudproblemer og neurologiske
symptomer) mens studiet stod på, som opsummeret i nedenstående
tabel.</p>
<p>behandling bivirkninger ja bivirkninger nej calcitriol 18 191 Calcium
13 192</p>
<ol style="list-style-type: lower-alpha">
<li>estimer risikoen for bivirkninger under de to behandlinger. Angiv
endvidere forskellen mellem disse og angiv et dertil hørende 95%
sikkerhedsinterval</li>
<li>Beregn den relative risiko (RR) og lav et dertil hørende 95%
sikkerhedsinterval. Fortolk RR og det beregnede sikkerhedsinterval.</li>
</ol>
<p>Svar: p, sandsynlighed for bivirkning a) Calcitriol: p_cl = 18/209 )
8.6% calcium: p_cm = 13/205 = 6.3% (tjek lige at 205 opg 209 er korrekt
summeret.) der skal i øvrigt hat på alle p’erne. 95% SI: p_cl +/-
1.96sqrt(p_cl(1-p_cl)/209) = 4,8% 12,4% p_cm +/-
1.96sqrt(p_cm(1-p_cm)/205) = 4.6% 8.0%</p>
<ol start="2" style="list-style-type: lower-alpha">
<li>RR = p_cl/p_cm = 1.36, logRR = 0.307 se(log(RR)) = sqrt(1/18 - 1/209
+ 1/13-1/205) = 0.35</li>
</ol>
<p>95% SI for log RR 0.307 +/- 1.96*0.35 = -0.38, 0.99 95% SI for RR
e^-0.35, e^0.99 = 0.68, 2.77 indeholder med 95% ssh pop RR</p>
</section><section><h2 class="section-heading" id="eksamensopgave-i-prediktion">Eksamensopgave i prediktion<a class="anchor" aria-label="anchor" href="#eksamensopgave-i-prediktion"></a>
<a class="anchor" aria-label="anchor" href="#eksamensopgave-i-prediktion"></a>
</h2>
<hr class="half-width">
<p>lbwt er fødselsvægt, &gt;2500g (nok snarere mindre end…) Der blev
udført nedenstående analyse (udskriften er redigeret, så en del af den
mangler):</p>
<p>analyse &lt;- glm(lbwt ~ factor(smoke) + age, family = binomial)
summary(analyse) Coefficients: Estimate Std. Error z value Pr(&gt;|z|)
(Intercept) 0.06091 0.75732 0.080 0.9359 factor(smoke)1 0.69185 0.32181
2.150 0.0316 * age -0.04978 0.03197 -1.557</p>
<p>Hvilken analyse er der tale om (angiv også her hvad der er
responsvariabel, og hvordan eventuelle risikofaktorer er inkluderet i
analysen)</p>
<p>svar: Der er tale om en logistisk regressionsanalyse. Respons er den
binære lbwt, og risikofaktorer i analysen er age og smoke. Variablen age
er kontinuert, og inkluderet således i analysen. Variablen smoke er
kategorisk og inkludereet som sådan i analysen.</p>
</section><section><h2 class="section-heading" id="eksamensopgave-i-prediktion-fortsat">Eksamensopgave i prediktion fortsat<a class="anchor" aria-label="anchor" href="#eksamensopgave-i-prediktion-fortsat"></a>
<a class="anchor" aria-label="anchor" href="#eksamensopgave-i-prediktion-fortsat"></a>
</h2>
<hr class="half-width">
<p>Samme output som ovenfor.</p>
<p>2b) beregn odds ratioer (OR), der belyser betydningen af de
inkluderede risikofaktor(er). For hver OR ønskes angivet et dertil
hørende 95% sikkerhedsinterval. Fortolk intervallet. Hvad kan du
konkludere baseret på den udførte analyse og dine egne beregninger.</p>
<p>svar: OR’er beregnes ved at tage exp() til koefficienterne angivet i
Estimate kolonnen.</p>
<p>Smoke: exp(0.692 = 2 age: exp(-0.0498) = 0.95</p>
<p>Rygning under graviditeten øger risikoen for at føde et barn med lav
fødselsvægt kvantificeret ved et OR på 2. Alder er her holdt fast. Øget
alder sænker risikoen. For hvert år falder risikoen givet ved en OR =
0.95. Rygestatus er her holdt fast.</p>
<p>Nu beregnes 95% KI</p>
<p>Smoke;: exp(0.692 +/- 1.96<em>0.322) = (1.06, 3.76) Age:
exp(-0.0498+/- 1.96</em>0.032) = (0.89, 1.01)</p>
<p>Vi ser at alderseffekten ikke er signifikant, mens effekten af
rygning er signifikant på et 5% signifikansniveau. OR svarende til
rygning er estimeret til 2, men værdier fra 1.06 til 3.76 kan ikke
udelukkes (igen ved test på et 5% signifikansniveau)</p>
</section><section><h2 class="section-heading" id="eksamensopgave-i-prediktion-fortsat-igen">Eksamensopgave i prediktion fortsat igen<a class="anchor" aria-label="anchor" href="#eksamensopgave-i-prediktion-fortsat-igen"></a>
<a class="anchor" aria-label="anchor" href="#eksamensopgave-i-prediktion-fortsat-igen"></a>
</h2>
<hr class="half-width">
<p>Samme udskrift som ovenfor</p>
<p>2c() Hvis man vælger at beholde alle risikofaktorer i modellen, angiv
da den prædikterede sandsynligehd for at en kvnide på 20 år, der ikke
har røget under graviditeten, føder et barn med fødselsvægt over 2500
gram (så det er nok lbwt &gt; 2500g alligevel)</p>
<p>svar: Sandsynligheden: P(lbwt = 1 | smoke = 0, age = 20) estimeres
til: e^(0.061-0.0498<em>20)/(1+e^(0.061-0.0498</em>20)) = 0.28</p>
<p>Den efterspurgte sandsynlighed er derfor 1-0.28 ) 0.72 Og da vi
trækker den fra 1, er det sgu noko lbwt &lt; 2500 gram når det kommer
til stykket.</p>
</section><section><h2 class="section-heading" id="repetitionsopgave">repetitionsopgave<a class="anchor" aria-label="anchor" href="#repetitionsopgave"></a>
<a class="anchor" aria-label="anchor" href="#repetitionsopgave"></a>
</h2>
<hr class="half-width">
<p>for i alt 120 kvinder måltes arealet af en bestemt del af hjernen
(forreste del af corpus callosum), idet det ønskedes undersøgt om denne
del har relation til, om kvinderne var højrehåndede (HH) eller
venstrehåndede (VH). Nedenstående tabel viser for de to grupper af
kvinder: antallet (n), det gennemsnitlige areal af den pågældende del af
hjernen (Xbar), og stikprøvespredningen for gruppen (sd).</p>
<p>Gruppe n xbar sd VH 60 377 63 HH 60 345 43</p>
<ol style="list-style-type: lower-alpha">
<li>Beregn ‘standard error of the mean’ (SEM) og lav 95%
sikkerhedsintervaller fo middelværdierne i de to grupper. Fortolk
resultatet. VH SEM = 63/sqrt(60) = 8.13 95%-si: 377+/- 1.96<em>8.13 =
(361,393) HH SEM = 43/sqrt(60) = 5.56 95% SI 345 +/- 1.96</em>5.56 =
(334,356)</li>
</ol>
<p>Disse indeholder populationsstørrelserne med 95% ssh - og overlapper
ikke…</p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Undersøg om der er en sammenhæng mellem arealet af denne del af
hjernen og om kvinderne er højre- eller venstrehåndede.</li>
</ol>
<p>svar b) <span class="math display">\[\overline{X}_{VH} -
\overline{X}_{HH} = 377 - 345 = 32 \\
SE(\overline{X}_{VH} - \overline{X}_{HH}) = \sqrt{8.13^2 + 5.56^2} =
9.85 \]</span></p>
<p>95%-SI: 32 +/- 1.96*9.85 = (12.7, 51.3)</p>
<p>SI indeholder populationsdifferensen med 95% sandsynlighed. Vi ser at
0 ikke er indeholdt i intervallet, og der er derfor en signifikant
forskel på et 5%-signifikans-niveau.</p>
</section><div class="section level1">
<h1 id="og-endnu-en-eksamensopgave-">Og endnu en eksamensopgave.<a class="anchor" aria-label="anchor" href="#og-endnu-en-eksamensopgave-"></a>
</h1>
<p>Vi definerer en dikotom variabel (en 0-1-variabel), der angiver,
hvorvidt en person har feber eller ej (1 for feber). Vi sætter grænsen
for dette til 37 grader. Variablen hedder feber i datasættet. Følgende
blev udført i R:</p>
<p>table(gender, feber) feber gender 0 1 K 40 25 M 51 14</p>
<ol style="list-style-type: lower-alpha">
<li>Angiv estimat for sandsynligheden for feber for hvert køn, med 95%
konfidensgrænser</li>
<li>Undersøg om der er evidens for forskel på sandsynligheden for feber
blandt mænd og kvinder, og udtryk en ev.t effekt i form af en odds
ratio. Formuler dine konklusioner i ord.</li>
</ol>
<p>PhatK = 25/65 = PhatMN = 14/65</p>
<p>SE(P-k) = sqrt(Phatk(1-phatk)/65) = 0.06 SE(P_M) =
sqrt(phatm(1-phatm)/65) = 0.051</p>
<p>95% ki for P_k: PhatK +/- 1.96<em>SEPK = (0.32, 0.44) 95% ki for Pm
PhatM +/- 1.96</em>sepm = (0.164,0.265)</p>
<ol start="2" style="list-style-type: lower-alpha">
<li>vi ser at konfidensintervallerne ikke overlapper, så der er
signifikant forskel. Odds for feber: OR_{K:M} = 25 51 / 14 40 = 2.28
(uklart om der skal ganges eller minusses. Tjek.) 95%KI (1.05, 4.94).
Dvs odds for feber er ca. dobbetl så stor for kvinder sammenlignet med
mænd.</li>
</ol>
<div class="section level2">
<h2 id="sidste-eksamensopgave">sidste eksamensopgave<a class="anchor" aria-label="anchor" href="#sidste-eksamensopgave"></a>
</h2>
<p>I denne opgave ser vi på data vedrørende krigsveteraner og deres
helbredsforhold. I alt er der data fra 299 veteraner. Vi bruger følgende
betegnelser. pbright: systolisk blodtryk på højre arm (mmHg) pbleft:
Systolisk blodtryk på venstre arm (mmHg) alk.kat: 1_ Antal genstande pr.
uge er 0 alk.kat: 2: antal genstande pr. uge er mellem 1 og 20 alk.kat:
3: antal genstande pr. uge er mere end 20. delta.bp forskel mellem
bpright og bpleft. delta.bp.bin: 1: hvis den absolutte værdi af delta.bp
er større end 10, 0 ellers. Nedenfor er angivet observationerne for de 6
første veteraner i datasættet, samt et par regnestørrelser. bpright
bpleft alk.kat delta.bp delta.bp.bin 111 113 2 -2 0 127 218 2 -1 0 113
111 2 2 0 120 127 2 -7 0 135 135 2 0 0 115 103 1 12 1 c(mean(bpright),
mean(bpleft), mean(delta.bp)) [1] 122.448161 121.066890 1.381271
c(sd(bpright), sd(bpleft), sd(delta.bp)) [1] 11.564228 11.993939
6.936562</p>
<ol style="list-style-type: lower-alpha">
<li><p>Kvantificer forskellen i blodtryk på højre og venstre arm, med
konfidensinterval. Er der signifikant forskel? kan vi udelukke en
middelforskel på 10 mmHg på de to sider?</p></li>
<li><p>I ambulatoriet har vi en veteran, der har et blodtryk på 135 mmHg
på højre side, men kun 122 mmHg på venstre side. Er denne forskel i
blodtryk så usædvanlig, at der må laves en nærmere undersøgelse af dette
individ?</p></li>
</ol>
<p>svar: a) Lad betegne populationsmiddelforskellen. Da er = 1.38, og
SEM 6.937/sqrt(299) = 0.40, så 95%-KI er +/- 1.96SEM ) (0.59, 2.17) Der
ses at være signifikant forskel, da 0 ikke er inkluderet i 95%-KI.
Tilsvarende er en middelforskel på 10 mm usandsynlig.</p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Forskel for person er 13. Vi beregner et 95%-RI 1.38+/-1.96SD =
(-12.33, 14.98) Så en forskel på 13 er ikke usædvanlig.</li>
</ol>
</div>
<div class="section level2">
<h2 id="et-forsøg-på-at-få-output-der-matcher-hvad-der-optræder-i-opgaverne">et forsøg på at få output der matcher hvad der optræder i
opgaverne<a class="anchor" aria-label="anchor" href="#et-fors%C3%B8g-p%C3%A5-at-f%C3%A5-output-der-matcher-hvad-der-optr%C3%A6der-i-opgaverne"></a>
</h2>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="va">summary_model</span> <span class="op">&lt;-</span> <span class="fu">summary</span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Udtræk koefficienterne</span></span>
<span><span class="va">coefficients</span> <span class="op">&lt;-</span> <span class="va">summary_model</span><span class="op">$</span><span class="va">coefficients</span></span>
<span></span>
<span><span class="co"># Formater og print outputtet som ønsket</span></span>
<span><span class="fu">cat</span><span class="op">(</span><span class="st">"Coefficients:\n"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Coefficients:</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cat</span><span class="op">(</span><span class="st">"            Estimate Std. Error t value Pr(&gt;|t|)\n"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>            Estimate Std. Error t value Pr(&gt;|t|)</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cat</span><span class="op">(</span><span class="fu">sprintf</span><span class="op">(</span><span class="st">"(Intercept)  %8.4f %10.4f %7.3f %9.2e ***\n"</span>,</span>
<span>            <span class="va">coefficients</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span>, <span class="va">coefficients</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span>, <span class="va">coefficients</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">coefficients</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(Intercept)   37.2851     1.8776  19.858  8.24e-19 ***</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cat</span><span class="op">(</span><span class="fu">sprintf</span><span class="op">(</span><span class="st">"wt           %8.4f %10.4f %7.3f %9.2e ***\n"</span>,</span>
<span>            <span class="va">coefficients</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">]</span>, <span class="va">coefficients</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">]</span>, <span class="va">coefficients</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">coefficients</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>wt            -5.3445     0.5591  -9.559  1.29e-10 ***</code></pre>
</div>
<p>::::::::::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div></section><section id="aio-powerberegninger"><p>Content from <a href="powerberegninger.html">powerberegninger</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/powerberegninger.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p><a href="https://www2.compute.dtu.dk/courses/introstat/slides02323/week12.pdf" class="external-link uri">https://www2.compute.dtu.dk/courses/introstat/slides02323/week12.pdf</a></p>
<p>Vi laver en undersøgelse af et eller andet. Vi vil gerne finde svar
på noget - virker denne sovemedicin bedre end en anden - for en given
værdi af bedre. Det kunne være “patienten sover to timer længere”. Vi
ønsker nu at vide, hvor stor en stikprøve vi skal tage, for at se en
forskel på to timer.</p>
<p>Der er to måder det kan gå galt på. Vi kan lave en type 1 fej - hvor
vi afviser nul-hypotesen. Selvom den faktisk er sand. Det er et tilfælde
af at medicinen ikke virker, men vi tror den virker.</p>
<p>Type to - er der hvor vi ikke afviser nul-hypotesen, selvom den
alternative hypotese er sand (og vi derfor burde have afvist
nul-hypotesen). Det er en situation hvor medicinen virker - men det
opdager vi ikke.</p>
<p>Risikoen betegner vi som hhv og : P(type 1 fejl) = alpha</p>
<p>P(type 2 fejl) = beta</p>
<p>Testens styrke er 1-beta. da beta er sandsynligheden for at medicinen
virker, uden at vi opdager det, er styrken derfor et udtryk for
sandsynligheden for at vi opdager at medicinen virker - når den faktisk
virker.</p>
<p>Powerberegningerh handler om at kunne planlægge sin undersøgelse, så
man på forhånd har en ide om hvor præcise resultater (eksempelvis
konfidensinterval) man kan forvente. Og at på forhånd have en ide om
hvor stor en effekt man kan forvente at opdage.</p>
<p>En ting er selve forsøgets udformning. Dobbeltblindt, hvornår gives
medicin, den slags. Men her koger det ned til: Hvis jeg ønsker en given
præcision og/eller power - hvor stor en stikprøve skal jeg så foretage.
Nyttigt, da der ofte er omkostninger forbundet ved at indsamle data -
men også etik - hvor vi foretager forsøg på levende væsener.</p>
<p>Så - vi har brug for at vide hvor stor en effekt vi enten ønsker,
eller kan forvente at se. Vi har brug for et signifikans niveau.</p>
<p>I beregningerne indgår * n stikprøvestørrelsen * delta -
effektstørrelsen ofte udtrykt i cohens et eller ndet * power - defineret
ovenfor * sd - standardafvigelsen i populationen * sig.level -
signifikansniveauet vi arbejder med.</p>
<p>sd er implicit 1, da det delta vi arbejder med måles i
standardafvigelsesenheder. Det er med andre ord implicit givet i
definitionen af cohens d, som er forskellen mellem to middelværdier,
divideret med den samlede standardafvigelse. Ønsker vi at specificere en
anden standard afvigelse, skal vi tage højde for det i beregningen af
effektstørrelsen. Hvis effektstørrelsen ønskes at være 0.2 og vi ved at
standardafvigelsen er 2 - så er vores delta nu
effektstørrelse<em>standardafvigelse lig 2</em>0.2 = 0.4</p>
<p>Exactly one of the parameters n, delta, power, sd, and sig.level must
be passed as NULL</p>
<p>Og det skal den, fordi det er en vi ønsker at beregne. Vi har en
holdning til delta, et ønske om en bestemt power, et estimat på sd (som
altså hænger sammen med delta og derfor er implicit), og et ønske
signifikansniveau. Hvor stor skal n være for at vi kan opnå det? Eller -
vi har kendt alt andet end delta - hvor stor en forskel kan vi forvente
at kunne se. Med andre ord, det er relativt enkelt. Vi plotter bare
tallene ind i funktionen, og får et svar.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="fu">power.t.test</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">500</span>, sig.level <span class="op">=</span> <span class="fl">0.05</span>, power <span class="op">=</span> <span class="fl">0.80</span>, type <span class="op">=</span> <span class="st">"two.sample"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
     Two-sample t test power calculation

              n = 500
          delta = 0.1773605
             sd = 1
      sig.level = 0.05
          power = 0.8
    alternative = two.sided

NOTE: n is number in *each* group</code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-rstudio"><p>Content from <a href="rstudio.html">Tips &amp; Tricks 4 RStudio</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/rstudio.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I use RStudio more efficiently?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>tips og tricks til rstudio</p>
<p>Moving lines of code up and down is easily achieved with an Alt +
Up/Down combination; there is no need to cut and paste. You can move a
single active line that way, or even a whole selection. If you need to
remove something Ctrl + D will delete the current line/selection in no
time.</p>
<p>Alt + (-) - Inserts the assignment operator (&lt;-) with spaces
surrounding it. Ctrl + Shift + M - Inserts the magrittr/pipe operator
(%&gt;%) with spaces surrounding it. Ctrl + Shift + R - Creates a
foldable comment section in your code. These are used for code
externalization with knitr:read_chunk() function. Learn more. Alt + L -
Collapse active section. Alt + O - Collapse all sections. Alt + Shift +
L - Open active section. Alt + Shift + O - Open all sections</p>
<p>ctrl-shift-f</p>
<p>rename in scope</p>
<p>multicursor support</p>
<p>Ctrl + I - Fixes line indentations. Ctrl + Shift + A - Does a
complete reformat of the selected part of a code.</p>
<p>ctrl+shift+p - command palette. Genvej til genveje!</p>
<p>Rainbow paranteser</p>
<p>zoom på paneler</p>
<p>du kan ændre layout af dine panes</p>
<p>jobRunScript</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-packages"><p>Content from <a href="packages.html">packages</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/packages.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="why">Why<a class="anchor" aria-label="anchor" href="#why"></a>
<a class="anchor" aria-label="anchor" href="#why"></a>
</h2>
<hr class="half-width">
<p>Hold dine pakker opdateret! Hold også R opdateret, men husk også at
holde pakkerne opdateret.</p>
<p>Hvordan finder vi ud af hvilke af vores pakker der er forældet?</p>
<p>packages tab er fin.</p>
<p>Vi kan også bruge <code>old.packages()</code>, der ser hvilke pakker
vi har installeret, og fortæller om der er en nyere udgave
tilgængelig.</p>
<p>update.packages() tilbyder også at installere dem.</p>
</section><section><h2 class="section-heading" id="library-vs-packagefunktion">library vs package::funktion()<a class="anchor" aria-label="anchor" href="#library-vs-packagefunktion"></a>
<a class="anchor" aria-label="anchor" href="#library-vs-packagefunktion"></a>
</h2>
<hr class="half-width">
<p>og package:::funktion()</p>
</section><section><h2 class="section-heading" id="package-management">Package management<a class="anchor" aria-label="anchor" href="#package-management"></a>
<a class="anchor" aria-label="anchor" href="#package-management"></a>
</h2>
<hr class="half-width">
<p>Hvad gør man når man vil have en helt bestemt version af en pakke -
eksempelvis fordi den pakker man gerne vil bruge, ikke er tilgængelig
for den version af R man kører. p_load() p_delete() pacman pakken.-
p_install_version p_load_gh(“trinker/regexr”)</p>
<p>Til når man i sit script egentlig ikke gider
p_load(tidyverse,stringr,httr,jsonlite,lubridate)</p>
<p>pacman::p_update(update = F)</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">pacman</span><span class="op">)</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu">p_update</span><span class="op">(</span>update <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "codetools" "foreign"   "lattice"   "MASS"      "Matrix"    "spatial"  </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">p_load</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="conflicts">Conflicts<a class="anchor" aria-label="anchor" href="#conflicts"></a>
<a class="anchor" aria-label="anchor" href="#conflicts"></a>
</h2>
<hr class="half-width">
<p>I øvrigt - saml indlæsning af dine pakker ét sted. I starten af
scriptet. Når du indlæser et bibliotek, indlæser du alle funktionerne i
det bibliotek. Eksemplet er tidyverse filter.</p>
<p>Det er lettere at gennemskue hvad der sker i et script hvis lag
fungerer på samme måde gennem hele scriptet. Har du brug for en speciel
udgave så brug :: notationen.</p>
<p>dplyr::lag(1:5) stats::lag(1:5)</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-best-noter"><p>Content from <a href="best-noter.html">best_noter</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/best-noter.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><a href="https://rstats-wtf.github.io/wtf-debugging-slides/#/additional-resources" class="external-link uri">https://rstats-wtf.github.io/wtf-debugging-slides/#/additional-resources</a></p>
<p><a href="https://github.com/jennybc/debugging" class="external-link uri">https://github.com/jennybc/debugging</a></p>
<p>CC-BY “Artwork by <a href="https://twitter.com/allison_horst" class="external-link"><span class="citation">@allison_horst</span></a>, CC-BY”.</p>
<p>CC-BY (Creative Commons Attribution 4.0 International License).
Unless otherwise indicated, please cite using “Artwork by <a href="https://twitter.com/allison_horst" class="external-link"><span class="citation">@allison_horst</span></a>”. <a href="https://twitter.com/allison_horst" class="external-link uri">https://twitter.com/allison_horst</a> ## Introduction</p>
<p>Liste over ting der kan tilføjes når dette er tilføjet, kan
R-Bestiarium repoet slettes</p>
<p>Der kan tilføjes en del punkter fra <a href="https://kubdatalab.github.io/forklaringer/" class="external-link uri">https://kubdatalab.github.io/forklaringer/</a> også</p>
<p>Dyb redigering af ggplot objekter <a href="https://kubdatalab.github.io/R-Bestiarium/21-dyb-ggplot2/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/21-dyb-ggplot2/index.html</a>
<a href="https://kubdatalab.github.io/R-Bestiarium/22-programmer-ggplot2/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/22-programmer-ggplot2/index.html</a></p>
<p>Ekstrahering af tiff-lag <a href="https://kubdatalab.github.io/R-Bestiarium/01-extracting-tiff-layers/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/01-extracting-tiff-layers/index.html</a></p>
<p>Rayrender - højdemodeller <a href="https://kubdatalab.github.io/R-Bestiarium/02-ray-render/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/02-ray-render/index.html</a></p>
<p>Github Hvorfor, hvordan <a href="https://kubdatalab.github.io/R-Bestiarium/03-github/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/03-github/index.html</a></p>
<p>parallelprocessering <a href="https://kubdatalab.github.io/R-Bestiarium/04-parallel/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/04-parallel/index.html</a></p>
<p>grabs af youtubevideoer <a href="https://kubdatalab.github.io/R-Bestiarium/06-grapping-youtube/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/06-grapping-youtube/index.html</a></p>
<p>animering af ggplot <a href="https://kubdatalab.github.io/R-Bestiarium/10-bar-race-animation/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/10-bar-race-animation/index.html</a>
<a href="https://kubdatalab.github.io/R-Bestiarium/17-animationer/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/17-animationer/index.html</a></p>
<p>Generering af farvepaletter <a href="https://kubdatalab.github.io/R-Bestiarium/15-farver-og-striber/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/15-farver-og-striber/index.html</a></p>
<p><a href="https://x.com/allison_horst/status/1216411271903318016" class="external-link uri">https://x.com/allison_horst/status/1216411271903318016</a></p>
<p>Debugging af R <a href="https://kubdatalab.github.io/R-Bestiarium/20-debugging/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/20-debugging/index.html</a>
<a href="https://cosimameyer.com/post/mastering-debugging-in-r/" class="external-link uri">https://cosimameyer.com/post/mastering-debugging-in-r/</a></p>
<p><a href="https://blogs.rstudio.com/ai/posts/2022-10-06-audio-classification-torch/" class="external-link uri">https://blogs.rstudio.com/ai/posts/2022-10-06-audio-classification-torch/</a></p>
<div class="section level1">
<h1 id="herunder-er-de-tilføjet">Herunder er de tilføjet<a class="anchor" aria-label="anchor" href="#herunder-er-de-tilf%C3%B8jet"></a>
</h1>
<p>Hvilken fordeling følger mine data? <a href="https://kubdatalab.github.io/R-Bestiarium/16-hvilken-fordeling/index.html" class="external-link uri">https://kubdatalab.github.io/R-Bestiarium/16-hvilken-fordeling/index.html</a></p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div></section><section id="aio-hvad-vi-glemte"><p>Content from <a href="hvad-vi-glemte.html">hvad-vi-glemte</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/hvad-vi-glemte.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Hvad vi glemte at fortælle dig om.</p>
<ol style="list-style-type: decimal">
<li>Det kan godt se ud som om vi får et bestemt resultat. Men hver gang
vi har numeriske operationer der involverer decimaler - alt numeric -
kan vi forvente at der er numeriske fejl. Det er ikke det samme som fejl
- det er det vi ser når 1/3 bliver repræsenteret som 33%</li>
</ol>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">7</span><span class="op">/</span><span class="fl">13</span> <span class="op">-</span> <span class="fl">3</span><span class="op">/</span><span class="fl">31</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.4416873</code></pre>
</div>
<p>er forskelligt fra</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">print</span><span class="op">(</span><span class="fl">7</span><span class="op">/</span><span class="fl">13</span> <span class="op">-</span> <span class="fl">3</span><span class="op">/</span><span class="fl">31</span>, digits <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.4416873449131513</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">integrand</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span><span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="op">(</span><span class="va">x</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fu">sqrt</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">}</span></span>
<span><span class="fu">integrate</span><span class="op">(</span><span class="va">integrand</span>, lower <span class="op">=</span> <span class="fl">0</span>, upper <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>3.141593 with absolute error &lt; 2.7e-05</code></pre>
</div>
<p>Uwes maxim Computers are cheap and thinking hurts</p>
<p>Optimering af kode: Your first duty is to create clear correct code.
Only optimize when the code is debugged and stable and when optimization
is likely to make a significant difference. Spending an our to save a
millisecond is not useful.</p>
<p>R is a good thing because it is a language. The power of language is
abstraction. The way to make abstractions in R is to write
functions.</p>
<p>og det er når vi begynder at skrive funktoner, at vi bevæger os fra
at bruge R, til at programmere i R.</p>
<p>Når der skrives funktioner - så skriv små funktioner. Der gør en
ting. Og kun en ting. Det er langt lettere at finde fejlen, når (ikke
hvis) den opstår. Og små funktioner har større sandsynlighed for at være
nyttige i andre sammenhænge.</p>
<p>Funktioner hvis output er en funktion.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mycumfun</span> <span class="op">&lt;-</span> <span class="fu">ecdf</span><span class="op">(</span><span class="fu">rnorm</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">mycumfun</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.8</code></pre>
</div>
<p><a href="https://rstudio.github.io/renv/" class="external-link uri">https://rstudio.github.io/renv/</a></p>
<p>xkcd.com/1179</p>
<p>og how to name stuff af jenny bc</p>
<p>Læs advarsler…</p>
<p>Det største problem med warnings er at folk ikke læser dem. Mange af
de warnings vores nybegyndere får, behøver de ikke bekymre sig om. Mange
af dem behøver man heller ikke bekymre sig om.</p>
<p>Men. Det du bør gøre når du ser en warning er: figure out what the
warning is saying. figure out why the warning is triggerede. Figure out
the effect on the results of the computation baseret på trin 3 figure
out wether or not the results will be erronious.</p>
<p>globale vs lokale assignments. Og environments.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-barcharts"><p>Content from <a href="barcharts.html">barcharts</a></p>
<hr>
<p>Last updated on 2024-07-17 |

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/episodes/barcharts.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using R Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with the new lesson template</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>En huskeliste.</p>
<p>De er lette at lave - sværere at få til at se pæne ud.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">palmerpenguins</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_example</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_example</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu">geom_bar</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">labs</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"Number of penguins"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Number of penguins"</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/barcharts-rendered-unnamed-chunk-3-1.png" style="display: block; margin: auto;" class="figure">
Meningsfuld rækkefølge?</p>
<p>De er pt sorteret alfabetisk. Normalt giver det mest mening at
sortere dem efter antal.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_example</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu">geom_bar</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">labs</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"Number of penguins"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Number of penguins"</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/barcharts-rendered-unnamed-chunk-4-1.png" style="display: block; margin: auto;" class="figure">
Det gør det lettere at sammeligne.</p>
<p>Vi har ikke så mange forskellige kategorier - men det er ofte en god
ide at have dem på y-aksen når der er mange.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_example</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu">geom_bar</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">labs</span><span class="op">(</span></span>
<span>  y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"Number of penguins"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Number of penguins"</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/barcharts-rendered-unnamed-chunk-5-1.png" style="display: block; margin: auto;" class="figure">
Er teksten stor nok?</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_example</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu">geom_bar</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">labs</span><span class="op">(</span></span>
<span>  y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"Number of penguins"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Number of penguins"</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_grey</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">rel</span><span class="op">(</span><span class="fl">1.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/barcharts-rendered-unnamed-chunk-6-1.png" style="display: block; margin: auto;" class="figure">
Der er en del tom plads mellem labels og “søjlern” der jo ikke er søjler
længere.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_example</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu">geom_bar</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">labs</span><span class="op">(</span></span>
<span>  y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"Number of penguins"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Number of penguins"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_grey</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">rel</span><span class="op">(</span><span class="fl">1.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu">expansion</span><span class="op">(</span>mult <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/barcharts-rendered-unnamed-chunk-7-1.png" style="display: block; margin: auto;" class="figure">
Fjern clutter - det har tufte holdninger til. Der er i hvert fald
horisontale linier der er unødvendige. Og den grå baggrund? det er ikke
kønt.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_example</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu">geom_bar</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">labs</span><span class="op">(</span></span>
<span>  y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"Number of penguins"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Number of penguins"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_grey</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">rel</span><span class="op">(</span><span class="fl">1.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu">expansion</span><span class="op">(</span>mult <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    panel.grid.major.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.minor.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/barcharts-rendered-unnamed-chunk-8-1.png" style="display: block; margin: auto;" class="figure">
Vi behøver ikke. Men - det kan være rart at have de rå tal direkte på
søjlerne. Det er bibliotekets ledelse særligt glade for…</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_count</span> <span class="op">&lt;-</span> <span class="fu">count</span><span class="op">(</span><span class="va">penguin_example</span>, <span class="va">species</span><span class="op">)</span></span>
<span><span class="va">penguin_example</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu">geom_bar</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">labs</span><span class="op">(</span></span>
<span>  y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"Number of penguins"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Number of penguins"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_grey</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">rel</span><span class="op">(</span><span class="fl">1.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu">expansion</span><span class="op">(</span>mult <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    panel.grid.major.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.minor.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_text</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguin_count</span>,</span>
<span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">n</span>, y <span class="op">=</span> <span class="va">species</span>, label <span class="op">=</span> <span class="va">n</span><span class="op">)</span>,</span>
<span>hjust <span class="op">=</span> <span class="fl">1</span>,</span>
<span>nudge_x <span class="op">=</span> <span class="op">-</span><span class="fl">0.25</span>,</span>
<span>color <span class="op">=</span> <span class="st">"white"</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_vline</span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="cn">NULL</span>, expand <span class="op">=</span> <span class="fu">expansion</span><span class="op">(</span>mult <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>panel.grid.major.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, panel.grid.minor.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Scale for x is already present.
Adding another scale for x, which will replace the existing scale.</code></pre>
</div>
<figure><img src="../fig/barcharts-rendered-unnamed-chunk-9-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Vi kan lave ca. samme trick med labels hvis vi har lyst.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_example</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu">geom_bar</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">labs</span><span class="op">(</span></span>
<span>  y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"Number of penguins"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Number of penguins"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_grey</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">rel</span><span class="op">(</span><span class="fl">1.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu">expansion</span><span class="op">(</span>mult <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    panel.grid.major.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.minor.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_text</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguin_count</span>,</span>
<span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">n</span>, y <span class="op">=</span> <span class="va">species</span>, label <span class="op">=</span> <span class="va">n</span><span class="op">)</span>,</span>
<span>hjust <span class="op">=</span> <span class="fl">1</span>,</span>
<span>nudge_x <span class="op">=</span> <span class="op">-</span><span class="fl">0.25</span>,</span>
<span>color <span class="op">=</span> <span class="st">"white"</span> <span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_text</span><span class="op">(</span></span>
<span>  data  <span class="op">=</span> <span class="va">penguin_count</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="fl">0</span>,y<span class="op">=</span><span class="va">species</span>, label <span class="op">=</span> <span class="va">species</span><span class="op">)</span>,</span>
<span>  hjust <span class="op">=</span> <span class="fl">0</span>, nudge_x <span class="op">=</span> <span class="fl">0.25</span>, color <span class="op">=</span> <span class="st">"white"</span>, fontface <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">4.5</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_vline</span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="cn">NULL</span>, expand <span class="op">=</span> <span class="fu">expansion</span><span class="op">(</span>mult <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">scale_y_discrete</span><span class="op">(</span>breaks <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>panel.grid.major.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, panel.grid.minor.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Scale for x is already present.
Adding another scale for x, which will replace the existing scale.</code></pre>
</div>
<figure><img src="../fig/barcharts-rendered-unnamed-chunk-10-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Det er en smagssag - men det kan se pænere ud med smallere bars.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_example</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu">geom_bar</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"blue"</span>,</span>
<span>just <span class="op">=</span> <span class="fl">1</span>, </span>
<span>width <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">labs</span><span class="op">(</span></span>
<span>  y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"Number of penguins"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Number of penguins"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_grey</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">rel</span><span class="op">(</span><span class="fl">1.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu">expansion</span><span class="op">(</span>mult <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    panel.grid.major.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.minor.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_text</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguin_count</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">n</span>, y <span class="op">=</span> <span class="va">species</span>, label <span class="op">=</span> <span class="va">n</span><span class="op">)</span>,</span>
<span>  hjust <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vjust <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  nudge_y <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">5.5</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_text</span><span class="op">(</span></span>
<span>  data  <span class="op">=</span> <span class="va">penguin_count</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="fl">0</span>,y<span class="op">=</span><span class="va">species</span>, label <span class="op">=</span> <span class="va">species</span><span class="op">)</span>,</span>
<span>  hjust <span class="op">=</span> <span class="fl">0</span>, </span>
<span>  vjust <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  nudge_x <span class="op">=</span> <span class="fl">0.5</span>, </span>
<span>  nudge_y <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  color <span class="op">=</span> <span class="st">"black"</span>, </span>
<span>  fontface <span class="op">=</span> <span class="st">"bold"</span>, </span>
<span>  size <span class="op">=</span> <span class="fl">4.5</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_vline</span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="cn">NULL</span>, expand <span class="op">=</span> <span class="fu">expansion</span><span class="op">(</span>mult <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">scale_y_discrete</span><span class="op">(</span>breaks <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>panel.grid.major.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, panel.grid.minor.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Scale for x is already present.
Adding another scale for x, which will replace the existing scale.</code></pre>
</div>
<figure><img src="../fig/barcharts-rendered-unnamed-chunk-11-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/KUBDatalab/R-toolbox/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/KUBDatalab/R-toolbox/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/KUBDatalab/R-toolbox/" class="external-link">Source</a></p>
				<p><a href="https://github.com/KUBDatalab/R-toolbox/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:kubdatalab@kb.dk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.5" class="external-link">sandpaper (0.16.5)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.3" class="external-link">varnish (1.0.3)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://KUBDatalab.github.io/R-toolbox/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://KUBDatalab.github.io/R-toolbox/instructor/aio.html",
  "identifier": "https://KUBDatalab.github.io/R-toolbox/instructor/aio.html",
  "dateCreated": "2024-04-09",
  "dateModified": "2024-07-17",
  "datePublished": "2024-07-17"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

